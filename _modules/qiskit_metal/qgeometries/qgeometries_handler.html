<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" />

    <!-- Generated with Sphinx 7.4.7 and Furo 2024.01.29 -->
        <title>qiskit_metal.qgeometries.qgeometries_handler - Quantum Metal 0.5.0</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/qiskit-sphinx-theme.css?v=fe84956c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/qiskit-ecosystem.css?v=745c5aa7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet">
<script src="../../../_static/js/web-components/top-nav-bar.js"></script></head>
  <body>
    
    <script>document.body.dataset.theme = "light";</script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
      <defs><style>.cls-1{fill:none;}</style></defs>
      <path d="M28,4H4A2,2,0,0,0,2,6V26a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V6A2,2,0,0,0,28,4ZM4,6H20V26H4ZM28,26H22V6h6Z"/>
      <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
      <defs><style>.cls-1{fill:none;}</style></defs>
      <rect x="4" y="6" width="24" height="2"/>
      <rect x="4" y="24" width="24" height="2"/>
      <rect x="4" y="12" width="24" height="2"/>
      <rect x="4" y="18" width="24" height="2"/>
      <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg version="1.1" id="icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
         viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve"><polygon points="22,16 12,26 10.6,24.6 19.2,16 10.6,7.4 12,6 " stroke="currentColor"/>
      <rect id="_x3C_Transparent_Rectangle_x3E_" fill="none" width="32" height="32"/>
    </svg>
  </symbol>
  <symbol id="svg-new-tab" viewBox="0 0 32 32">
    <svg id="icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
      <defs>
        <style>
          .cls-1 {
            fill: none;
          }
        </style>
      </defs>
      <path fill="#6929C4" d="M26,28H6a2.0027,2.0027,0,0,1-2-2V6A2.0027,2.0027,0,0,1,6,4H16V6H6V26H26V16h2V26A2.0027,2.0027,0,0,1,26,28Z"/>
      <polygon fill="#6929C4" points="20 2 20 4 26.586 4 18 12.586 19.414 14 28 5.414 28 12 30 12 30 2 20 2"/>
      <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">Quantum Metal 0.5.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-brand">
  <a href="https://www.qiskit.org/ecosystem">
    <div class="sidebar-logo-container">
      <img class="sidebar-logo" src="../../../_static/images/ecosystem-logo.svg" alt="Qiskit Ecosystem logo"/>
    </div>
  </a>
  
  <span class="sidebar-brand-text">Quantum Metal 0.5.0</span>
</div><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installing Qiskit Metal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../workflow.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../workflow.html#qiskit-metal-workflow">Qiskit Metal Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../workflow.html#quantization-methods-overview">Quantization Methods Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributor Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributor-guide.html">Contributing to Qiskit Metal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributor-guide.html#where-things-are">Where Things Are</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributor-guide.html#reporting-bugs-and-requesting-enhancements">Reporting Bugs and Requesting Enhancements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributor-guide.html#contributing-code">Contributing Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributor-guide.html#contributing-to-documentation">Contributing to Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://www.youtube.com/playlist?list=PLOFEBzvs-VvqHl5ZqVmhB_FcSqmLufsjb">Video Recordings</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Libraries</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../apidocs/qlibrary.html">All Quantum Devices</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of All Quantum Devices</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.QComponent.html">QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.ParsedDynamicAttributes_Component.html">ParsedDynamicAttributes_Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.BaseQubit.html">BaseQubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.QRoute.html">QRoute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.QRouteLead.html">QRouteLead</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.QRoutePoint.html">QRoutePoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.CircleCaterpillar.html">CircleCaterpillar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.CircleRaster.html">CircleRaster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.NGon.html">NGon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.NSquareSpiral.html">NSquareSpiral</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.Rectangle.html">Rectangle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.RectangleHollow.html">RectangleHollow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.Cap3Interdigital.html">Cap3Interdigital</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.CapNInterdigital.html">CapNInterdigital</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.ResonatorCoilRect.html">ResonatorCoilRect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.CoupledLineTee.html">CoupledLineTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.LineTee.html">LineTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.CapNInterdigitalTee.html">CapNInterdigitalTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TunableCoupler01.html">TunableCoupler01</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TunableCoupler02.html">TunableCoupler02</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.ReadoutResFC.html">ReadoutResFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.ResonatorLumped.html">ResonatorLumped</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebond.html">LaunchpadWirebond</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebondCoupled.html">LaunchpadWirebondCoupled</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebondDriven.html">LaunchpadWirebondDriven</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.OpenToGround.html">OpenToGround</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.ShortToGround.html">ShortToGround</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.RouteStraight.html">RouteStraight</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.RouteFramed.html">RouteFramed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.RouteMeander.html">RouteMeander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.RouteAnchors.html">RouteAnchors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.RouteMixed.html">RouteMixed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.RoutePathfinder.html">RoutePathfinder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.jj_dolan.html">jj_dolan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.jj_manhattan.html">jj_manhattan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonConcentric.html">TransmonConcentric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonConcentricType2.html">TransmonConcentricType2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonCross.html">TransmonCross</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonCrossFL.html">TransmonCrossFL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonInterdigitated.html">TransmonInterdigitated</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonPocket.html">TransmonPocket</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonPocketCL.html">TransmonPocketCL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonPocket6.html">TransmonPocket6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonPocketTeeth.html">TransmonPocketTeeth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TunableCoupler01.html">TunableCoupler01</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.SQUID_LOOP.html">SQUID_LOOP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.StarQubit.html">StarQubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.anchored_path.html">anchored_path</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">Overview</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../apidocs/designs.html">QDesigns</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of QDesigns</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.designs.QDesign.html">QDesign</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.designs.DesignPlanar.html">DesignPlanar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.designs.MultiPlanar.html">MultiPlanar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.designs.DesignFlipChip.html">DesignFlipChip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.designs.QNet.html">QNet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.designs.Components.html">Components</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../apidocs/qlibrary.html">QComponents</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of QComponents</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.QComponent.html">QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.ParsedDynamicAttributes_Component.html">ParsedDynamicAttributes_Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.BaseQubit.html">BaseQubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.QRoute.html">QRoute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.QRouteLead.html">QRouteLead</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.QRoutePoint.html">QRoutePoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.CircleCaterpillar.html">CircleCaterpillar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.CircleRaster.html">CircleRaster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.NGon.html">NGon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.NSquareSpiral.html">NSquareSpiral</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.Rectangle.html">Rectangle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.RectangleHollow.html">RectangleHollow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.Cap3Interdigital.html">Cap3Interdigital</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.CapNInterdigital.html">CapNInterdigital</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.ResonatorCoilRect.html">ResonatorCoilRect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.CoupledLineTee.html">CoupledLineTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.LineTee.html">LineTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.CapNInterdigitalTee.html">CapNInterdigitalTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TunableCoupler01.html">TunableCoupler01</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TunableCoupler02.html">TunableCoupler02</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.ReadoutResFC.html">ReadoutResFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.ResonatorLumped.html">ResonatorLumped</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebond.html">LaunchpadWirebond</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebondCoupled.html">LaunchpadWirebondCoupled</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebondDriven.html">LaunchpadWirebondDriven</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.OpenToGround.html">OpenToGround</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.ShortToGround.html">ShortToGround</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.RouteStraight.html">RouteStraight</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.RouteFramed.html">RouteFramed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.RouteMeander.html">RouteMeander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.RouteAnchors.html">RouteAnchors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.RouteMixed.html">RouteMixed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.RoutePathfinder.html">RoutePathfinder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.jj_dolan.html">jj_dolan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.jj_manhattan.html">jj_manhattan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonConcentric.html">TransmonConcentric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonConcentricType2.html">TransmonConcentricType2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonCross.html">TransmonCross</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonCrossFL.html">TransmonCrossFL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonInterdigitated.html">TransmonInterdigitated</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonPocket.html">TransmonPocket</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonPocketCL.html">TransmonPocketCL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonPocket6.html">TransmonPocket6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TransmonPocketTeeth.html">TransmonPocketTeeth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.TunableCoupler01.html">TunableCoupler01</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.SQUID_LOOP.html">SQUID_LOOP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.StarQubit.html">StarQubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qlibrary.anchored_path.html">anchored_path</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../apidocs/analyses.html">Analyses</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Analyses</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.QAnalysis.html">QAnalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.QSimulation.html">QSimulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.Hcpb.html">Hcpb</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.Hcpb_analytic.html">Hcpb_analytic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.HO_wavefunctions.html">HO_wavefunctions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.transmon_analytics.html">transmon_analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.cpw_calculations.html">cpw_calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.kappa_calculation.html">kappa_calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.Sweeper.html">Sweeper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.LOManalysis.html">LOManalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.EPRanalysis.html">EPRanalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.lumped_capacitive.html">lumped_capacitive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.LumpedElementsSim.html">LumpedElementsSim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.EigenmodeSim.html">EigenmodeSim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.analyses.ScatteringImpedanceSim.html">ScatteringImpedanceSim</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../apidocs/renderers.html">QRenderes</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of QRenderes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.QRenderer.html">QRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.QRendererGui.html">QRendererGui</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.QRendererAnalysis.html">QRendererAnalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.PlotCanvas.html">PlotCanvas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.MplInteraction.html">MplInteraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.ZoomOnWheel.html">ZoomOnWheel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.PanAndZoom.html">PanAndZoom</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.QMplRenderer.html">QMplRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.AnimatedText.html">AnimatedText</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.QGDSRenderer.html">QGDSRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.Cheesing.html">Cheesing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.QAnsysRenderer.html">QAnsysRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.QHFSSRenderer.html">QHFSSRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.QQ3DRenderer.html">QQ3DRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.QPyaedt.html">QPyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.QQ3DPyaedt.html">QQ3DPyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.QHFSSPyaedt.html">QHFSSPyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.QHFSSDrivenmodalPyaedt.html">QHFSSDrivenmodalPyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.QHFSSEigenmodePyaedt.html">QHFSSEigenmodePyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html">QGmshRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.renderers.Vec3DArray.html">Vec3DArray</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../apidocs/toolbox_metal.html">Toolbox</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Toolbox</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.toolbox_metal.QiskitMetalExceptions.html">QiskitMetalExceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.toolbox_metal.QiskitMetalDesignError.html">QiskitMetalDesignError</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.toolbox_metal.about.html">about</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.toolbox_metal.import_export.html">import_export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.toolbox_metal.math_and_overrides.html">math_and_overrides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.toolbox_metal.parsing.html">parsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.toolbox_metal.layer_stack_handler.html">layer_stack_handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.toolbox_metal.bounds_for_path_and_poly_tables.html">bounds_for_path_and_poly_tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.toolbox_metal.determine_larger_box.html">determine_larger_box</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../apidocs/qgeometries.html">QGeometry</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of QGeometry</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html">QGeometryTables</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../apidocs/gui.html">GUI</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of GUI</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../apidocs/qiskit_metal._gui.MetalGUI.html">MetalGUI</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Qiskit/qiskit/blob/master/CODE_OF_CONDUCT.md">Code of Conduct</a></li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <h1>Source code for qiskit_metal.qgeometries.qgeometries_handler</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># This code is part of Qiskit.</span>
<span class="c1">#</span>
<span class="c1"># (C) Copyright IBM 2017, 2021.</span>
<span class="c1">#</span>
<span class="c1"># This code is licensed under the Apache License, Version 2.0. You may</span>
<span class="c1"># obtain a copy of this license in the LICENSE.txt file in the root directory</span>
<span class="c1"># of this source tree or at http://www.apache.org/licenses/LICENSE-2.0.</span>
<span class="c1">#</span>
<span class="c1"># Any modifications or derivative works of this code must retain this</span>
<span class="c1"># copyright notice, and modified files need to carry a notice indicating</span>
<span class="c1"># that they have been altered from the originals.</span>
<span class="sd">&quot;&quot;&quot;This is the main module that defines what an element is in Qiskit Metal.</span>

<span class="sd">See the docstring of `QGeometryTables`</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">inspect</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">shapely</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TYPE_CHECKING</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span> <span class="k">as</span> <span class="n">Dict_</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Iterable</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">geopandas</span><span class="w"> </span><span class="kn">import</span> <span class="n">GeoDataFrame</span><span class="p">,</span> <span class="n">GeoSeries</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">..</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">..draw</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseGeometry</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qiskit_metal.draw.utility</span><span class="w"> </span><span class="kn">import</span> <span class="n">round_coordinate_sequence</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry.multipolygon</span><span class="w"> </span><span class="kn">import</span> <span class="n">MultiPolygon</span>  <span class="c1">#to avoid MultiPolygons</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">..</span><span class="w"> </span><span class="kn">import</span> <span class="n">config</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">is_building_docs</span><span class="p">():</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">qiskit_metal.toolbox_python.utility_functions</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_range_of_vertex_to_not_fillet</span><span class="p">,</span> <span class="n">data_frame_empty_typed</span>

<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">..qlibrary.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">QComponent</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">..designs</span><span class="w"> </span><span class="kn">import</span> <span class="n">QDesign</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;is_qgeometry_table&#39;</span><span class="p">,</span> <span class="s1">&#39;QGeometryTables&#39;</span><span class="p">]</span>  <span class="c1"># , &#39;ElementTypes&#39;]</span>

<span class="c1"># from collections import OrderedDict</span>
<span class="c1"># dict are ordered in Python 3.6+ by default, this is for backward compatibility</span>

<span class="c1"># class ElementTypes:</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     Types of qgeometry</span>
<span class="c1">#         positive : qgeometry that are positive mask</span>
<span class="c1">#         negative : qgeometry that will be subtracted from the chip ground plane</span>
<span class="c1">#         helper   : qgeometry that are only used in a helper capacity,</span>
<span class="c1">#                    such as labels or mesh rectangles</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     positive = 0</span>
<span class="c1">#     negative = 1</span>
<span class="c1">#     helper   = 2</span>


<span class="k">def</span><span class="w"> </span><span class="nf">is_qgeometry_table</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if an object is a Metal BaseElementTable, i.e., an instance of</span>
<span class="sd">    `QGeometryTables`.</span>

<span class="sd">    The problem is that the `isinstance` built-in method fails</span>
<span class="sd">    when this module is reloaded.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj (object): Test this object</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if is a Metal element</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Dict</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;__i_am_qgeometry_table__&#39;</span><span class="p">)</span>


<span class="c1">#############################################################################</span>
<span class="c1">#</span>
<span class="c1"># Dictionary that specifies the column names of various element tables.</span>
<span class="c1">#</span>

<span class="c1"># TODO: implement data types in construction of tables?</span>
<span class="c1"># TODO: when a copy over the table and manipulate ehtmee</span>
<span class="c1"># i seem to loose the assignments to bool etc.</span>

<span class="n">ELEMENT_COLUMNS</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>

    <span class="c1">################################################</span>
    <span class="c1"># DO NOT MODIFY THE base DICTIONARY.</span>
    <span class="c1"># This is for Metal API use only.</span>
    <span class="c1"># To add a new element type, add a new key below.</span>
    <span class="n">base</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">component</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>  <span class="c1"># Unique ID of the component to which the element belongs</span>
        <span class="n">name</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>  <span class="c1"># name of the element</span>
        <span class="n">geometry</span><span class="o">=</span><span class="nb">object</span><span class="p">,</span>  <span class="c1"># shapely object</span>
        <span class="n">layer</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>  <span class="c1"># gds type of layer</span>
        <span class="n">subtract</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span>  <span class="c1"># do we subtract from the ground place of the chip</span>
        <span class="n">helper</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span>  <span class="c1"># helper or not</span>
        <span class="n">chip</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>  <span class="c1"># chip name</span>
        <span class="c1"># type=str,  # metal, helper.   poly=10 or path=11</span>
        <span class="n">__renderers__</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
            <span class="c1"># ADD specific renderers here, all renderes must register here.</span>
            <span class="c1"># hfss = dict( ... ) # pick names as hfss_name</span>
            <span class="c1"># hfss=dict(</span>
            <span class="c1">#     boundary_name=str,</span>
            <span class="c1">#     material=str,</span>
            <span class="c1">#     perfectE=bool</span>
            <span class="c1"># ),</span>
            <span class="c1"># gds=dict(</span>
            <span class="c1">#     type=str,</span>
            <span class="c1">#     color=str,</span>
            <span class="c1"># )</span>
        <span class="p">)),</span>

    <span class="c1">################################################</span>
    <span class="c1"># Specifies a path, such as a CPW.</span>
    <span class="c1"># Ideas: chamfer</span>
    <span class="n">path</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">width</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
        <span class="n">fillet</span><span class="o">=</span><span class="nb">object</span><span class="p">,</span>  <span class="c1"># TODO: not decided yet how to represent this</span>
        <span class="n">__renderers__</span><span class="o">=</span><span class="nb">dict</span><span class="p">()),</span>

    <span class="c1">################################################</span>
    <span class="c1"># Specifies a polygon</span>
    <span class="c1"># Ideas: chamfer</span>
    <span class="n">poly</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">fillet</span><span class="o">=</span><span class="nb">object</span><span class="p">,</span>  <span class="c1"># TODO: not decided yet how to represent this</span>
        <span class="n">__renderers__</span><span class="o">=</span><span class="nb">dict</span><span class="p">()),</span>
    <span class="c1">################################################</span>
    <span class="c1"># Specifies a junction as a 2 point line and width</span>
    <span class="c1"># This should provide enough information so as to</span>
    <span class="c1"># - render a sheet with inductance (from renderer options) + a vector for EPR</span>
    <span class="c1"># - generate ports (edge ports?) for Z analysis</span>
    <span class="c1"># - provice bounding box dimensions for the p-cell of ebeam junction layout</span>
    <span class="c1">#       for GDS renderer</span>
    <span class="n">junction</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">__renderers__</span><span class="o">=</span><span class="nb">dict</span><span class="p">()),</span>
    <span class="c1">################################################</span>
    <span class="c1"># Specifies a curved object, such as a circle. Perhaps as a buffered point</span>
    <span class="c1"># Not yet implemented</span>
    <span class="c1"># curved = dict(</span>
    <span class="c1"># __renderers__= dict(</span>
    <span class="c1"># )</span>
    <span class="c1"># )</span>
<span class="p">)</span>
<span class="sd">&quot;&quot;&quot;Dictionary that specifies the column names of various element tables.&quot;&quot;&quot;</span>

<span class="c1">#############################################################################</span>
<span class="c1">#</span>
<span class="c1"># Class to create, store, and handle element tables.</span>
<span class="c1">#</span>
<span class="n">TRUE_BOOLS</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;True&#39;</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span> <span class="s1">&#39;Yes&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>


<div class="viewcode-block" id="QGeometryTables">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">QGeometryTables</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class to create, store, and handle element tables.</span>

<span class="sd">    A regular user would not need to create tables themselves.</span>
<span class="sd">    This is handled automatically by the design creation and plugins.</span>

<span class="sd">    Structure:</span>
<span class="sd">        A component, such as a qubit, is a collection of qgeometry.</span>
<span class="sd">        For example, an element includes a rectangle, a cpw path, or a more general polygon.</span>

<span class="sd">        An element is a row in a table.</span>

<span class="sd">        All qgeometry of a type (Path or Polygon, or otherwise) are stored in a</span>
<span class="sd">        single table of their element type.</span>

<span class="sd">        All qgeometry of the same kind are stored in a table.</span>
<span class="sd">        A renderer has to know how to handle all types of qgeometry in order to render them.</span>

<span class="sd">    For plugin developers:</span>
<span class="sd">        In the following, we provide an example that illustrates for plugin developers how</span>
<span class="sd">        to add custom qgeometry and custom element properties. For example, we will add, for a renderer</span>
<span class="sd">        called hfss, a string property called &#39;boundary&#39;, a bool property called &#39;perfectE&#39;, and a property called &#39;material&#39;.</span>

<span class="sd">    For plugin developers, example use:</span>

<span class="sd">        .. code-block:: python</span>
<span class="sd">            :linenos:</span>
<span class="sd">            :emphasize-lines: 4,6</span>

<span class="sd">            import qiskit_metal as metal</span>

<span class="sd">            design = metal.designs.DesignPlanar()</span>
<span class="sd">            design.qgeometry = metal.QGeometryTables(design)</span>

<span class="sd">            # return the path table - give access to ..</span>
<span class="sd">            design.qgeometry[&#39;path&#39;]</span>
<span class="sd">            design.qgeometry.table[&#39;path&#39;]</span>

<span class="sd">            # Define interfaces</span>
<span class="sd">            design.qgeometry.get_component(</span>
<span class="sd">                    component_name,</span>
<span class="sd">                    element_name,</span>
<span class="sd">                    columns=all or geom or list) # get all elements for components</span>

<span class="sd">            &gt;&gt;&gt; component	name	geometry	layer	type	chip	subtract	fillet	color	width</span>


<span class="sd">    Now, if we want to add custom qgeometry through two fake renderers called hfss and gds:</span>

<span class="sd">        .. code-block:: python</span>
<span class="sd">            :linenos:</span>
<span class="sd">            :emphasize-lines: 1-15</span>

<span class="sd">            metal.QGeometryTables.add_renderer_extension(&#39;hfss&#39;, dict(</span>
<span class="sd">                base=dict(</span>
<span class="sd">                    boundary=str,</span>
<span class="sd">                    perfectE=bool,</span>
<span class="sd">                    material=str,</span>
<span class="sd">                    )</span>
<span class="sd">                ))</span>

<span class="sd">            metal.QGeometryTables.add_renderer_extension(&#39;gds&#39;, dict(</span>
<span class="sd">                path=dict(</span>
<span class="sd">                    color=str,</span>
<span class="sd">                    pcell=bool,</span>
<span class="sd">                    )</span>
<span class="sd">                ))</span>

<span class="sd">            design = metal.designs.DesignPlanar()</span>
<span class="sd">            qgeometry = metal.QGeometryTables(design)</span>

<span class="sd">            qgeometry.tables[&#39;path&#39;]</span>
<span class="sd">            &gt;&gt;&gt; component	name	geometry	layer	type	chip	subtract	fillet	color	width	hfss_boundary	hfss_perfectE	hfss_material	gds_color	gds_pcell</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Dummy private attribute used to check if an instanciated object is</span>
    <span class="c1"># indeed a element table class. The problem is that the `isinstance`</span>
    <span class="c1"># built-in method fails when this module is reloaded.</span>
    <span class="c1"># Used by `is_element` to check.</span>
    <span class="n">__i_am_qgeometry_table__</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">ELEMENT_COLUMNS</span> <span class="o">=</span> <span class="n">ELEMENT_COLUMNS</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Table column names to use to create.</span>
<span class="sd">    This dict should be updated by renderers.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># For creating names of columns of renderer properties</span>
    <span class="n">name_delimiter</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Delimiter to use when creating names of columns of renderer properties. &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design</span><span class="p">:</span> <span class="s1">&#39;QDesign&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The constructor for the `QGeometryTables` class.</span>

<span class="sd">        Args:</span>
<span class="sd">            design: Design in use</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_design</span> <span class="o">=</span> <span class="n">design</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_tables</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">()</span>

        <span class="c1"># Need to call after columns are added by add_renderer_extension is run by all the renderers.</span>
        <span class="c1"># self.create_tables()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">design</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;QDesign&#39;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a reference to the parent design object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_design</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">logger</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the logger.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_design</span><span class="o">.</span><span class="n">logger</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">tables</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict_</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">GeoDataFrame</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The dictionary of tables containing qgeometry.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict_[str, GeoDataFrame]: The keys of this dictionary are</span>
<span class="sd">            also obtained from `self.get_element_types()`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tables</span>

<div class="viewcode-block" id="QGeometryTables.add_renderer_extension">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.add_renderer_extension">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_renderer_extension</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">renderer_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">qgeometry</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add renderer element extension to ELEMENT_COLUMNS. Called when the</span>
<span class="sd">        load function of a renderer is called.</span>

<span class="sd">        Args:</span>
<span class="sd">            renderer_name (str): Name of renderer</span>
<span class="sd">            qgeometry (dict):  dict of dict.  Keys give element type names,</span>
<span class="sd">                              such as base, poly, path, etc.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Make sure that the base and all other element kinds have this renderer registered</span>
        <span class="k">for</span> <span class="n">element_key</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ELEMENT_COLUMNS</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">renderer_name</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ELEMENT_COLUMNS</span><span class="p">[</span><span class="n">element_key</span><span class="p">][</span>
                    <span class="s1">&#39;__renderers__&#39;</span><span class="p">]:</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">ELEMENT_COLUMNS</span><span class="p">[</span><span class="n">element_key</span><span class="p">][</span><span class="s1">&#39;__renderers__&#39;</span><span class="p">][</span>
                    <span class="n">renderer_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

        <span class="c1"># Now update the dictionaries with all qgeometry that the renderer may have</span>
        <span class="k">for</span> <span class="n">element_key</span><span class="p">,</span> <span class="n">element_column_ext_dict</span> <span class="ow">in</span> <span class="n">qgeometry</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

            <span class="c1"># The element the render is specifying is not in the specified qgeometry;</span>
            <span class="c1"># then add it. This shouldn&#39;t really happen.</span>
            <span class="c1"># The rest of the renderer dict keys in __renderers__  are missing for</span>
            <span class="c1"># the created type. Avoid doing, else hope it works.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">element_key</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ELEMENT_COLUMNS</span><span class="p">:</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">ELEMENT_COLUMNS</span><span class="p">[</span><span class="n">element_key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">__renderers__</span><span class="o">=</span><span class="nb">dict</span><span class="p">())</span>

            <span class="c1"># Now add qgeometry</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">ELEMENT_COLUMNS</span><span class="p">[</span><span class="n">element_key</span><span class="p">][</span><span class="s1">&#39;__renderers__&#39;</span><span class="p">][</span>
                <span class="n">renderer_name</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">element_column_ext_dict</span><span class="p">)</span></div>


    <span class="c1"># could use weakref memorization</span>
    <span class="c1"># https://stackoverflow.com/questions/33672412/python-functools-lru-cache-with-class-methods-release-object</span>
<div class="viewcode-block" id="QGeometryTables.get_element_types">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.get_element_types">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_element_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the names of the available qgeometry to create. This does not</span>
<span class="sd">        include &#39;base&#39;, but is rather such as poly and path.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list(str) : A list of name in self.ELEMENT_COLUMNS</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: I should probably make this a variable and memorize, only change when qgeometry are added and removed</span>
        <span class="c1"># can be slow for performance to look up each time and recalculate, since may call this often</span>
        <span class="n">names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">ELEMENT_COLUMNS</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;base&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">names</span></div>


<div class="viewcode-block" id="QGeometryTables.create_tables">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.create_tables">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates the default tables once. Populates the dict &#39;tables&#39; of</span>
<span class="sd">        GeoDataFrame, each with columns corresponding to the types of qgeometry</span>
<span class="sd">        defined in ELEMENT_COLUMNS.</span>

<span class="sd">        Should only be done once when a new design is created.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Creating Element Tables.&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">table_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_types</span><span class="p">():</span>
            <span class="c1"># Create GeoDataFrame with correct columns and d types</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">table_name</span><span class="o">.</span><span class="n">isidentifier</span><span class="p">()</span>

            <span class="c1"># Get column names</span>
            <span class="c1"># Base names, add concrete names, then add renderer names</span>

            <span class="c1"># Base names</span>
            <span class="n">columns_base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ELEMENT_COLUMNS</span><span class="p">[</span><span class="s1">&#39;base&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">columns_base_renderers</span> <span class="o">=</span> <span class="n">columns_base</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;__renderers__&#39;</span><span class="p">)</span>

            <span class="c1"># Concrete names</span>
            <span class="n">columns_concrete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ELEMENT_COLUMNS</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">columns_concrete_renderer</span> <span class="o">=</span> <span class="n">columns_concrete</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;__renderers__&#39;</span><span class="p">)</span>

            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns_base_renderers</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span>\
                <span class="nb">isinstance</span><span class="p">(</span><span class="n">columns_concrete_renderer</span><span class="p">,</span> <span class="nb">dict</span><span class="p">),</span>\
                <span class="s2">&quot;Please make sure that all qgeometry types have __renderers__</span><span class="se">\</span>
<span class="s2">                     which is a dictionary.&quot;</span>

            <span class="c1"># Combine all base names and renderer names</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="n">columns_base</span>
            <span class="n">columns</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">columns_concrete</span><span class="p">)</span>
            <span class="c1"># add renderer columns: base and then concrete</span>
            <span class="k">for</span> <span class="n">renderer_key</span> <span class="ow">in</span> <span class="n">columns_base_renderers</span><span class="p">:</span>
                <span class="n">columns</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_prepend_renderer_names</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">renderer_key</span><span class="p">,</span>
                                                 <span class="n">columns_base_renderers</span><span class="p">))</span>
                <span class="n">columns</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_prepend_renderer_names</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">renderer_key</span><span class="p">,</span>
                                                 <span class="n">columns_concrete_renderer</span><span class="p">))</span>

            <span class="c1"># Validate -- Throws an error if not valid</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_validate_column_dictionary</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">columns</span><span class="p">)</span>

            <span class="c1"># Create df with correct column names</span>
            <span class="n">table</span> <span class="o">=</span> <span class="n">GeoDataFrame</span><span class="p">(</span><span class="n">data_frame_empty_typed</span><span class="p">(</span><span class="n">columns</span><span class="p">))</span>
            <span class="c1"># not used elsewhere, also the name becomes &quot;name&quot; for some reason</span>
            <span class="n">table</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">table_name</span>

            <span class="c1"># Assign</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">table</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_column_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">column_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate A possible error here is if the user did not pass a valid</span>
<span class="sd">        data type.</span>

<span class="sd">        Throws an error if not valid.</span>

<span class="sd">        Args:</span>
<span class="sd">            table_name (str): Name of element table (e.g., &#39;poly&#39;)</span>
<span class="sd">            column_dict (dict): Dictionary to check</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: Data type &#39;&#39; not understood</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">__pre</span> <span class="o">=</span> <span class="s1">&#39;ERROR CREATING ELEMENT TABLE FOR DESIGN: </span><span class="se">\</span>
<span class="s1">            </span><span class="se">\n</span><span class="s1">  ELEMENT_TABLE_NAME = </span><span class="si">{table_name}</span><span class="se">\</span>
<span class="s1">            </span><span class="se">\n</span><span class="s1">  KEY                = </span><span class="si">{k}</span><span class="s1"> </span><span class="se">\</span>
<span class="s1">            </span><span class="se">\n</span><span class="s1">  VALUE              = </span><span class="si">{v}</span><span class="se">\n</span><span class="s1"> &#39;</span>

        <span class="c1"># Are these assertions still holding true?</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">column_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="n">__pre</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="nb">locals</span><span class="p">())</span> <span class="o">+</span>\
                <span class="s1">&#39; Key needs to be a string!&#39;</span>
            <span class="k">assert</span> <span class="n">k</span><span class="o">.</span><span class="n">isidentifier</span><span class="p">(),</span> <span class="n">__pre</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="nb">locals</span><span class="p">())</span> <span class="o">+</span>\
                <span class="s1">&#39; Key needs to be a valid string identifier!&#39;</span>
            <span class="k">assert</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">__pre</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="nb">locals</span><span class="p">())</span> <span class="o">+</span>\
                <span class="s1">&#39; Value needs to be a class!&#39;</span>

<div class="viewcode-block" id="QGeometryTables.get_rname">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.get_rname">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_rname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get name for renderer property.</span>

<span class="sd">        Args:</span>
<span class="sd">            renderer_name (str): Name of the renderer</span>
<span class="sd">            key (str): Key to get the name for</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The unique named used as a column in the table</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">renderer_name</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name_delimiter</span> <span class="o">+</span> <span class="n">key</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_prepend_renderer_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">renderer_key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                <span class="n">rdict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepare all the renderer names.</span>

<span class="sd">        Args:</span>
<span class="sd">            table_name (str): Unused</span>
<span class="sd">            renderer_key (str): Key to check for</span>
<span class="sd">            rdict (dict): Renderer dictionary</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Prepared dictionary</span>

<span class="sd">        TODO:</span>
<span class="sd">            This function has arguments that are unused, fix the function or ditch the unused args</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_rname</span><span class="p">(</span><span class="n">renderer_key</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span> <span class="n">v</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">rdict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">renderer_key</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">}</span>

<div class="viewcode-block" id="QGeometryTables.add_qgeometry">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.add_qgeometry">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_qgeometry</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">kind</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">geometry</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
            <span class="n">subtract</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
            <span class="n">helper</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
            <span class="n">layer</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># chip will be here</span>
            <span class="n">chip</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;main&#39;</span><span class="p">,</span>
            <span class="o">**</span><span class="n">other_options</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Main interface to add qgeometries.</span>

<span class="sd">        Args:</span>
<span class="sd">            kind (str): Must be in get_element_types (&#39;path&#39;, &#39;poly&#39;, etc.).</span>
<span class="sd">            component_name (str): Component name.</span>
<span class="sd">            geometry (dict): Dict of shapely geometry.</span>
<span class="sd">            subtract (bool): Subtract - passed through.  Defaults to False.</span>
<span class="sd">            helper (bool): Helper - passed through.  Defaults to False.</span>
<span class="sd">            layer (Union[int, str]): Layer - passed through.  Defaults to 1.</span>
<span class="sd">            chip (str): Chip name - passed through.  Defaults to &#39;main&#39;.</span>
<span class="sd">            **other_options (object): Other_options - passed through.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: Add unit test</span>

        <span class="c1"># ensure correct types</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subtract</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="n">subtract</span> <span class="o">=</span> <span class="n">subtract</span> <span class="ow">in</span> <span class="n">TRUE_BOOLS</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">helper</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="n">helper</span> <span class="o">=</span> <span class="n">helper</span> <span class="ow">in</span> <span class="n">TRUE_BOOLS</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">kind</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_types</span><span class="p">()):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;Creator user error: Unknown element kind=`</span><span class="si">{</span><span class="n">kind</span><span class="si">}</span><span class="s1">`&#39;</span>
                <span class="sa">f</span><span class="s1">&#39;Kind must be in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_element_types</span><span class="p">()</span><span class="si">}</span><span class="s1">. This failed for component&#39;</span>
                <span class="sa">f</span><span class="s1">&#39;name = `</span><span class="si">{</span><span class="n">component_name</span><span class="si">}</span><span class="s1">`.</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="sa">f</span><span class="s1">&#39; The call was with subtract=</span><span class="si">{</span><span class="n">subtract</span><span class="si">}</span><span class="s1"> and helper=</span><span class="si">{</span><span class="n">helper</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="sa">f</span><span class="s1">&#39; and layer=</span><span class="si">{</span><span class="n">layer</span><span class="si">}</span><span class="s1">, and options=</span><span class="si">{</span><span class="n">other_options</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1">#Checks if (any) of the geometry are MultiPolygons, and breaks them up into</span>
        <span class="c1">#individual polygons. Rounds the coordinate sequences of those values to avoid</span>
        <span class="c1">#numerical errors.</span>
        <span class="n">rounding_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">template_options</span><span class="p">[</span><span class="s1">&#39;PRECISION&#39;</span><span class="p">]</span>
        <span class="n">new_dict</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">geometry</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geometry</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">MultiPolygon</span><span class="p">):</span>
                <span class="n">temp_multi</span> <span class="o">=</span> <span class="n">geometry</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="n">shape_count</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">shape_temp</span> <span class="ow">in</span> <span class="n">temp_multi</span><span class="o">.</span><span class="n">geoms</span><span class="p">:</span>
                    <span class="n">new_dict</span><span class="p">[</span><span class="n">key</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span>
                             <span class="nb">str</span><span class="p">(</span><span class="n">shape_count</span><span class="p">)]</span> <span class="o">=</span> <span class="n">round_coordinate_sequence</span><span class="p">(</span>
                                 <span class="n">shape_temp</span><span class="p">,</span> <span class="n">rounding_val</span><span class="p">)</span>
                    <span class="n">shape_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">new_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">round_coordinate_sequence</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">rounding_val</span><span class="p">)</span>

        <span class="n">geometry</span> <span class="o">=</span> <span class="n">new_dict</span>

        <span class="c1"># Create options TODO: Might want to modify this (component_name -&gt; component_id)</span>
        <span class="c1"># Give warning if length is to be fillet&#39;s and not long enough.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_lengths</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">kind</span><span class="p">,</span> <span class="n">component_name</span><span class="p">,</span> <span class="o">**</span><span class="n">other_options</span><span class="p">)</span>

        <span class="c1"># Create options</span>
        <span class="n">options</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="n">component_name</span><span class="p">,</span>
                       <span class="n">subtract</span><span class="o">=</span><span class="n">subtract</span><span class="p">,</span>
                       <span class="n">helper</span><span class="o">=</span><span class="n">helper</span><span class="p">,</span>
                       <span class="n">layer</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">layer</span><span class="p">),</span>
                       <span class="n">chip</span><span class="o">=</span><span class="n">chip</span><span class="p">,</span>
                       <span class="o">**</span><span class="n">other_options</span><span class="p">)</span>

        <span class="c1">#replaces line above to generate the options.</span>
        <span class="c1">#for keyC in design.qgeometry.tables[kind].columns:</span>
        <span class="c1">#    if keyC != &#39;geometry&#39;:</span>
        <span class="c1">#        options[keyC] = ???[keyC] -&gt; alternative manner to pass options to the add_qgeometry function?</span>
        <span class="c1">#                                       instead have the add_qeometry in baseComponent generate the dict?</span>

        <span class="c1">#Could we just append rather than make a new table each time? This seems slow</span>
        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">kind</span><span class="p">]</span>

        <span class="c1"># assert that all names in options are in table columns! TODO: New approach will not be wanting</span>
        <span class="c1">#to do this (maybe check that all columns are in options?)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">GeoDataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span>
                                    <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span>
                                    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">])</span>
        <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;name&#39;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="o">**</span><span class="n">options</span><span class="p">)</span>

        <span class="c1"># Set new table. Unfortunately, this creates a new instance. Can just direct append</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">kind</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">table</span><span class="p">,</span> <span class="n">df</span><span class="p">],</span>
                                      <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                      <span class="n">join</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">,</span>
                                      <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                      <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                      <span class="n">verify_integrity</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                      <span class="n">copy</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGeometryTables.check_lengths">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.check_lengths">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_lengths</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">geometry</span><span class="p">:</span> <span class="n">shapely</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">BaseGeometry</span><span class="p">,</span>
                      <span class="n">kind</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">component_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">other_options</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;If user wants to fillet, check the line-segments to see if it is too</span>
<span class="sd">        short for fillet.</span>

<span class="sd">        Args:</span>
<span class="sd">            geometry (shapely.geometry.base.BaseGeometry): The LineString to investigate.</span>
<span class="sd">            kind (str): Name of table, i.e. &#39;path&#39;, &#39;poly&#39;, &#39;junction, etc</span>
<span class="sd">            component_name (str): Is an integer id.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="s1">&#39;fillet&#39;</span> <span class="ow">in</span> <span class="n">other_options</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

            <span class="n">fillet</span> <span class="o">=</span> <span class="n">other_options</span><span class="p">[</span><span class="s1">&#39;fillet&#39;</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">geom</span> <span class="ow">in</span> <span class="n">geometry</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="n">shapely</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">LineString</span><span class="p">):</span>
                    <span class="n">coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">geom</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
                    <span class="n">qdesign_precision</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">template_options</span><span class="o">.</span><span class="n">PRECISION</span>
                    <span class="n">range_vertex_of_short_segments</span> <span class="o">=</span> <span class="n">get_range_of_vertex_to_not_fillet</span><span class="p">(</span>
                        <span class="n">coords</span><span class="p">,</span> <span class="n">fillet</span><span class="p">,</span> <span class="n">qdesign_precision</span><span class="p">,</span> <span class="n">add_endpoints</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">range_vertex_of_short_segments</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">range_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">range_vertex_of_short_segments</span><span class="p">:</span>

                            <span class="n">range_string</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;(</span><span class="si">{</span><span class="w"> </span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">) &#39;</span>
                        <span class="n">text_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_components</span><span class="p">[</span><span class="n">component_name</span><span class="p">]</span><span class="o">.</span><span class="n">_name</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s1">&#39;For </span><span class="si">{</span><span class="n">kind</span><span class="si">}</span><span class="s1"> table, component=</span><span class="si">{</span><span class="n">text_id</span><span class="si">}</span><span class="s1">, key=</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s1">&#39;</span>
                            <span class="sa">f</span><span class="s1">&#39; has short segments that could cause issues with fillet. Values in </span><span class="si">{</span><span class="n">range_string</span><span class="si">}</span><span class="s1"> &#39;</span>
                            <span class="sa">f</span><span class="s1">&#39;are index(es) in shapely geometry.&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGeometryTables.parse_value">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.parse_value">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Same as design.parse_value. See design for help.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Parsed value of input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGeometryTables.clear_all_tables">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.clear_all_tables">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">clear_all_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear all the internal tables and all else.</span>

<span class="sd">        Use when clearing a design and starting from scratch.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_tables</span><span class="p">()</span>  <span class="c1"># remake all tables</span></div>


<div class="viewcode-block" id="QGeometryTables.delete_component">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.delete_component">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">delete_component</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete component by name.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): Name of component (case sensitive)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: Add unit test</span>
        <span class="c1"># TODO: is this the best way to do this, or is there a faster way?</span>
        <span class="n">a_comp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">a_comp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">table_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">:</span>
                <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;component&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">a_comp</span><span class="o">.</span><span class="n">id</span><span class="p">]</span></div>


<div class="viewcode-block" id="QGeometryTables.delete_component_id">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.delete_component_id">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">delete_component_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Drop the components within the qgeometry.tables.</span>

<span class="sd">        Args:</span>
<span class="sd">            component_id (int): Unique number to describe the component.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">table_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">:</span>
            <span class="n">df_table_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span>
            <span class="c1"># self.tables[table_name] = df_table_name.drop(df_table_name[df_table_name[&#39;component&#39;] == component_id].index)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_table_name</span><span class="p">[</span><span class="n">df_table_name</span><span class="p">[</span><span class="s1">&#39;component&#39;</span><span class="p">]</span>
                                                    <span class="o">!=</span> <span class="n">component_id</span><span class="p">]</span></div>


<div class="viewcode-block" id="QGeometryTables.get_component">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.get_component">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_component</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">GeoDataFrame</span><span class="p">,</span> <span class="n">Dict_</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">GeoDataFrame</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the table for just a given component. If all, returns a</span>
<span class="sd">        dictionary with keys as table names and tables of components as values.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): Name of component (case sensitive).  Defaults to &#39;all&#39;.</span>
<span class="sd">            table_name (str): Element table name (&#39;poly&#39;, &#39;path&#39;, etc.).  Defaults to {&#39;all&#39;}.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Union[GeoDataFrame, Dict_[str, GeoDataFrame]]: Either a GeoDataFrame or a dict or GeoDataFrame.</span>

<span class="sd">        Example usage:</span>
<span class="sd">            ```table = pd.concat(qgeometry.get_component(&#39;Q1&#39;)) # , axis=0```</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">table_name</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="n">tables</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">table_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_types</span><span class="p">():</span>
                <span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">table_name</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">tables</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span>
            <span class="n">a_comp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">a_comp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Component not found.</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">component</span> <span class="o">==</span> <span class="n">a_comp</span><span class="o">.</span><span class="n">id</span><span class="p">]</span></div>


            <span class="c1"># comp_id = self.design.components[name].id</span>
            <span class="c1"># return df[df.component == comp_id]</span>

<div class="viewcode-block" id="QGeometryTables.get_component_bounds">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.get_component_bounds">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_component_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a tuple containing minx, miny, maxx, maxy values for the</span>
<span class="sd">        bounds of the component as a whole.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): Component name</span>

<span class="sd">        Returns:</span>
<span class="sd">            Geometry: Bare element geometry</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">gs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_component_geometry</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>  <span class="c1"># Pandas GeoSeries</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">gs</span><span class="o">.</span><span class="n">total_bounds</span></div>


<div class="viewcode-block" id="QGeometryTables.rename_component">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.rename_component">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">rename_component</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">new_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Rename component by ID (integer) cast to string format.</span>

<span class="sd">        Args:</span>
<span class="sd">            component_id (int) : ID of component (case sensitive)</span>
<span class="sd">            new_name (str) : The new name of the component (case sensitive)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># comp_id = self.design.components[name].id</span>
        <span class="n">component_int_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">component_id</span><span class="p">)</span>
        <span class="n">a_comp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_components</span><span class="p">[</span><span class="n">component_int_id</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">a_comp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># TODO: is this the best way to do this, or is there a faster way?</span>
            <span class="k">for</span> <span class="n">table_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">:</span>
                <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span>
                <span class="n">table</span><span class="o">.</span><span class="n">component</span><span class="p">[</span><span class="n">table</span><span class="o">.</span><span class="n">component</span> <span class="o">==</span> <span class="n">a_comp</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_name</span></div>


<div class="viewcode-block" id="QGeometryTables.get_component_geometry_list">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.get_component_geometry_list">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_component_geometry_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                    <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span>
                                   <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">BaseGeometry</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return just the bare element geometry (shapely geometry objects) as</span>
<span class="sd">        a list, for the selected component.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str) : Name of component (case sensitive)</span>
<span class="sd">            table_name (str) : Element type (&#39;poly&#39;, &#39;path&#39;, etc.).</span>
<span class="sd">                               Can also be &#39;all&#39; to return all. This is the default.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: List of shapley.geometry objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">table_name</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="n">qgeometry</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_types</span><span class="p">():</span>
                <span class="n">qgeometry</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_component_geometry_list</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">table</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span>
            <span class="n">comp_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
            <span class="n">qgeometry</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">geometry</span><span class="p">[</span><span class="n">table</span><span class="o">.</span><span class="n">component</span> <span class="o">==</span> <span class="n">comp_id</span><span class="p">]</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">qgeometry</span></div>


<div class="viewcode-block" id="QGeometryTables.get_component_geometry">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.get_component_geometry">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_component_geometry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GeoSeries</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns geometry of a given component.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str) : Name of component (case sensitive)</span>

<span class="sd">        Returns:</span>
<span class="sd">            GeoSeries : Geometry of the component</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">comp_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
        <span class="n">qgeometry</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">table_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_types</span><span class="p">():</span>
            <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span>
            <span class="n">qgeometry</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">geometry</span><span class="p">[</span><span class="n">table</span><span class="o">.</span><span class="n">component</span> <span class="o">==</span> <span class="n">comp_id</span><span class="p">]</span>
        <span class="n">qgeometry</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">qgeometry</span><span class="p">)</span>

        <span class="c1"># when concatenating empty GeoSeries, returns Series (ugly fix)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">qgeometry</span><span class="p">,</span> <span class="n">GeoSeries</span><span class="p">):</span>
            <span class="n">qgeometry</span> <span class="o">=</span> <span class="n">GeoSeries</span><span class="p">(</span><span class="n">qgeometry</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">qgeometry</span></div>


<div class="viewcode-block" id="QGeometryTables.get_component_geometry_dict">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.get_component_geometry_dict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_component_geometry_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                    <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span>
                                   <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">BaseGeometry</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return just the bare element geometry (shapely geometry objects) as</span>
<span class="sd">        a dict, with key being the names of the qgeometry and the values as the</span>
<span class="sd">        shapely geometry, for the selected component.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str) : Name of component (case sensitive)</span>
<span class="sd">            table_name (str) : Element type (&#39;poly&#39;, &#39;path&#39;, etc.). Defaults to &#39;all&#39;.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Bare element geometry</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">table_name</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="n">qgeometry</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_types</span><span class="p">():</span>
                <span class="n">qgeometry</span><span class="p">[</span><span class="n">table</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_component_geometry_list</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">table</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">qgeometry</span>  <span class="c1"># return pd.concat(qgeometry, axis=0)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span>

            <span class="c1"># mask the rows nad get only 2 columns</span>
            <span class="n">comp_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
            <span class="n">df_comp_id</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">table</span><span class="o">.</span><span class="n">component</span> <span class="o">==</span> <span class="n">comp_id</span><span class="p">,</span>
                                   <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;geometry&#39;</span><span class="p">]]</span>
            <span class="n">df_geometry</span> <span class="o">=</span> <span class="n">df_comp_id</span><span class="o">.</span><span class="n">geometry</span>
            <span class="n">df_geometry</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">df_comp_id</span><span class="o">.</span><span class="n">name</span>
            <span class="k">return</span> <span class="n">df_geometry</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span></div>


<div class="viewcode-block" id="QGeometryTables.check_element_type">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.check_element_type">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_element_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                           <span class="n">log_issue</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the name `table_name` is in the element tables.</span>

<span class="sd">        Args:</span>
<span class="sd">            table_name (str): Element type (&#39;poly&#39;, &#39;path&#39;, etc.) or &#39;all&#39;</span>
<span class="sd">            log_issue (bool): Throw an error in the log if name missing.  Defaults to True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the name is valid, else False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">table_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_element_types</span><span class="p">()</span> <span class="ow">or</span> <span class="n">table_name</span> <span class="ow">in</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">log_issue</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;Element Tables: Tried to access non-existing element table: `</span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s1">`&#39;</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="QGeometryTables.get_all_unique_layers_for_all_tables">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.get_all_unique_layers_for_all_tables">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_unique_layers_for_all_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                             <span class="n">qcomp_ids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                                            <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of all unique layer number used in all of the geometry tables.</span>
<span class="sd">        User can get for all components or a subset.</span>

<span class="sd">        Args:</span>
<span class="sd">            qcomp_ids (Union[list, None], optional): The list has integers</span>
<span class="sd">                                        which denote component_id. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: The unique layer numbers for the list of component ids passed in argument.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">qcomp_ids</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">qcomp_ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">frames</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">unique_layers</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">qcomp_ids</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># use all components</span>
            <span class="n">frames</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">a_df</span><span class="p">]</span> <span class="k">for</span> <span class="n">a_df</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Use just the component ID&#39;s in qcomp_ids.</span>
            <span class="k">for</span> <span class="n">table_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">:</span>
                <span class="n">temp_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_key</span><span class="p">]</span>
                <span class="n">mask_temp</span> <span class="o">=</span> <span class="n">temp_df</span><span class="p">[</span><span class="s1">&#39;component&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">qcomp_ids</span><span class="p">)</span>
                <span class="n">subset_temp_df</span> <span class="o">=</span> <span class="n">temp_df</span><span class="p">[</span><span class="n">mask_temp</span><span class="p">]</span>
                <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">subset_temp_df</span><span class="p">)</span>

        <span class="c1">#Concat the frames and then determine the unique layer numbers.</span>
        <span class="n">unique_layers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">frames</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="s1">&#39;layer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">unique_layers</span></div>


<div class="viewcode-block" id="QGeometryTables.get_all_unique_layers">
<a class="viewcode-back" href="../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html#qiskit_metal.qgeometries.QGeometryTables.get_all_unique_layers">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_unique_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chip_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a lit of unique layers for the given chip names.</span>

<span class="sd">        Args:</span>
<span class="sd">            chip_name (str): Name of the chip</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: List of unique layers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">unique_layers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">table_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">qgeometry</span><span class="o">.</span><span class="n">get_element_types</span><span class="p">():</span>
            <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">qgeometry</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="n">table</span><span class="p">[</span><span class="s1">&#39;chip&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">chip_name</span><span class="p">]</span>
            <span class="n">layers</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="s1">&#39;layer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="n">unique_layers</span> <span class="o">+=</span> <span class="n">layers</span>
        <span class="n">unique_layers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">unique_layers</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">unique_layers</span></div>
</div>

</pre></div>
        </article>
      </div>
      <footer>
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; Quantum Metal Community; 2019-2025 Qiskit Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 2025/12/07</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../../_static/documentation_options.js?v=1dd76d02"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/qiskit-sphinx-theme.js?v=4d77b8ca"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>