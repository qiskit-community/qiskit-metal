<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../../genindex.html" /><link rel="search" title="Search" href="../../../../search.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>qiskit_metal.renderers.renderer_gmsh.gmsh_renderer - Quantum Metal 0.5.2.post4</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/qiskit-sphinx-theme.css?v=8ff9dcb6" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet"></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M14 2H2C1.73478 2 1.48043 2.10536 1.29289 2.29289C1.10536 2.48043 1 2.73478 1 3V13C1 13.2652 1.10536 13.5196 1.29289 13.7071C1.48043 13.8946 1.73478 14 2 14H14C14.2652 14 14.5196 13.8946 14.7071 13.7071C14.8946 13.5196 15 13.2652 15 13V3C15 2.73478 14.8946 2.48043 14.7071 2.29289C14.5196 2.10536 14.2652 2 14 2V2ZM2 3H10V13H2V3ZM14 13H11V3H14V13Z" fill="currentColor"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M14 3H2V4H14V3Z" fill="currentColor"/>
      <path d="M14 12H2V13H14V12Z" fill="currentColor"/>
      <path d="M14 6H2V7H14V6Z" fill="currentColor"/>
      <path d="M14 9H2V10H14V9Z" fill="currentColor"/>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M11 8L6.00005 13L5.30005 12.3L9.60005 8L5.30005 3.7L6.00005 3L11 8Z" fill="currentColor"/>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M15 13H1V14H15V13Z" fill="currentColor"/>
      <path d="M12.7 4.5C13.1 4.1 13.1 3.5 12.7 3.1L10.9 1.3C10.5 0.9 9.9 0.9 9.5 1.3L2 8.8V12H5.2L12.7 4.5ZM10.2 2L12 3.8L10.5 5.3L8.7 3.5L10.2 2ZM3 11V9.2L8 4.2L9.8 6L4.8 11H3Z" fill="currentColor"/>
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M11 13.0002C11.5523 13.0002 12 12.5525 12 12.0002C12 11.4479 11.5523 11.0002 11 11.0002C10.4477 11.0002 10 11.4479 10 12.0002C10 12.5525 10.4477 13.0002 11 13.0002Z" fill="currentColor"/>
      <path d="M14.8884 11.7394C14.5795 10.9524 14.0464 10.2734 13.3552 9.78646C12.664 9.29954 11.8451 9.02615 11 9.00017C10.1549 9.02615 9.33604 9.29954 8.64484 9.78646C7.95365 10.2734 7.42052 10.9524 7.11155 11.7394L7 12.0002L7.11155 12.2609C7.42052 13.0479 7.95365 13.727 8.64484 14.2139C9.33604 14.7008 10.1549 14.9742 11 15.0002C11.8451 14.9742 12.664 14.7008 13.3552 14.2139C14.0464 13.727 14.5795 13.0479 14.8884 12.2609L15 12.0002L14.8884 11.7394ZM11 14.0002C10.6044 14.0002 10.2178 13.8829 9.88886 13.6631C9.55996 13.4433 9.30362 13.131 9.15224 12.7655C9.00087 12.4001 8.96126 11.998 9.03843 11.61C9.1156 11.222 9.30608 10.8657 9.58579 10.586C9.86549 10.3063 10.2219 10.1158 10.6098 10.0386C10.9978 9.96143 11.3999 10.001 11.7654 10.1524C12.1308 10.3038 12.4432 10.5601 12.6629 10.889C12.8827 11.2179 13 11.6046 13 12.0002C12.9994 12.5304 12.7885 13.0388 12.4136 13.4137C12.0386 13.7887 11.5303 13.9996 11 14.0002Z" fill="currentColor"/>
      <path d="M6 14.0002H4V2.00017H8V5.00017C8.00077 5.26515 8.10637 5.51906 8.29374 5.70643C8.48111 5.8938 8.73502 5.99941 9 6.00017H12V8.00017H13V5.00017C13.0018 4.93446 12.9893 4.86913 12.9634 4.80871C12.9375 4.74828 12.8988 4.6942 12.85 4.65017L9.35 1.15017C9.30599 1.10134 9.2519 1.06263 9.19147 1.03674C9.13104 1.01084 9.06572 0.998364 9 1.00017H4C3.73502 1.00094 3.48111 1.10654 3.29374 1.29391C3.10637 1.48128 3.00077 1.73519 3 2.00017V14.0002C3.00077 14.2652 3.10637 14.5191 3.29374 14.7064C3.48111 14.8938 3.73502 14.9994 4 15.0002H6V14.0002ZM9 2.20017L11.8 5.00017H9V2.20017Z" fill="currentColor"/>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../../index.html"><div class="brand">Quantum Metal 0.5.2.post4</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../../index.html">
  
  
  <span class="sidebar-brand-text">Quantum Metal 0.5.2.post4</span>
  
</a>
<form class="sidebar-search-container" method="get" action="../../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../index.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Installing Qiskit Metal</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../workflow.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../workflow.html#qiskit-metal-workflow">Qiskit Metal Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../workflow.html#quantization-methods-overview">Quantization Methods Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributor-guide.html">Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../videoseducation.html">Videos &amp; Education</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../tut/index.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/1-Overview/1.1-Bird%27s-eye-view-of-Qiskit-Metal.html">Bird’s eye view of Qiskit Metal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/1-Overview/1.2-Quick-start.html">Quick Start: Build your first 4-qubit processor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/1-Overview/1.3-Saving-Your-Chip-Design.html">Save your chip design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html">How to use a QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html#QComponent-Default-Options">QComponent Default Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html#Modifying-the-Options">Modifying the Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html#Copying-a-QComponent">Copying a QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html#Deleting-a-QComponent">Deleting a QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html#Renaming-a-QComponent">Renaming a QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html#Overwriting-a-QComponent">Overwriting a QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html#Closing-the-Qiskit-Metal-GUI">Closing the Qiskit Metal GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.02-How-to-copy-a-QComponent.html">How to copy a QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.11-Routing-101.html">Routing 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.12-Simple-Meander.html">Simple Meander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.12-Simple-Meander.html#Using-CPW-meanders-to-connect-the-3-Qbits">Using CPW meanders to connect the 3 Qbits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.13-Hybrid-Auto-and-AStar.html">Hybrid Auto and AStar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.14-Get-them-all-with-MixedRoute.html">Get them all with MixedRoute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.21-Design-a-4-qubit-full-chip.html">Design a 4 qubit full chip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.22-Design-100-qubits-programmatically.html">Design 100 qubits programmatically</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.23-Modify-chip-options.html">Modify chip options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.31-Create-a-QComponent-Basic.html">Create a QComponent - Basic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.32-Create-a-QComponent-Advanced.html">Create a QComponent - Advanced</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.33-Add-my-QComponent-to-a-reusable-python-file.html">Add my QComponent to a reusable python file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/3-Renderers/3.1-Introduction-to-QRenderers.html">Introduction to QRenderers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/3-Renderers/3.1-Introduction-to-QRenderers.html#Note:">Note:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/3-Renderers/3.2-Export-your-design-to-GDS.html">Export your design to GDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/3-Renderers/3.3-Render-your-design-to-Ansys.html">Render your design to Ansys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/3-Renderers/3.4-How-do-I-make-my-custom-QRenderer.html">How do I make my custom QRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.01-Capacitance-and-LOM.html">Capacitance matrix and LOM analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.02-Eigenmode-and-EPR.html">Eigenmode and EPR analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.03-Impedance.html">Impedance, admittance and scattering analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.11-Analyze-and-tune-a-transmon.html">Analyzing and tuning a transmon qubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.11-Analyze-and-tune-a-transmon.html#1.-Create-the-Qbit-design">1. Create the Qbit design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.12-Analyze-a-resonator.html">Analyzing and tuning a resonator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.13-Analyze-transmon-and-resonator.html">Analyzing and tuning a transmon qubit with a resonator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.14-Analyze-a-double-hanger-resonator.html">Analyzing a double hanger resonator (S Param)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.15-CPW-kappa-calculation.html">CPW Kappa Calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.21-Capacitance-matrix.html">Sweeps - Capacitance matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.21-Capacitance-matrix.html#READ-THIS-BEFORE-running-the-cell.">READ THIS BEFORE running the cell.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.22-Eigenmode-matrix.html">Sweeps - Eigenmode matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.23-Impedance-and-scattering-Z-S-Y-matrices.html">Sweeps - Impedance, scattering and admittance (Z S Y) matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.31-Plot-quantum-oscillator-wavefunction.html">Plotting Wavefunctions of the Quantum Harmonic Oscillator (LC Circuit)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.32-Transmon-analytics-HCPB.html">Transmon Analytics: Plotting Eigenvalues as a Function of Offset Charge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.33-Transmon-analytics.html">Transmon Analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.34-Transmon-qubit-CPB-hamiltonian-charge-basis.html">Modeling transmon qubit Cooper-pair box Hamiltonian in the charge basis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/quick-topics/JJ-Demo-Notebook.html">Josephson Junction QComponent Demo Notebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/quick-topics/Managing-pins.html">Managing pins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/quick-topics/Managing-variables.html">Managing variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/quick-topics/Opening-documentation.html">Opening the documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/quick-topics/QComponent-3-fingers-capacitor.html">QComponent - 3-fingers capacitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/quick-topics/QComponent-Interdigitated-transmon.html">QComponent - Interdigitated transmon qubit</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../circuit-examples/index.html">Example Designs</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Example Designs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/01-Transmon_cross.html">Single Transmon - Grounded (xmon)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/02-Transmon_floating.html">Single Transmon - Floating</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/03-concentric_transmon.html">Concentric Transmon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/04-Interdigitated_Transmon.html">Interdigitated Transmon Qubits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/05-Transmon_cross_fl.html">Single Transmon - Grounded (xmon) flux lines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/06-Transmon_floating_6.html">Single Transmon - Floating with 6 connection pads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/07-Transmon_floating_cl.html">Single Transmon - Floating with charge lines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/08-JJ-Dolan.html">Josephson Junction (Dolan)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/09-JJ-Manhattan.html">Josephson Junction (Manhattan)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/10-Transmon_floating_teeth.html">Single Transmon - Floating with teeth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/11-Star_shaped_qubit.html">Star shaped qubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/11-Star_shaped_qubit.html#A-Star-Qubit">A Star Qubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/11-Star_shaped_qubit.html#Closing-the-Qiskit-Metal-GUI">Closing the Qiskit Metal GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/B.Resonators/11-Resonator_Meander.html">Simple CPW Meander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/C.Composite-bi-partite/21-OneTransmonsWithMeanderAndOTG.html">Transmon coupled to CPW resonator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/D.Qubit-couplers/31-TwoCrossmonsTunableCoupler.html">Tunable Coupler (MIT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/D.Qubit-couplers/32-TwoTransmonsDirectCoupling.html">Direct Coupler (transmon-transmon)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/D.Qubit-couplers/33-TwoTransmonsWithMeander.html">Bus Resonator Coupler (transmon-transmon)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/E.Input-output-coupling/41-LaunchPad.html">CPW Launch Pad</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/E.Input-output-coupling/42-ResonatorAndLaunchPad.html">Readout line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/E.Input-output-coupling/43-TransmonPocketCL.html">Charge Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/F.Small-quantum-chips/51-Four_qubit_chip.html">Four Qubit Chip Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/full-design-flow-examples/Example-full-chip-design.html">Example full chip design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/full-design-flow-examples/Example-used-in-the-launch-video.html">Launch Videos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/full-design-flow-examples/Exercise-for-the-South-Korea-Hackathon%2720.html">South Korea Qiskit Hackathon’20 - Qiskit Metal exercise</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Libraries</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/qlibrary.html">All Quantum Devices</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of All Quantum Devices</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.QComponent.html">QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ParsedDynamicAttributes_Component.html">ParsedDynamicAttributes_Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.BaseQubit.html">BaseQubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.QRoute.html">QRoute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.QRouteLead.html">QRouteLead</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.QRoutePoint.html">QRoutePoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CircleCaterpillar.html">CircleCaterpillar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CircleRaster.html">CircleRaster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.NGon.html">NGon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.NSquareSpiral.html">NSquareSpiral</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.Rectangle.html">Rectangle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RectangleHollow.html">RectangleHollow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.Cap3Interdigital.html">Cap3Interdigital</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CapNInterdigital.html">CapNInterdigital</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ResonatorCoilRect.html">ResonatorCoilRect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CoupledLineTee.html">CoupledLineTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LineTee.html">LineTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CapNInterdigitalTee.html">CapNInterdigitalTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TunableCoupler01.html">TunableCoupler01</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TunableCoupler02.html">TunableCoupler02</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ReadoutResFC.html">ReadoutResFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ResonatorLumped.html">ResonatorLumped</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebond.html">LaunchpadWirebond</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebondCoupled.html">LaunchpadWirebondCoupled</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebondDriven.html">LaunchpadWirebondDriven</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.OpenToGround.html">OpenToGround</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ShortToGround.html">ShortToGround</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteStraight.html">RouteStraight</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteFramed.html">RouteFramed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteMeander.html">RouteMeander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteAnchors.html">RouteAnchors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteMixed.html">RouteMixed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RoutePathfinder.html">RoutePathfinder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.jj_dolan.html">jj_dolan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.jj_manhattan.html">jj_manhattan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonConcentric.html">TransmonConcentric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonConcentricType2.html">TransmonConcentricType2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonCross.html">TransmonCross</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonCrossFL.html">TransmonCrossFL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonInterdigitated.html">TransmonInterdigitated</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocket.html">TransmonPocket</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocketCL.html">TransmonPocketCL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocket6.html">TransmonPocket6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocketTeeth.html">TransmonPocketTeeth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TunableCoupler01.html">TunableCoupler01</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.SQUID_LOOP.html">SQUID_LOOP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.StarQubit.html">StarQubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.anchored_path.html">anchored_path</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../overview.html">Overview</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/designs.html">QDesigns</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of QDesigns</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.designs.QDesign.html">QDesign</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.designs.DesignPlanar.html">DesignPlanar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.designs.MultiPlanar.html">MultiPlanar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.designs.DesignFlipChip.html">DesignFlipChip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.designs.QNet.html">QNet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.designs.Components.html">Components</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/qlibrary.html">QComponents</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of QComponents</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.QComponent.html">QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ParsedDynamicAttributes_Component.html">ParsedDynamicAttributes_Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.BaseQubit.html">BaseQubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.QRoute.html">QRoute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.QRouteLead.html">QRouteLead</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.QRoutePoint.html">QRoutePoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CircleCaterpillar.html">CircleCaterpillar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CircleRaster.html">CircleRaster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.NGon.html">NGon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.NSquareSpiral.html">NSquareSpiral</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.Rectangle.html">Rectangle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RectangleHollow.html">RectangleHollow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.Cap3Interdigital.html">Cap3Interdigital</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CapNInterdigital.html">CapNInterdigital</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ResonatorCoilRect.html">ResonatorCoilRect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CoupledLineTee.html">CoupledLineTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LineTee.html">LineTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CapNInterdigitalTee.html">CapNInterdigitalTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TunableCoupler01.html">TunableCoupler01</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TunableCoupler02.html">TunableCoupler02</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ReadoutResFC.html">ReadoutResFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ResonatorLumped.html">ResonatorLumped</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebond.html">LaunchpadWirebond</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebondCoupled.html">LaunchpadWirebondCoupled</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebondDriven.html">LaunchpadWirebondDriven</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.OpenToGround.html">OpenToGround</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ShortToGround.html">ShortToGround</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteStraight.html">RouteStraight</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteFramed.html">RouteFramed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteMeander.html">RouteMeander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteAnchors.html">RouteAnchors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteMixed.html">RouteMixed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RoutePathfinder.html">RoutePathfinder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.jj_dolan.html">jj_dolan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.jj_manhattan.html">jj_manhattan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonConcentric.html">TransmonConcentric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonConcentricType2.html">TransmonConcentricType2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonCross.html">TransmonCross</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonCrossFL.html">TransmonCrossFL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonInterdigitated.html">TransmonInterdigitated</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocket.html">TransmonPocket</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocketCL.html">TransmonPocketCL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocket6.html">TransmonPocket6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocketTeeth.html">TransmonPocketTeeth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TunableCoupler01.html">TunableCoupler01</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.SQUID_LOOP.html">SQUID_LOOP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.StarQubit.html">StarQubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.anchored_path.html">anchored_path</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/analyses.html">Analyses</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Analyses</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.QAnalysis.html">QAnalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.QSimulation.html">QSimulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.Hcpb.html">Hcpb</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.Hcpb_analytic.html">Hcpb_analytic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.HO_wavefunctions.html">HO_wavefunctions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.transmon_analytics.html">transmon_analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.cpw_calculations.html">cpw_calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.kappa_calculation.html">kappa_calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.Sweeper.html">Sweeper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.LOManalysis.html">LOManalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.EPRanalysis.html">EPRanalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.lumped_capacitive.html">lumped_capacitive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.LumpedElementsSim.html">LumpedElementsSim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.EigenmodeSim.html">EigenmodeSim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.ScatteringImpedanceSim.html">ScatteringImpedanceSim</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/renderers.html">QRenderes</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of QRenderes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.QRenderer.html">QRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.QRendererGui.html">QRendererGui</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.QRendererAnalysis.html">QRendererAnalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.PlotCanvas.html">PlotCanvas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.MplInteraction.html">MplInteraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.ZoomOnWheel.html">ZoomOnWheel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.PanAndZoom.html">PanAndZoom</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.QMplRenderer.html">QMplRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.AnimatedText.html">AnimatedText</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.QGDSRenderer.html">QGDSRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.Cheesing.html">Cheesing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.QAnsysRenderer.html">QAnsysRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.QHFSSRenderer.html">QHFSSRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.QQ3DRenderer.html">QQ3DRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.QPyaedt.html">QPyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.QQ3DPyaedt.html">QQ3DPyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.QHFSSPyaedt.html">QHFSSPyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.QHFSSDrivenmodalPyaedt.html">QHFSSDrivenmodalPyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.QHFSSEigenmodePyaedt.html">QHFSSEigenmodePyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html">QGmshRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.renderers.Vec3DArray.html">Vec3DArray</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/toolbox_metal.html">Toolbox</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Toolbox</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.toolbox_metal.QiskitMetalExceptions.html">QiskitMetalExceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.toolbox_metal.QiskitMetalDesignError.html">QiskitMetalDesignError</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.toolbox_metal.about.html">about</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.toolbox_metal.import_export.html">import_export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.toolbox_metal.math_and_overrides.html">math_and_overrides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.toolbox_metal.parsing.html">parsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.toolbox_metal.layer_stack_handler.html">layer_stack_handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.toolbox_metal.bounds_for_path_and_poly_tables.html">bounds_for_path_and_poly_tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.toolbox_metal.determine_larger_box.html">determine_larger_box</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/qgeometries.html">QGeometry</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of QGeometry</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qgeometries.QGeometryTables.html">QGeometryTables</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/gui.html">GUI</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of GUI</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal._gui.MetalGUI.html">MetalGUI</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Qiskit/qiskit/blob/master/CODE_OF_CONDUCT.md">Code of Conduct</a></li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <h1>Source code for qiskit_metal.renderers.renderer_gmsh.gmsh_renderer</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Union</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">defaultdict</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">gmsh</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">qiskit_metal.renderers.renderer_base</span><span class="w"> </span><span class="kn">import</span> <span class="n">QRenderer</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">.gmsh_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">Vec3D</span><span class="p">,</span> <span class="n">Vec3DArray</span><span class="p">,</span> <span class="n">line_width_offset_pts</span><span class="p">,</span> <span class="n">render_path_curves</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qiskit_metal.toolbox_metal.bounds_for_path_and_poly_tables</span><span class="w"> </span><span class="kn">import</span> <span class="n">BoundsForPathAndPolyTables</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qiskit_metal.toolbox_metal.parsing</span><span class="w"> </span><span class="kn">import</span> <span class="n">parse_value</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">qiskit_metal</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">qiskit_metal</span><span class="w"> </span><span class="kn">import</span> <span class="n">config</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">is_building_docs</span><span class="p">():</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">qiskit_metal.toolbox_python.utility_functions</span><span class="w"> </span><span class="kn">import</span> <span class="n">clean_name</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">qiskit_metal.toolbox_python.utility_functions</span><span class="w"> </span><span class="kn">import</span> <span class="n">bad_fillet_idxs</span>


<div class="viewcode-block" id="QGmshRenderer">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">QGmshRenderer</span><span class="p">(</span><span class="n">QRenderer</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extends QRendererAnalysis class to export designs to Gmsh using the Gmsh python API.</span>

<span class="sd">    Default Options:</span>
<span class="sd">        * x_buffer_width_mm -- Buffer between max/min x and edge of ground plane, in mm</span>
<span class="sd">        * y_buffer_width_mm -- Buffer between max/min y and edge of ground plane, in mm</span>
<span class="sd">        * mesh -- to define meshing parameters</span>
<span class="sd">            * max_size -- upper bound for the size of mesh node</span>
<span class="sd">            * min_size -- lower bound for the size of mesh node</span>
<span class="sd">            * max_size_jj -- maximum size of mesh nodes at jj</span>
<span class="sd">            * smoothing -- mesh smoothing value</span>
<span class="sd">            * nodes_per_2pi_curve -- number of nodes for every 2π radians of curvature</span>
<span class="sd">            * algorithm_3d -- value to indicate meshing algorithm used by Gmsh</span>
<span class="sd">            * num_threads -- number of threads for parallel meshing</span>
<span class="sd">            * mesh_size_fields -- specify mesh size field parameters</span>
<span class="sd">                * min_distance_from_edges -- min distance for mesh gradient generation</span>
<span class="sd">                * max_distance_from_edges -- max distance for mesh gradient generation</span>
<span class="sd">                * distance_delta -- delta change in distance with each consecutive step</span>
<span class="sd">                * gradient_delta -- delta change in gradient with each consecutive step</span>
<span class="sd">        * colors -- specify colors for the mesh elements, chips or layers</span>
<span class="sd">            * metal -- color for metallized entities</span>
<span class="sd">            * jj -- color for JJs</span>
<span class="sd">            * dielectric -- color for dielectric entity</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">default_options</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span>
        <span class="n">x_buffer_width_mm</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
        <span class="n">y_buffer_width_mm</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
        <span class="n">mesh</span><span class="o">=</span><span class="n">Dict</span><span class="p">(</span>
            <span class="n">max_size</span><span class="o">=</span><span class="s2">&quot;70um&quot;</span><span class="p">,</span>
            <span class="n">min_size</span><span class="o">=</span><span class="s2">&quot;5um&quot;</span><span class="p">,</span>
            <span class="n">max_size_jj</span><span class="o">=</span><span class="s2">&quot;5um&quot;</span><span class="p">,</span>
            <span class="n">smoothing</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">nodes_per_2pi_curve</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span>
            <span class="n">algorithm_3d</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">num_threads</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
            <span class="n">mesh_size_fields</span><span class="o">=</span><span class="n">Dict</span><span class="p">(</span><span class="n">min_distance_from_edges</span><span class="o">=</span><span class="s2">&quot;10um&quot;</span><span class="p">,</span>
                                  <span class="n">max_distance_from_edges</span><span class="o">=</span><span class="s2">&quot;130um&quot;</span><span class="p">,</span>
                                  <span class="n">distance_delta</span><span class="o">=</span><span class="s2">&quot;30um&quot;</span><span class="p">,</span>
                                  <span class="n">gradient_delta</span><span class="o">=</span><span class="s2">&quot;3um&quot;</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">Dict</span><span class="p">(</span>
            <span class="n">metal</span><span class="o">=</span><span class="p">(</span><span class="mi">84</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">168</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span>
            <span class="n">jj</span><span class="o">=</span><span class="p">(</span><span class="mi">84</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">168</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span>
            <span class="n">dielectric</span><span class="o">=</span><span class="p">(</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;gmsh&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Name&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">design</span><span class="p">:</span> <span class="s1">&#39;MultiPlanar&#39;</span><span class="p">,</span>
                 <span class="n">layer_types</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">initiate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            design (&#39;MultiPlanar&#39;): The design.</span>
<span class="sd">            layer_types (Union[dict, None]): the type of layer in the format:</span>
<span class="sd">                                                dict(metal=[...], dielectric=[...]).</span>
<span class="sd">                                                Defaults to None.</span>
<span class="sd">            initiate (bool): True to initiate the renderer (Default: False).</span>
<span class="sd">            options (Dict, optional): Used to override default options. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">design</span><span class="o">=</span><span class="n">design</span><span class="p">,</span>
                         <span class="n">initiate</span><span class="o">=</span><span class="n">initiate</span><span class="p">,</span>
                         <span class="n">render_options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_name</span> <span class="o">=</span> <span class="s2">&quot;gmsh_model&quot;</span>

        <span class="n">default_layer_types</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">metal</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">dielectric</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_types</span> <span class="o">=</span> <span class="n">default_layer_types</span> <span class="k">if</span> <span class="n">layer_types</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">layer_types</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bounds_handler</span> <span class="o">=</span> <span class="n">BoundsForPathAndPolyTables</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">initialized</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns boolean True if initialized successfully.</span>
<span class="sd">        False otherwise.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">isInitialized</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">modeler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns an instance to the Gmsh modeler&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the name of the current model&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getCurrent</span><span class="p">()</span>

    <span class="nd">@model</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the name of the current model. If not already present,</span>
<span class="sd">            adds a new model with the given name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">print_info</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setCurrent</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_model_name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="n">print_info</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">print_info</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Added new model &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; and set as current.&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="QGmshRenderer.remove_current_model">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.remove_current_model">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">remove_current_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes the current Gmsh model&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;No model found in Gmsh to be removed.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.clear_design">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.clear_design">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">clear_design</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clears the design in the current Gmsh model&quot;&quot;&quot;</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_initiate_renderer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes the Gmsh renderer&quot;&quot;&quot;</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_close_renderer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finalizes the Gmsh renderer&quot;&quot;&quot;</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="QGmshRenderer.close">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.close">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Public method to close the Gmsh renderer&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_close_renderer</span><span class="p">()</span></div>


<div class="viewcode-block" id="QGmshRenderer.get_thickness_for_layer_datatype">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.get_thickness_for_layer_datatype">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_thickness_for_layer_datatype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                         <span class="n">layer_num</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                                         <span class="n">datatype</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function to get thickness of a particular layer and datatype</span>
<span class="sd">        from the layer stack.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer_num (int): layer number in the layer stack</span>
<span class="sd">            datatype (int): datatype in the layer stack</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: returns the thickness value</span>
<span class="sd">&quot;&quot;&quot;</span>
        <span class="n">props</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;thickness&quot;</span><span class="p">]</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">ls</span><span class="o">.</span><span class="n">get_properties_for_layer_datatype</span><span class="p">(</span>
                <span class="n">properties</span><span class="o">=</span><span class="n">props</span><span class="p">,</span> <span class="n">layer_number</span><span class="o">=</span><span class="n">layer_num</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">datatype</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># thickness is result[0]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Could not find </span><span class="si">{</span><span class="n">props</span><span class="si">}</span><span class="s2"> for the layer_number=</span><span class="si">{</span><span class="n">layer_num</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="s2">&quot;Check your design and try again.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.get_thickness_zcoord_for_layer_datatype">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.get_thickness_zcoord_for_layer_datatype">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_thickness_zcoord_for_layer_datatype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                                <span class="n">layer_num</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                                                <span class="n">datatype</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
                                               <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function to get the thickness and z_coord of a particular layer</span>
<span class="sd">        and datatype from the layer stack.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer_num (int): layer number in the layer stack</span>
<span class="sd">            datatype (int): datatype in the layer stack</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[float, float]: returns the tuple (thickness, z_coord)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">props</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;thickness&quot;</span><span class="p">,</span> <span class="s2">&quot;z_coord&quot;</span><span class="p">]</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">ls</span><span class="o">.</span><span class="n">get_properties_for_layer_datatype</span><span class="p">(</span>
                <span class="n">properties</span><span class="o">=</span><span class="n">props</span><span class="p">,</span> <span class="n">layer_number</span><span class="o">=</span><span class="n">layer_num</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">datatype</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Could not find </span><span class="si">{</span><span class="n">props</span><span class="si">}</span><span class="s2"> for the layer_number=</span><span class="si">{</span><span class="n">layer_num</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="s2">&quot;Check your design and try again.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.render_design">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.render_design">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render_design</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">selection</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">open_pins</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">box_plus_buffer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">draw_sample_holder</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">skip_junctions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">mesh_geoms</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">ignore_metal_volume</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">omit_ground_for_layers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render the design in Gmsh and apply changes to modify the geometries</span>
<span class="sd">        according to the type of simulation. Simulation parameters provided by the user.</span>

<span class="sd">        Args:</span>
<span class="sd">            selection (Union[list, None], optional): List of selected components</span>
<span class="sd">                                                        to render. Defaults to None.</span>
<span class="sd">            open_pins (Union[list, None], optional): List of open pins to add</span>
<span class="sd">                                                        endcaps. Defaults to None.</span>
<span class="sd">            box_plus_buffer (bool, optional): Set to True for adding buffer to</span>
<span class="sd">                                                        chip dimensions. Defaults to True.</span>
<span class="sd">            draw_sample_holder (bool, optional): To draw the sample holder box. Defaults to True.</span>
<span class="sd">            skip_junctions (bool, optional): Set to True to sip rendering the</span>
<span class="sd">                                                        junctions. Defaults to False.</span>
<span class="sd">            mesh_geoms (bool, optional): Set to True for meshing the geometries.</span>
<span class="sd">                                                        Defaults to True.</span>
<span class="sd">            ignore_metal_volume (bool, optional): ignore the volume of metals and replace</span>
<span class="sd">                                                        it with a list of surfaces instead.</span>
<span class="sd">                                                        Defaults to False.</span>
<span class="sd">            omit_ground_for_layers (Optional[list[int]]): omit rendering the ground plane for</span>
<span class="sd">                                                         specified layers. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># For handling the case when the user wants to use</span>
        <span class="c1"># QGmshRenderer from design.renderers.gmsh instance.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialized</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_initiate_renderer</span><span class="p">()</span>

        <span class="c1"># defaultdict: chip -- geom_tag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>

        <span class="c1"># defaultdict: chip -- set(geom_tag)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_subtract_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>

        <span class="c1"># defaultdict: chip -- dict(geom_name: geom_tag)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">polys_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">paths_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">juncs_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">physical_groups</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">clear_design</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">draw_geometries</span><span class="p">(</span><span class="n">selection</span><span class="o">=</span><span class="n">selection</span><span class="p">,</span>
                             <span class="n">open_pins</span><span class="o">=</span><span class="n">open_pins</span><span class="p">,</span>
                             <span class="n">box_plus_buffer</span><span class="o">=</span><span class="n">box_plus_buffer</span><span class="p">,</span>
                             <span class="n">draw_sample_holder</span><span class="o">=</span><span class="n">draw_sample_holder</span><span class="p">,</span>
                             <span class="n">skip_junctions</span><span class="o">=</span><span class="n">skip_junctions</span><span class="p">,</span>
                             <span class="n">omit_ground_for_layers</span><span class="o">=</span><span class="n">omit_ground_for_layers</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">apply_changes_for_simulation</span><span class="p">(</span>
            <span class="n">ignore_metal_volume</span><span class="o">=</span><span class="n">ignore_metal_volume</span><span class="p">,</span>
            <span class="n">draw_sample_holder</span><span class="o">=</span><span class="n">draw_sample_holder</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">mesh_geoms</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">()</span>  <span class="c1"># generate mesh</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ERROR: Generate Mesh: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.draw_geometries">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.draw_geometries">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw_geometries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">draw_sample_holder</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                        <span class="n">selection</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">open_pins</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">box_plus_buffer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="n">skip_junctions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                        <span class="n">omit_ground_for_layers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function draws the raw geometries in Gmsh as taken from the</span>
<span class="sd">        QGeometry tables and applies thickness depending on the layer-stack.</span>

<span class="sd">        Args:</span>
<span class="sd">            selection (Union[list, None], optional): List of selected components</span>
<span class="sd">                                                        to render. Defaults to None.</span>
<span class="sd">            open_pins (Union[list, None], optional): List of open pins to add</span>
<span class="sd">                                                        endcaps. Defaults to None.</span>
<span class="sd">            box_plus_buffer (bool, optional): Set to True for adding buffer to</span>
<span class="sd">                                                        chip dimensions. Defaults to True.</span>
<span class="sd">            draw_sample_holder (bool): To draw the sample holder box.</span>
<span class="sd">            skip_junctions (bool, optional): Set to True to sip rendering the</span>
<span class="sd">                                                        junctions. Defaults to False.</span>
<span class="sd">            omit_ground_for_layers (Optional[list[int]]): omit rendering the ground plane for</span>
<span class="sd">                                                         specified layers. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">qcomp_ids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_unique_component_ids</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Unable to proceed with rendering. Please check selection.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">render_tables</span><span class="p">(</span><span class="n">skip_junction</span><span class="o">=</span><span class="n">skip_junctions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_endcaps</span><span class="p">(</span><span class="n">open_pins</span><span class="o">=</span><span class="n">open_pins</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">render_layers</span><span class="p">(</span><span class="n">box_plus_buffer</span><span class="o">=</span><span class="n">box_plus_buffer</span><span class="p">,</span>
                           <span class="n">omit_layers</span><span class="o">=</span><span class="n">omit_ground_for_layers</span><span class="p">,</span>
                           <span class="n">draw_sample_holder</span><span class="o">=</span><span class="n">draw_sample_holder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subtract_from_layers</span><span class="p">(</span><span class="n">omit_layers</span><span class="o">=</span><span class="n">omit_ground_for_layers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gmsh_occ_synchronize</span><span class="p">()</span></div>


<div class="viewcode-block" id="QGmshRenderer.apply_changes_for_simulation">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.apply_changes_for_simulation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">apply_changes_for_simulation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore_metal_volume</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                                     <span class="n">draw_sample_holder</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function fragments interfaces to fuse the boundaries and assigns</span>
<span class="sd">        physical groups to be used by an FEM solvers for defining bodies and</span>
<span class="sd">        boundary conditions.</span>

<span class="sd">        Args:</span>
<span class="sd">            ignore_metal_volume (bool, optional): ignore the volume of metals and replace</span>
<span class="sd">                                                        it with a list of surfaces instead.</span>
<span class="sd">            draw_sample_holder (bool): To draw the sample holder box.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: raised when self.layer_types isn&#39;t set to a valid dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">ignore_metal_volume</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_types</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Expected dict for `layer_types`, but found </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_types</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fragment_interfaces</span><span class="p">(</span><span class="n">draw_sample_holder</span><span class="o">=</span><span class="n">draw_sample_holder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gmsh_occ_synchronize</span><span class="p">()</span>

        <span class="c1"># Add physical groups</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_physical_groups</span><span class="p">(</span><span class="n">ignore_metal_volume</span><span class="o">=</span><span class="n">ignore_metal_volume</span><span class="p">,</span>
                                    <span class="n">draw_sample_holder</span><span class="o">=</span><span class="n">draw_sample_holder</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.gmsh_occ_synchronize">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.gmsh_occ_synchronize">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">gmsh_occ_synchronize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Synchronize Gmsh with the internal OpenCascade graphics engine</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">synchronize</span><span class="p">()</span></div>


<div class="viewcode-block" id="QGmshRenderer.render_tables">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.render_tables">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">skip_junction</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render components in design grouped by table type (path, poly, or junction).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">table_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">qgeometry</span><span class="o">.</span><span class="n">get_element_types</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">skip_junction</span> <span class="ow">and</span> <span class="n">table_type</span> <span class="o">==</span> <span class="s2">&quot;junction&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">render_components</span><span class="p">(</span><span class="n">table_type</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.render_components">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.render_components">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render_components</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Render components by breaking them down into individual elements.</span>

<span class="sd">        Args:</span>
<span class="sd">            table_type (str): Table type (poly, path, or junction).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">qgeometry</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_type</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;component&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qcomp_ids</span><span class="p">)</span>
            <span class="n">table</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">qgeom</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">render_element</span><span class="p">(</span><span class="n">qgeom</span><span class="p">,</span> <span class="n">table_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">table_type</span> <span class="o">==</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span>
            <span class="c1"># TODO: how to do auto wirebonds? Active issue: #841</span>
            <span class="c1"># Make a function to render wire bonds manually?</span>
            <span class="k">pass</span></div>


<div class="viewcode-block" id="QGmshRenderer.render_element">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.render_element">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render_element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qgeom</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">table_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render the specified element</span>

<span class="sd">        Args:</span>
<span class="sd">            qgeom (pd.Series): QGeometry element to be rendered</span>
<span class="sd">            table_type (str): Table type (poly, path, or junction).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">table_type</span> <span class="o">==</span> <span class="s2">&quot;junction&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">render_element_junction</span><span class="p">(</span><span class="n">qgeom</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">table_type</span> <span class="o">==</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">render_element_path</span><span class="p">(</span><span class="n">qgeom</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">table_type</span> <span class="o">==</span> <span class="s2">&quot;poly&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">render_element_poly</span><span class="p">(</span><span class="n">qgeom</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;RENDERER ERROR: Unkown element type: </span><span class="si">{</span><span class="n">table_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.make_general_surface">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.make_general_surface">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">make_general_surface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">curves</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a general Gmsh surface.</span>

<span class="sd">        Args:</span>
<span class="sd">            curves (List[int]): List of Gmsh curves to make surface</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: tag of created Gmsh surface</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">curve_loop</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">addCurveLoop</span><span class="p">(</span><span class="n">curves</span><span class="p">)</span>
        <span class="n">surface</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">addPlaneSurface</span><span class="p">([</span><span class="n">curve_loop</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">surface</span></div>


<div class="viewcode-block" id="QGmshRenderer.parse_units_gmsh">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.parse_units_gmsh">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">parse_units_gmsh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_input</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span>
                                             <span class="nb">tuple</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Helper function to parse numbers and units</span>

<span class="sd">        Args:</span>
<span class="sd">            _input (Union[int, float, np.ndarray, list, tuple, str]): input to parse</span>

<span class="sd">        Returns:</span>
<span class="sd">            Union[int, float, np.ndarray, list, tuple, str]: parsed input value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_input</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">_input</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_input</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
            <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">_input</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">+=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_input</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">_input</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">+=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span>
            <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">_input</span><span class="p">)(</span><span class="n">output</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_input</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">parse_value</span><span class="p">(</span><span class="n">_input</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;RENDERER ERROR: Expected int, str, list, np.ndarray, or tuple. Got: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">_input</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.render_element_junction">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.render_element_junction">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render_element_junction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">junc</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render an element of type: &#39;junction&#39;</span>

<span class="sd">        Args:</span>
<span class="sd">            junc (pd.Series): Junction to render.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">qc_shapely</span> <span class="o">=</span> <span class="n">junc</span><span class="o">.</span><span class="n">geometry</span>
        <span class="n">qc_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span><span class="n">junc</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
        <span class="n">qc_thickness</span><span class="p">,</span> <span class="n">qc_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_zcoord_for_layer_datatype</span><span class="p">(</span>
            <span class="n">layer_num</span><span class="o">=</span><span class="n">junc</span><span class="o">.</span><span class="n">layer</span><span class="p">)</span>

        <span class="n">vecs</span> <span class="o">=</span> <span class="n">Vec3DArray</span><span class="o">.</span><span class="n">make_vec3DArray</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">qc_shapely</span><span class="o">.</span><span class="n">coords</span><span class="p">)),</span> <span class="n">qc_z</span><span class="p">)</span>
        <span class="n">qc_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_components</span><span class="p">[</span>
            <span class="n">junc</span><span class="p">[</span><span class="s2">&quot;component&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">clean_name</span><span class="p">(</span><span class="n">junc</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>

        <span class="c1"># Considering JJ will always be a rectangle</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span> <span class="o">=</span> <span class="n">line_width_offset_pts</span><span class="p">(</span><span class="n">vecs</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                       <span class="n">vecs</span><span class="o">.</span><span class="n">path_vecs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                       <span class="n">qc_width</span><span class="p">,</span>
                                       <span class="n">qc_z</span><span class="p">,</span>
                                       <span class="n">ret_pts</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">v3</span><span class="p">,</span> <span class="n">v4</span> <span class="o">=</span> <span class="n">line_width_offset_pts</span><span class="p">(</span><span class="n">vecs</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                       <span class="n">vecs</span><span class="o">.</span><span class="n">path_vecs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                       <span class="n">qc_width</span><span class="p">,</span>
                                       <span class="n">qc_z</span><span class="p">,</span>
                                       <span class="n">ret_pts</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">v1_v3</span> <span class="o">=</span> <span class="n">Vec3D</span><span class="o">.</span><span class="n">get_distance</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="n">v1_v4</span> <span class="o">=</span> <span class="n">Vec3D</span><span class="o">.</span><span class="n">get_distance</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v4</span><span class="p">)</span>
        <span class="n">vecs</span> <span class="o">=</span> <span class="p">[</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v4</span><span class="p">,</span> <span class="n">v3</span><span class="p">,</span> <span class="n">v1</span><span class="p">]</span> <span class="k">if</span> <span class="n">v1_v3</span> <span class="o">&lt;=</span> <span class="n">v1_v4</span> <span class="k">else</span> <span class="p">[</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">,</span> <span class="n">v4</span><span class="p">,</span> <span class="n">v1</span><span class="p">]</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="p">[</span><span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">addPoint</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">qc_z</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vecs</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
        <span class="n">pts</span> <span class="o">+=</span> <span class="p">[</span><span class="n">pts</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pts</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">lines</span> <span class="o">+=</span> <span class="p">[</span><span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">pts</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])]</span>
        <span class="n">curve_loop</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">addCurveLoop</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
        <span class="n">surface</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">addPlaneSurface</span><span class="p">([</span><span class="n">curve_loop</span><span class="p">])</span>

        <span class="c1"># Translate the junction to the middle of the layer</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">translate</span><span class="p">([(</span><span class="mi">2</span><span class="p">,</span> <span class="n">surface</span><span class="p">)],</span>
                                 <span class="n">dx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                 <span class="n">dy</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                 <span class="n">dz</span><span class="o">=</span><span class="n">qc_thickness</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">junc</span><span class="o">.</span><span class="n">layer</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">juncs_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">juncs_dict</span><span class="p">[</span><span class="n">junc</span><span class="o">.</span><span class="n">layer</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">juncs_dict</span><span class="p">[</span><span class="n">junc</span><span class="o">.</span><span class="n">layer</span><span class="p">][</span><span class="n">qc_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">surface</span><span class="p">]</span></div>


<div class="viewcode-block" id="QGmshRenderer.render_element_path">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.render_element_path">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render_element_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render an element of type: &#39;path&#39;</span>

<span class="sd">        Args:</span>
<span class="sd">            path (pd.Series): Path to render.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">qc_shapely</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">geometry</span>
        <span class="n">qc_width</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">width</span>
        <span class="n">qc_fillet</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">fillet</span><span class="p">)</span> <span class="k">if</span> <span class="nb">float</span><span class="p">(</span>
            <span class="n">path</span><span class="o">.</span><span class="n">fillet</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="k">else</span> <span class="mf">0.0</span>
        <span class="n">qc_thickness</span><span class="p">,</span> <span class="n">qc_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_zcoord_for_layer_datatype</span><span class="p">(</span>
            <span class="n">layer_num</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">layer</span><span class="p">)</span>

        <span class="n">vecs</span> <span class="o">=</span> <span class="n">Vec3DArray</span><span class="o">.</span><span class="n">make_vec3DArray</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">qc_shapely</span><span class="o">.</span><span class="n">coords</span><span class="p">)),</span> <span class="n">qc_z</span><span class="p">)</span>
        <span class="n">qc_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_components</span><span class="p">[</span>
            <span class="n">path</span><span class="p">[</span><span class="s2">&quot;component&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">clean_name</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
        <span class="n">bad_fillets</span> <span class="o">=</span> <span class="n">bad_fillet_idxs</span><span class="p">(</span><span class="n">qc_shapely</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="n">qc_fillet</span><span class="p">)</span>
        <span class="n">curves</span> <span class="o">=</span> <span class="n">render_path_curves</span><span class="p">(</span><span class="n">vecs</span><span class="p">,</span> <span class="n">qc_z</span><span class="p">,</span> <span class="n">qc_fillet</span><span class="p">,</span> <span class="n">qc_width</span><span class="p">,</span>
                                    <span class="n">bad_fillets</span><span class="p">)</span>
        <span class="n">surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_general_surface</span><span class="p">(</span><span class="n">curves</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">layer</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_subtract_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_subtract_dict</span><span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">layer</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">layer</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">paths_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">paths_dict</span><span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">layer</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">qc_thickness</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">extruded_entity</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">extrude</span><span class="p">([(</span><span class="mi">2</span><span class="p">,</span> <span class="n">surface</span><span class="p">)],</span>
                                                     <span class="n">dx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                                     <span class="n">dy</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                                     <span class="n">dz</span><span class="o">=</span><span class="n">qc_thickness</span><span class="p">)</span>
            <span class="n">volume</span> <span class="o">=</span> <span class="p">[</span><span class="n">tag</span> <span class="k">for</span> <span class="n">dim</span><span class="p">,</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">extruded_entity</span> <span class="k">if</span> <span class="n">dim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">path</span><span class="p">[</span><span class="s2">&quot;subtract&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layer_subtract_dict</span><span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">layer</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">volume</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">paths_dict</span><span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">layer</span><span class="p">][</span><span class="n">qc_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">volume</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">path</span><span class="p">[</span><span class="s2">&quot;subtract&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layer_subtract_dict</span><span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">layer</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">surface</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">paths_dict</span><span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">layer</span><span class="p">][</span><span class="n">qc_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">surface</span><span class="p">]</span></div>


<div class="viewcode-block" id="QGmshRenderer.make_poly_surface">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.make_poly_surface">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">make_poly_surface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">],</span> <span class="n">chip_z</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Make a Gmsh surface for creating poly type QGeometries</span>

<span class="sd">        Args:</span>
<span class="sd">            points (List[np.ndarray]): A list of 3D vectors (np.ndarray) defining polygon</span>
<span class="sd">            chip_z (float): z-coordinate of the chip</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: tag of the created Gmsh surface</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">first_tag</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">prev_tag</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pt</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">points</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">p1</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">addPoint</span><span class="p">(</span><span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                         <span class="n">chip_z</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">prev_tag</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="n">first_tag</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">-</span>
                                    <span class="mi">2</span><span class="p">)</span> <span class="k">else</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">addPoint</span><span class="p">(</span>
                                        <span class="n">points</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span>
                                                                 <span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">chip_z</span><span class="p">)</span>
            <span class="n">lines</span> <span class="o">+=</span> <span class="p">[</span><span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)]</span>

            <span class="n">prev_tag</span> <span class="o">=</span> <span class="n">p2</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">first_tag</span> <span class="o">=</span> <span class="n">p1</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_general_surface</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.render_element_poly">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.render_element_poly">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render_element_poly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render an element of type: &#39;poly&#39;</span>

<span class="sd">        Args:</span>
<span class="sd">            poly (pd.Series): Poly to render.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">qc_shapely</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">geometry</span>
        <span class="n">qc_thickness</span><span class="p">,</span> <span class="n">qc_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_zcoord_for_layer_datatype</span><span class="p">(</span>
            <span class="n">layer_num</span><span class="o">=</span><span class="n">poly</span><span class="o">.</span><span class="n">layer</span><span class="p">)</span>

        <span class="n">vecs</span> <span class="o">=</span> <span class="n">Vec3DArray</span><span class="o">.</span><span class="n">make_vec3DArray</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">qc_shapely</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">)),</span> <span class="n">qc_z</span><span class="p">)</span>
        <span class="n">qc_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_components</span><span class="p">[</span>
            <span class="n">poly</span><span class="p">[</span><span class="s2">&quot;component&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="n">clean_name</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>

        <span class="n">surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_poly_surface</span><span class="p">(</span><span class="n">vecs</span><span class="o">.</span><span class="n">points</span><span class="p">,</span> <span class="n">qc_z</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">qc_shapely</span><span class="o">.</span><span class="n">interiors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">pts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">qc_shapely</span><span class="o">.</span><span class="n">interiors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="p">))</span>
            <span class="n">int_vecs</span> <span class="o">=</span> <span class="n">Vec3DArray</span><span class="o">.</span><span class="n">make_vec3DArray</span><span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">qc_z</span><span class="p">)</span>
            <span class="n">int_surface</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_poly_surface</span><span class="p">(</span><span class="n">int_vecs</span><span class="o">.</span><span class="n">points</span><span class="p">,</span> <span class="n">qc_z</span><span class="p">)</span>
            <span class="n">surface</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">cut</span><span class="p">([(</span><span class="mi">2</span><span class="p">,</span> <span class="n">surface</span><span class="p">)],</span>
                                         <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="n">int_surface</span><span class="p">)])[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">poly</span><span class="o">.</span><span class="n">layer</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_subtract_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_subtract_dict</span><span class="p">[</span><span class="n">poly</span><span class="o">.</span><span class="n">layer</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">poly</span><span class="o">.</span><span class="n">layer</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">polys_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">polys_dict</span><span class="p">[</span><span class="n">poly</span><span class="o">.</span><span class="n">layer</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">qc_thickness</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">extruded_entity</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">extrude</span><span class="p">([(</span><span class="mi">2</span><span class="p">,</span> <span class="n">surface</span><span class="p">)],</span>
                                                     <span class="n">dx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                                     <span class="n">dy</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                                     <span class="n">dz</span><span class="o">=</span><span class="n">qc_thickness</span><span class="p">)</span>
            <span class="n">volume</span> <span class="o">=</span> <span class="p">[</span><span class="n">tag</span> <span class="k">for</span> <span class="n">dim</span><span class="p">,</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">extruded_entity</span> <span class="k">if</span> <span class="n">dim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">poly</span><span class="p">[</span><span class="s2">&quot;subtract&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layer_subtract_dict</span><span class="p">[</span><span class="n">poly</span><span class="o">.</span><span class="n">layer</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">volume</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">polys_dict</span><span class="p">[</span><span class="n">poly</span><span class="o">.</span><span class="n">layer</span><span class="p">][</span><span class="n">qc_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">volume</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">poly</span><span class="p">[</span><span class="s2">&quot;subtract&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layer_subtract_dict</span><span class="p">[</span><span class="n">poly</span><span class="o">.</span><span class="n">layer</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">surface</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">polys_dict</span><span class="p">[</span><span class="n">poly</span><span class="o">.</span><span class="n">layer</span><span class="p">][</span><span class="n">qc_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">surface</span><span class="p">]</span></div>


<div class="viewcode-block" id="QGmshRenderer.add_endcaps">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.add_endcaps">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_endcaps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">open_pins</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create endcaps (rectangular cutouts) for all pins in the list</span>
<span class="sd">        open_pins and add them to layer_subtract_dict. Each element in open_pins</span>
<span class="sd">        takes on the form (component_name, pin_name) and corresponds to a</span>
<span class="sd">        single pin.</span>

<span class="sd">        Args:</span>
<span class="sd">            open_pins (Union[list, None], optional): List of tuples of pins that are open. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">open_pins</span> <span class="o">=</span> <span class="n">open_pins</span> <span class="k">if</span> <span class="n">open_pins</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">comp</span><span class="p">,</span> <span class="n">pin</span> <span class="ow">in</span> <span class="n">open_pins</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">comp</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">components</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Component &#39;</span><span class="si">{</span><span class="n">comp</span><span class="si">}</span><span class="s2">&#39; not present in current design.&quot;</span><span class="p">)</span>

            <span class="n">qcomp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">comp</span><span class="p">]</span>
            <span class="n">qc_layer</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">qcomp</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">layer</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">pin</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">qcomp</span><span class="o">.</span><span class="n">pins</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Pin &#39;</span><span class="si">{</span><span class="n">pin</span><span class="si">}</span><span class="s2">&#39; not present in component &#39;</span><span class="si">{</span><span class="n">comp</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

            <span class="n">pin_dict</span> <span class="o">=</span> <span class="n">qcomp</span><span class="o">.</span><span class="n">pins</span><span class="p">[</span><span class="n">pin</span><span class="p">]</span>
            <span class="n">width</span><span class="p">,</span> <span class="n">gap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span>
                <span class="p">[</span><span class="n">pin_dict</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span> <span class="n">pin_dict</span><span class="p">[</span><span class="s2">&quot;gap&quot;</span><span class="p">]])</span>
            <span class="n">mid</span><span class="p">,</span> <span class="n">normal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span>
                <span class="n">pin_dict</span><span class="p">[</span><span class="s2">&quot;middle&quot;</span><span class="p">]),</span> <span class="n">pin_dict</span><span class="p">[</span><span class="s2">&quot;normal&quot;</span><span class="p">]</span>
            <span class="n">qc_thickness</span><span class="p">,</span> <span class="n">qc_z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_zcoord_for_layer_datatype</span><span class="p">(</span>
                <span class="n">layer_num</span><span class="o">=</span><span class="n">qc_layer</span><span class="p">)</span>

            <span class="n">rect_mid</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="n">normal</span> <span class="o">*</span> <span class="n">gap</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">rect_vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">rect_mid</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rect_mid</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">qc_z</span><span class="p">])</span>
            <span class="c1"># Assumption: pins only point in x or y directions</span>
            <span class="c1"># If this assumption is not satisfied, addBox() no longer works</span>
            <span class="c1"># Solution: must draw points, lines, and shapes manually and then extrude</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
                <span class="n">dx</span> <span class="o">=</span> <span class="n">gap</span>
                <span class="n">dy</span> <span class="o">=</span> <span class="n">width</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">gap</span>
                <span class="n">rect_x</span> <span class="o">=</span> <span class="n">rect_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">dx</span> <span class="o">/</span> <span class="mi">2</span>
                <span class="n">rect_y</span> <span class="o">=</span> <span class="n">rect_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">dy</span> <span class="o">/</span> <span class="mi">2</span>
                <span class="n">rect_z</span> <span class="o">=</span> <span class="n">rect_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dy</span> <span class="o">=</span> <span class="n">gap</span>
                <span class="n">dx</span> <span class="o">=</span> <span class="n">width</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">gap</span>
                <span class="n">rect_x</span> <span class="o">=</span> <span class="n">rect_vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">dx</span> <span class="o">/</span> <span class="mi">2</span>
                <span class="n">rect_y</span> <span class="o">=</span> <span class="n">rect_vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">dy</span> <span class="o">/</span> <span class="mi">2</span>
                <span class="n">rect_z</span> <span class="o">=</span> <span class="n">rect_vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">qc_thickness</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">endcap</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">addBox</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">rect_x</span><span class="p">,</span>
                                               <span class="n">y</span><span class="o">=</span><span class="n">rect_y</span><span class="p">,</span>
                                               <span class="n">z</span><span class="o">=</span><span class="n">rect_z</span><span class="p">,</span>
                                               <span class="n">dx</span><span class="o">=</span><span class="n">dx</span><span class="p">,</span>
                                               <span class="n">dy</span><span class="o">=</span><span class="n">dy</span><span class="p">,</span>
                                               <span class="n">dz</span><span class="o">=</span><span class="n">qc_thickness</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">endcap</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">addRectangle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">rect_x</span><span class="p">,</span>
                                                     <span class="n">y</span><span class="o">=</span><span class="n">rect_y</span><span class="p">,</span>
                                                     <span class="n">z</span><span class="o">=</span><span class="n">rect_z</span><span class="p">,</span>
                                                     <span class="n">dx</span><span class="o">=</span><span class="n">dx</span><span class="p">,</span>
                                                     <span class="n">dy</span><span class="o">=</span><span class="n">dy</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_subtract_dict</span><span class="p">[</span><span class="n">qc_layer</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">endcap</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.render_layers">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.render_layers">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">draw_sample_holder</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                      <span class="n">omit_layers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                      <span class="n">box_plus_buffer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render all chips of the design. calls `render_chip` to render the actual geometries</span>

<span class="sd">        Args:</span>
<span class="sd">            omit_layers (Optional[List[int]]): List of layers to omit render.</span>
<span class="sd">                                               Renders all if [] or None is given.</span>
<span class="sd">                                               Defaults to None.</span>
<span class="sd">            draw_sample_holder (bool): To draw the sample holder box.</span>
<span class="sd">            box_plus_buffer (bool, optional): For adding buffer to chip dimensions.</span>
<span class="sd">                                              Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layer_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">ls</span><span class="o">.</span><span class="n">ls_df</span><span class="p">[</span><span class="s2">&quot;layer&quot;</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">omit_layers</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">layer_list</span> <span class="k">if</span> <span class="n">l</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">omit_layers</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layer_list</span><span class="p">:</span>
            <span class="c1"># Add the buffer, using options for renderer.</span>
            <span class="n">x_buff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;x_buffer_width_mm&quot;</span><span class="p">])</span>
            <span class="n">y_buff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;y_buffer_width_mm&quot;</span><span class="p">])</span>

            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds_handler</span><span class="o">.</span><span class="n">get_bounds_of_path_and_poly_tables</span><span class="p">(</span>
                <span class="n">box_plus_buffer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">qcomp_ids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="p">,</span> <span class="n">x_buff</span><span class="p">,</span> <span class="n">y_buff</span><span class="p">)</span>

            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">box_xy_bounds</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path_and_poly_with_valid_comps</span><span class="p">,</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">path_poly_and_junction_valid_comps</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">chip_names_matched</span><span class="p">,</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">valid_chip_names</span><span class="p">)</span> <span class="o">=</span> <span class="n">result</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">chip_names_matched</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;The chip names in Qgeometry tables do not match with &quot;</span>
                    <span class="s2">&quot;the ones in the layer-stack. Please re-check your design.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">render_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">draw_sample_holder</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;sample_holder_top&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">variables</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_uwave_package</span>

            <span class="n">vac_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span>
                <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="s2">&quot;sample_holder_top&quot;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s2">&quot;sample_holder_bottom&quot;</span><span class="p">]])</span>

            <span class="c1"># This tolerance is needed for Gmsh to not cut</span>
            <span class="c1"># the vacuum_box into two separate volumes when the</span>
            <span class="c1"># substrate volume is subtracted from it</span>
            <span class="n">tol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span><span class="s2">&quot;1um&quot;</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">box_xy_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">tol</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">box_xy_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">tol</span>
            <span class="n">z</span> <span class="o">=</span> <span class="o">-</span><span class="n">vac_height</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">box_xy_bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">box_xy_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">tol</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">box_xy_bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">box_xy_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">tol</span>
            <span class="n">dz</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">vac_height</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vacuum_box</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">addBox</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.render_layer">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.render_layer">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">datatype</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render the given layer number and datatype.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer_number (int): number of the layer to render</span>
<span class="sd">            datatype (int): number of the datatype. Defaults to 0.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: if the required properties are not found</span>
<span class="sd">                            in the layer-stack</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">thickness</span><span class="p">,</span> <span class="n">z_coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_zcoord_for_layer_datatype</span><span class="p">(</span>
            <span class="n">layer_num</span><span class="o">=</span><span class="n">layer_number</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">datatype</span><span class="p">)</span>

        <span class="n">layer_x</span><span class="p">,</span> <span class="n">layer_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">box_xy_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">layer_wx</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">box_xy_bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">box_xy_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">layer_wy</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">box_xy_bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">box_xy_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="c1"># Check if thickness == 0, then draw a rectangle instead</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">thickness</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">layer_tag</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">addBox</span><span class="p">(</span><span class="n">layer_x</span><span class="p">,</span> <span class="n">layer_y</span><span class="p">,</span> <span class="n">z_coord</span><span class="p">,</span>
                                              <span class="n">layer_wx</span><span class="p">,</span> <span class="n">layer_wy</span><span class="p">,</span> <span class="n">thickness</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">layer_tag</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">addRectangle</span><span class="p">(</span><span class="n">layer_x</span><span class="p">,</span> <span class="n">layer_y</span><span class="p">,</span> <span class="n">z_coord</span><span class="p">,</span>
                                                    <span class="n">layer_wx</span><span class="p">,</span> <span class="n">layer_wy</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">layer_number</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="p">[</span><span class="n">layer_number</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="p">[</span><span class="n">layer_number</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">layer_tag</span><span class="p">]</span></div>


<div class="viewcode-block" id="QGmshRenderer.subtract_from_layers">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.subtract_from_layers">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">subtract_from_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">omit_layers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Subtract the QGeometries in tables from the chip ground plane</span>

<span class="sd">        Args:</span>
<span class="sd">            omit_layers (Optional[List[int]]): List of layers to omit render.</span>
<span class="sd">                                               Renders all if [] or None is given.</span>
<span class="sd">                                               Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">layer_num</span><span class="p">,</span> <span class="n">shapes</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_subtract_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">omit_layers</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">layer_num</span> <span class="ow">in</span> <span class="n">omit_layers</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">thickness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_for_layer_datatype</span><span class="p">(</span>
                <span class="n">layer_num</span><span class="o">=</span><span class="n">layer_num</span><span class="p">)</span>

            <span class="c1"># Check if thickness == 0, then subtract with dim=2</span>
            <span class="n">dim</span> <span class="o">=</span> <span class="mi">3</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">thickness</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">2</span>
            <span class="n">shape_dim_tags</span> <span class="o">=</span> <span class="p">[(</span><span class="n">dim</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">shapes</span><span class="p">]</span>
            <span class="n">layer_dim_tag</span> <span class="o">=</span> <span class="p">(</span><span class="n">dim</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="p">[</span><span class="n">layer_num</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">tool_dimtags</span> <span class="o">=</span> <span class="p">[</span><span class="n">layer_dim_tag</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape_dim_tags</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">subtract_layer</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">tool_dimtags</span><span class="p">,</span>
                                                    <span class="n">shape_dim_tags</span><span class="p">)</span>

                <span class="n">updated_layer_geoms</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tool_dimtags</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">subtract_layer</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">updated_layer_geoms</span> <span class="o">+=</span> <span class="p">[</span>
                            <span class="n">tag</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">subtract_layer</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
                        <span class="p">]</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="p">[</span><span class="n">layer_num</span><span class="p">]</span> <span class="o">=</span> <span class="n">updated_layer_geoms</span></div>


<div class="viewcode-block" id="QGmshRenderer.fragment_interfaces">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.fragment_interfaces">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">fragment_interfaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">draw_sample_holder</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fragment Gmsh surfaces to ensure consistent tetrahedral meshing</span>
<span class="sd">        across interfaces between different materials.</span>

<span class="sd">        Args:</span>
<span class="sd">            draw_sample_holder (bool): To draw the sample holder box.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_geom_dimtags</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">all_layer_geoms</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
        <span class="n">all_dicts</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">paths_dict</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">polys_dict</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">all_dicts</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">layer</span><span class="p">,</span> <span class="n">geoms</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">layer</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_layer_geoms</span><span class="p">:</span>
                    <span class="n">all_layer_geoms</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
                <span class="n">all_layer_geoms</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">geoms</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">layer</span><span class="p">,</span> <span class="n">geom_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">layer</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_layer_geoms</span><span class="p">:</span>
                <span class="n">all_layer_geoms</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

            <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;ground&quot;</span> <span class="k">if</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_types</span><span class="p">[</span>
                <span class="s2">&quot;metal&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;dielectric&quot;</span>
            <span class="n">all_layer_geoms</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="p">{</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_type</span><span class="si">}</span><span class="s2">_layer_</span><span class="si">{</span><span class="n">layer</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">geom_id</span><span class="p">})</span>

        <span class="k">for</span> <span class="n">layer</span><span class="p">,</span> <span class="n">geoms</span> <span class="ow">in</span> <span class="n">all_layer_geoms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># Check if thickness == 0, then fragment differently</span>
            <span class="n">thickness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_for_layer_datatype</span><span class="p">(</span><span class="n">layer_num</span><span class="o">=</span><span class="n">layer</span><span class="p">)</span>
            <span class="n">geom_dim</span> <span class="o">=</span> <span class="mi">3</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">thickness</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">2</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">geom_ids</span> <span class="ow">in</span> <span class="n">geoms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">all_geom_dimtags</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">geom_dim</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">geom_ids</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">geoms</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">juncs_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">jj_sfs</span> <span class="ow">in</span> <span class="n">geoms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">all_geom_dimtags</span> <span class="o">+=</span> <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="n">jj</span><span class="p">)</span> <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">jj_sfs</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">draw_sample_holder</span><span class="p">:</span>
            <span class="n">object_dimtag</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vacuum_box</span><span class="p">)</span>
            <span class="n">all_layer_geoms</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">vacuum_box</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">vacuum_box</span><span class="p">])</span>
            <span class="n">fragmented_geoms</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">fragment</span><span class="p">([</span><span class="n">object_dimtag</span><span class="p">],</span>
                                                       <span class="n">all_geom_dimtags</span><span class="p">)</span>
            <span class="c1"># Extract the new vacuum_box volume</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vacuum_box</span> <span class="o">=</span> <span class="n">fragmented_geoms</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">object_dimtag</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vacuum_box</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Get one of the dim=3 objects</span>
            <span class="n">dim3_dimtag</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">(</span><span class="n">dim</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span> <span class="k">for</span> <span class="n">dim</span><span class="p">,</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">all_geom_dimtags</span> <span class="k">if</span> <span class="n">dim</span> <span class="o">==</span> <span class="mi">3</span>
            <span class="p">]</span>
            <span class="n">object_dimtag</span> <span class="o">=</span> <span class="n">dim3_dimtag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span>
                <span class="n">dim3_dimtag</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">all_geom_dimtags</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">all_geom_dimtags</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">object_dimtag</span><span class="p">)</span>
            <span class="n">fragmented_geoms</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">fragment</span><span class="p">([</span><span class="n">object_dimtag</span><span class="p">],</span>
                                                       <span class="n">all_geom_dimtags</span><span class="p">)</span>

        <span class="n">updated_geoms</span> <span class="o">=</span> <span class="n">fragmented_geoms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">insert_idx</span> <span class="o">=</span> <span class="n">updated_geoms</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">object_dimtag</span><span class="p">)</span>
        <span class="n">all_geom_dimtags</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">insert_idx</span><span class="p">,</span> <span class="n">object_dimtag</span><span class="p">)</span>
        <span class="n">all_dicts</span> <span class="o">=</span> <span class="p">{</span>
            <span class="mi">0</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">paths_dict</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">polys_dict</span><span class="p">,</span>
            <span class="mi">2</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">juncs_dict</span><span class="p">,</span>
            <span class="mi">3</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">all_geom_dimtags</span><span class="p">,</span> <span class="n">updated_geoms</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">old</span> <span class="o">!=</span> <span class="n">new</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">all_dicts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">geoms</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geoms</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">geom_id</span> <span class="ow">in</span> <span class="n">geoms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">geom_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">geom_id</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">old</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                                    <span class="n">all_dicts</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">l</span><span class="p">][</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                                    <span class="n">all_dicts</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">l</span><span class="p">][</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">old</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">geoms</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                            <span class="k">for</span> <span class="n">geom_id</span> <span class="ow">in</span> <span class="n">geoms</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">geom_id</span> <span class="o">==</span> <span class="n">old</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                                    <span class="n">all_dicts</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">l</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                                    <span class="n">all_dicts</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">l</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">old</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span></div>


        <span class="c1"># TODO: Do we require 3D junctions? Active issue: #842</span>
        <span class="c1"># all_juncs = []</span>
        <span class="c1"># for layer_juncs in self.juncs_dict.values():</span>
        <span class="c1">#     for _, surf in layer_juncs.items():</span>
        <span class="c1">#         all_juncs += surf</span>

        <span class="c1"># junc_dimtags = [(2, junc) for junc in all_juncs]</span>
        <span class="c1"># gmsh.model.occ.fragment([(3, self.vacuum_box)], junc_dimtags)</span>

<div class="viewcode-block" id="QGmshRenderer.get_all_metal_surfaces">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.get_all_metal_surfaces">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_metal_surfaces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">metal_geoms</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">surf_tags</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_types</span><span class="p">[</span><span class="s2">&quot;metal&quot;</span><span class="p">]:</span>
            <span class="n">thickness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_for_layer_datatype</span><span class="p">(</span><span class="n">layer_num</span><span class="o">=</span><span class="n">layer</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">juncs_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">surf_tags</span> <span class="o">+=</span> <span class="n">tag</span>

            <span class="k">if</span> <span class="n">thickness</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">polys_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">metal_geoms</span> <span class="o">+=</span> <span class="n">tag</span>
                <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">paths_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">metal_geoms</span> <span class="o">+=</span> <span class="n">tag</span>
                <span class="n">metal_geoms</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">polys_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">surf_tags</span> <span class="o">+=</span> <span class="n">tag</span>
                <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">paths_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">surf_tags</span> <span class="o">+=</span> <span class="n">tag</span>
                <span class="n">surf_tags</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">geom</span> <span class="ow">in</span> <span class="n">metal_geoms</span><span class="p">:</span>
            <span class="n">surf_tags</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">getSurfaceLoops</span><span class="p">(</span><span class="n">geom</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">surf_tags</span></div>


<div class="viewcode-block" id="QGmshRenderer.assign_physical_groups">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.assign_physical_groups">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">assign_physical_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore_metal_volume</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                               <span class="n">draw_sample_holder</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assign physical groups to classify different geometries physically.</span>

<span class="sd">        Args:</span>
<span class="sd">            ignore_metal_volume (bool, optional): ignore the volume of metals and replace</span>
<span class="sd">                                                        it with a list of surfaces instead.</span>
<span class="sd">            draw_sample_holder (bool): To draw the sample holder box.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: if self.layer_types is not a dict</span>
<span class="sd">            ValueError: if layer number is not in self.layer_types</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layer_numbers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">ls</span><span class="o">.</span><span class="n">ls_df</span><span class="p">[</span><span class="s2">&quot;layer&quot;</span><span class="p">]))</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layer_numbers</span><span class="p">:</span>
            <span class="c1"># TODO: check if thickness == 0, then fragment differently</span>
            <span class="n">layer_thickness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_for_layer_datatype</span><span class="p">(</span>
                <span class="n">layer_num</span><span class="o">=</span><span class="n">layer</span><span class="p">)</span>
            <span class="n">layer_dim</span> <span class="o">=</span> <span class="mi">3</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">layer_thickness</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">2</span>

            <span class="k">if</span> <span class="n">layer</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">physical_groups</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">physical_groups</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

            <span class="c1"># Check if a component is drawn on that layer</span>
            <span class="n">valid_layers</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
                <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">paths_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polys_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
            <span class="k">if</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">valid_layers</span><span class="p">:</span>
                <span class="c1"># Make physical groups for components</span>
                <span class="n">layer_geoms</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">paths_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">],</span>
                                   <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">polys_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">layer_geoms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">layer_dim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                        <span class="n">tags</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">getSurfaceLoops</span><span class="p">(</span><span class="n">tag</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">metal_layer</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_types</span><span class="p">[</span>
                            <span class="s2">&quot;metal&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="kc">False</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">metal_layer</span> <span class="ow">or</span> <span class="p">(</span><span class="n">metal_layer</span> <span class="ow">and</span>
                                               <span class="ow">not</span> <span class="n">ignore_metal_volume</span><span class="p">):</span>
                            <span class="n">ph_vol_tag</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">addPhysicalGroup</span><span class="p">(</span>
                                <span class="n">dim</span><span class="o">=</span><span class="n">layer_dim</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tag</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">physical_groups</span><span class="p">[</span><span class="n">layer</span><span class="p">][</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ph_vol_tag</span>

                        <span class="n">ph_sfs_tag</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">addPhysicalGroup</span><span class="p">(</span>
                            <span class="n">dim</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">_sfs&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">physical_groups</span><span class="p">[</span><span class="n">layer</span><span class="p">][</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">_sfs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ph_sfs_tag</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">ph_tag</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">addPhysicalGroup</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="n">layer_dim</span><span class="p">,</span>
                                                             <span class="n">tags</span><span class="o">=</span><span class="n">tag</span><span class="p">,</span>
                                                             <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">physical_groups</span><span class="p">[</span><span class="n">layer</span><span class="p">][</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ph_tag</span>

                <span class="c1"># TODO: Do we require 3D junctions? Active issue: #842</span>
                <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">juncs_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">ph_junc_tag</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">addPhysicalGroup</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                                              <span class="n">tags</span><span class="o">=</span><span class="n">tag</span><span class="p">,</span>
                                                              <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">physical_groups</span><span class="p">[</span><span class="n">layer</span><span class="p">][</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ph_junc_tag</span>

            <span class="c1"># Make physical groups for each layer</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_types</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Expected `self.layer_types` to be a dict, found </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layer_types</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_types</span><span class="p">[</span><span class="s2">&quot;metal&quot;</span><span class="p">]:</span>
                    <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;ground_plane&quot;</span>
                <span class="k">elif</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_types</span><span class="p">[</span><span class="s2">&quot;dielectric&quot;</span><span class="p">]:</span>
                    <span class="n">layer_type</span> <span class="o">=</span> <span class="s2">&quot;dielectric&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s2">&quot;Layer number not in the specified `self.layer_types` dict.&quot;</span>
                    <span class="p">)</span>

                <span class="n">layer_name</span> <span class="o">=</span> <span class="n">layer_type</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;_(layer </span><span class="si">{</span><span class="n">layer</span><span class="si">}</span><span class="s1">)&#39;</span>
                <span class="n">layer_tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span>
                <span class="n">all_metal_surfs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_metal_surfaces</span><span class="p">()</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">layer_tag</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">layer_dim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                        <span class="n">layer_sfs_tags</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">vol</span> <span class="ow">in</span> <span class="n">layer_tag</span><span class="p">:</span>
                            <span class="n">layer_sfs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                                <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">getSurfaceLoops</span><span class="p">(</span><span class="n">vol</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

                            <span class="k">if</span> <span class="n">layer_type</span> <span class="o">==</span> <span class="s2">&quot;ground_plane&quot;</span><span class="p">:</span>
                                <span class="n">layer_sfs_tags</span> <span class="o">+=</span> <span class="n">layer_sfs</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">layer_sfs_tags</span> <span class="o">+=</span> <span class="p">[</span>
                                    <span class="n">sf</span> <span class="k">for</span> <span class="n">sf</span> <span class="ow">in</span> <span class="n">layer_sfs</span>
                                    <span class="k">if</span> <span class="n">sf</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_metal_surfs</span>
                                <span class="p">]</span>

                        <span class="k">if</span> <span class="n">layer_type</span> <span class="o">!=</span> <span class="s2">&quot;ground_plane&quot;</span> <span class="ow">or</span> <span class="p">(</span>
                                <span class="n">layer_type</span> <span class="o">==</span> <span class="s2">&quot;ground_plane&quot;</span> <span class="ow">and</span>
                                <span class="ow">not</span> <span class="n">ignore_metal_volume</span><span class="p">):</span>
                            <span class="n">ph_vol_tag</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">addPhysicalGroup</span><span class="p">(</span>
                                <span class="n">dim</span><span class="o">=</span><span class="n">layer_dim</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">layer_tag</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">physical_groups</span><span class="p">[</span><span class="n">layer</span><span class="p">][</span><span class="n">layer_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ph_vol_tag</span>

                        <span class="n">ph_sfs_tag</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">addPhysicalGroup</span><span class="p">(</span>
                            <span class="n">dim</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                            <span class="n">tags</span><span class="o">=</span><span class="n">layer_sfs_tags</span><span class="p">,</span>
                            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s2">_sfs&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">physical_groups</span><span class="p">[</span><span class="n">layer</span><span class="p">][</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s2">_sfs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ph_sfs_tag</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">ph_tag</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">addPhysicalGroup</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="n">layer_dim</span><span class="p">,</span>
                                                             <span class="n">tags</span><span class="o">=</span><span class="n">layer_tag</span><span class="p">,</span>
                                                             <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">physical_groups</span><span class="p">[</span><span class="n">layer</span><span class="p">][</span><span class="n">layer_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ph_tag</span>

        <span class="k">if</span> <span class="n">draw_sample_holder</span><span class="p">:</span>
            <span class="c1"># Make physical groups for vacuum box (volume)</span>
            <span class="n">vb_name</span> <span class="o">=</span> <span class="s2">&quot;vacuum_box&quot;</span>
            <span class="n">ph_vb_tag</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">addPhysicalGroup</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                                                    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">vacuum_box</span><span class="p">],</span>
                                                    <span class="n">name</span><span class="o">=</span><span class="n">vb_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">physical_groups</span><span class="p">[</span><span class="s2">&quot;global&quot;</span><span class="p">][</span><span class="n">vb_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ph_vb_tag</span>

            <span class="c1"># Make physical groups for vacuum box (surfaces)</span>
            <span class="n">vb_sfs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">getSurfaceLoops</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vacuum_box</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">ph_vb_sfs_tag</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">addPhysicalGroup</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                                        <span class="n">tags</span><span class="o">=</span><span class="n">vb_sfs</span><span class="p">,</span>
                                                        <span class="n">name</span><span class="o">=</span><span class="p">(</span><span class="n">vb_name</span> <span class="o">+</span> <span class="s2">&quot;_sfs&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">physical_groups</span><span class="p">[</span><span class="s2">&quot;global&quot;</span><span class="p">][</span><span class="n">vb_name</span> <span class="o">+</span> <span class="s2">&quot;_sfs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ph_vb_sfs_tag</span></div>


<div class="viewcode-block" id="QGmshRenderer.isometric_projection">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.isometric_projection">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">isometric_projection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the view in Gmsh to isometric view manually.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="s2">&quot;General.Trackball&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="s2">&quot;General.RotationX&quot;</span><span class="p">,</span>
                              <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">6</span><span class="p">))))</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="s2">&quot;General.RotationY&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="s2">&quot;General.RotationZ&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">45</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.define_mesh_size_fields">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.define_mesh_size_fields">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">define_mesh_size_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Define size fields for mesh varying the mesh density across the design.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">min_mesh_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">][</span><span class="s2">&quot;min_size&quot;</span><span class="p">])</span>
        <span class="n">max_mesh_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">][</span><span class="s2">&quot;max_size&quot;</span><span class="p">])</span>
        <span class="n">min_mesh_size_jj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">][</span><span class="s2">&quot;max_size_jj&quot;</span><span class="p">])</span>
        <span class="n">grad_delta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">][</span><span class="s2">&quot;mesh_size_fields&quot;</span><span class="p">][</span><span class="s2">&quot;gradient_delta&quot;</span><span class="p">])</span>
        <span class="n">dist_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">][</span><span class="s2">&quot;mesh_size_fields&quot;</span><span class="p">]</span>
            <span class="p">[</span><span class="s2">&quot;min_distance_from_edges&quot;</span><span class="p">])</span>
        <span class="n">dist_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">][</span><span class="s2">&quot;mesh_size_fields&quot;</span><span class="p">]</span>
            <span class="p">[</span><span class="s2">&quot;max_distance_from_edges&quot;</span><span class="p">])</span>
        <span class="n">dist_delta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">][</span><span class="s2">&quot;mesh_size_fields&quot;</span><span class="p">][</span><span class="s2">&quot;distance_delta&quot;</span><span class="p">])</span>
        <span class="n">grad_steps</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">dist_max</span> <span class="o">-</span> <span class="n">dist_min</span><span class="p">)</span> <span class="o">/</span> <span class="n">dist_delta</span><span class="p">)</span>

        <span class="n">all_vols</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">all_surfs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">all_dicts</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polys_dict</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">paths_dict</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">all_dicts</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">layer</span><span class="p">,</span> <span class="n">geoms</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">thickness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_for_layer_datatype</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">thickness</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">all_vols</span> <span class="o">+=</span> <span class="p">[</span><span class="n">tag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">geoms</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">all_surfs</span> <span class="o">+=</span> <span class="p">[</span><span class="n">tag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">geoms</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>

        <span class="c1"># Metal layers</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_types</span><span class="p">[</span><span class="s2">&quot;metal&quot;</span><span class="p">]:</span>
            <span class="n">thickness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_for_layer_datatype</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">thickness</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">all_vols</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">all_surfs</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">vol</span> <span class="ow">in</span> <span class="n">all_vols</span><span class="p">:</span>
            <span class="n">all_surfs</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="n">surf</span> <span class="k">for</span> <span class="n">surf</span> <span class="ow">in</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">getSurfaceLoops</span><span class="p">(</span><span class="n">vol</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">]</span>

        <span class="n">curve_loops</span> <span class="o">=</span> <span class="p">[</span><span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">getCurveLoops</span><span class="p">(</span><span class="n">surf</span><span class="p">)</span> <span class="k">for</span> <span class="n">surf</span> <span class="ow">in</span> <span class="n">all_surfs</span><span class="p">]</span>
        <span class="n">curves</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cl</span> <span class="ow">in</span> <span class="n">curve_loops</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">curve_tag_list</span> <span class="ow">in</span> <span class="n">cl</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>  <span class="c1"># extract curves</span>
                <span class="k">for</span> <span class="n">curve</span> <span class="ow">in</span> <span class="n">curve_tag_list</span><span class="p">:</span>
                    <span class="n">curves</span> <span class="o">+=</span> <span class="p">[</span><span class="n">curve</span><span class="p">]</span>

        <span class="n">thresh_fields</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Distance&quot;</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumbers</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;CurvesList&quot;</span><span class="p">,</span> <span class="n">curves</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;NumPointsPerCurve&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">grad_steps</span><span class="p">):</span>
            <span class="n">tf</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Threshold&quot;</span><span class="p">)</span>
            <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="n">tf</span><span class="p">,</span> <span class="s2">&quot;DistMin&quot;</span><span class="p">,</span> <span class="n">dist_min</span><span class="p">)</span>
            <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span>
                <span class="n">tf</span><span class="p">,</span> <span class="s2">&quot;DistMax&quot;</span><span class="p">,</span> <span class="n">dist_max</span> <span class="o">-</span> <span class="p">((</span><span class="n">grad_steps</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">dist_delta</span><span class="p">))</span>
            <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="n">tf</span><span class="p">,</span> <span class="s2">&quot;Sigmoid&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="n">tf</span><span class="p">,</span> <span class="s2">&quot;InField&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
            <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="n">tf</span><span class="p">,</span> <span class="s2">&quot;SizeMin&quot;</span><span class="p">,</span>
                                            <span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">grad_delta</span><span class="p">)</span> <span class="o">+</span> <span class="n">min_mesh_size</span><span class="p">)</span>
            <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="n">tf</span><span class="p">,</span> <span class="s2">&quot;SizeMax&quot;</span><span class="p">,</span> <span class="n">max_mesh_size</span><span class="p">)</span>

            <span class="n">thresh_fields</span> <span class="o">+=</span> <span class="p">[</span><span class="n">tf</span><span class="p">]</span>

        <span class="n">jj_surfs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">geoms</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">juncs_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">jj_surfs</span> <span class="o">+=</span> <span class="p">[</span><span class="n">tag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">geoms</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>

        <span class="n">jj_curve_loops</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">getCurveLoops</span><span class="p">(</span><span class="n">surf</span><span class="p">)</span> <span class="k">for</span> <span class="n">surf</span> <span class="ow">in</span> <span class="n">all_surfs</span>
        <span class="p">]</span>
        <span class="n">jj_curves</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cl</span> <span class="ow">in</span> <span class="n">jj_curve_loops</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">curve_tag_list</span> <span class="ow">in</span> <span class="n">cl</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>  <span class="c1"># extract curves</span>
                <span class="k">for</span> <span class="n">curve</span> <span class="ow">in</span> <span class="n">curve_tag_list</span><span class="p">:</span>
                    <span class="n">jj_curves</span> <span class="o">+=</span> <span class="p">[</span><span class="n">curve</span><span class="p">]</span>

        <span class="n">jj_df</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Distance&quot;</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumbers</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;CurvesList&quot;</span><span class="p">,</span> <span class="n">jj_curves</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;NumPointsPerCurve&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

        <span class="n">jj_tf</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Threshold&quot;</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="n">jj_tf</span><span class="p">,</span> <span class="s2">&quot;DistMin&quot;</span><span class="p">,</span> <span class="n">dist_min</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="n">jj_tf</span><span class="p">,</span> <span class="s2">&quot;DistMax&quot;</span><span class="p">,</span> <span class="n">dist_max</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="n">jj_tf</span><span class="p">,</span> <span class="s2">&quot;Sigmoid&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="n">jj_tf</span><span class="p">,</span> <span class="s2">&quot;InField&quot;</span><span class="p">,</span> <span class="n">jj_df</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="n">jj_tf</span><span class="p">,</span> <span class="s2">&quot;SizeMin&quot;</span><span class="p">,</span> <span class="n">min_mesh_size_jj</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="n">jj_tf</span><span class="p">,</span> <span class="s2">&quot;SizeMax&quot;</span><span class="p">,</span> <span class="n">max_mesh_size</span><span class="p">)</span>
        <span class="n">thresh_fields</span> <span class="o">+=</span> <span class="p">[</span><span class="n">jj_tf</span><span class="p">]</span>

        <span class="n">min_field</span> <span class="o">=</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Min&quot;</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setNumbers</span><span class="p">(</span><span class="n">min_field</span><span class="p">,</span> <span class="s2">&quot;FieldsList&quot;</span><span class="p">,</span> <span class="n">thresh_fields</span><span class="p">)</span>

        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">setAsBackgroundMesh</span><span class="p">(</span><span class="n">min_field</span><span class="p">)</span>

        <span class="n">gmsh</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="s2">&quot;Mesh.MeshSizeExtendFromBoundary&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.define_mesh_properties">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.define_mesh_properties">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">define_mesh_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Define properties for mesh depending on renderer options.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">min_mesh_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">][</span><span class="s2">&quot;min_size&quot;</span><span class="p">])</span>
        <span class="n">max_mesh_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_units_gmsh</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">][</span><span class="s2">&quot;max_size&quot;</span><span class="p">])</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="s2">&quot;Mesh.MeshSizeFromCurvature&quot;</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">][</span><span class="s2">&quot;nodes_per_2pi_curve&quot;</span><span class="p">])</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="s2">&quot;Mesh.Smoothing&quot;</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">][</span><span class="s2">&quot;smoothing&quot;</span><span class="p">])</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="s2">&quot;Mesh.Algorithm3D&quot;</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">][</span><span class="s2">&quot;algorithm_3d&quot;</span><span class="p">])</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="s2">&quot;General.NumThreads&quot;</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">][</span><span class="s2">&quot;num_threads&quot;</span><span class="p">])</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="s2">&quot;Mesh.MeshSizeMin&quot;</span><span class="p">,</span> <span class="n">min_mesh_size</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="s2">&quot;Mesh.MeshSizeMax&quot;</span><span class="p">,</span> <span class="n">max_mesh_size</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.add_mesh">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.add_mesh">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_mesh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">dim</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
                 <span class="n">intelli_mesh</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">custom_mesh_fn</span><span class="p">:</span> <span class="nb">callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate mesh for all geometries.</span>

<span class="sd">        Args:</span>
<span class="sd">            dim (int, optional): Specify the dimension of mesh. Defaults to 3.</span>
<span class="sd">            intelli_mesh (bool): Set to mesh the geometries intelligently. True by default.</span>
<span class="sd">            custom_mesh_fn (callable): Custom meshing function specifying mesh size fields</span>
<span class="sd">                                        using Gmsh python script (for advanced users only)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">intelli_mesh</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">custom_mesh_fn</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">define_mesh_size_fields</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Applying custom meshing function...&quot;</span><span class="p">)</span>
                <span class="n">custom_mesh_fn</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">define_mesh_properties</span><span class="p">()</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="n">dim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_mesh_color</span><span class="p">()</span></div>


<div class="viewcode-block" id="QGmshRenderer.assign_mesh_color">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.assign_mesh_color">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">assign_mesh_color</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assign mesh color according to the type of layer specified by</span>
<span class="sd">        self.layer_types and colors taken from self._options as provided by the user.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">color_dict</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">color</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">r</span><span class="o">=</span><span class="n">color</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">g</span><span class="o">=</span><span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span><span class="n">color</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">a</span><span class="o">=</span><span class="n">color</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">metal_color</span> <span class="o">=</span> <span class="n">color_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;colors&quot;</span><span class="p">][</span><span class="s2">&quot;metal&quot;</span><span class="p">])</span>
        <span class="n">jj_color</span> <span class="o">=</span> <span class="n">color_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;colors&quot;</span><span class="p">][</span><span class="s2">&quot;jj&quot;</span><span class="p">])</span>
        <span class="n">dielectric_color</span> <span class="o">=</span> <span class="n">color_dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;colors&quot;</span><span class="p">][</span><span class="s2">&quot;dielectric&quot;</span><span class="p">])</span>
        <span class="n">valid_layers</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
            <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">paths_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polys_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>

        <span class="c1"># Assign mesh color to dielectric layer</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">layer</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_types</span><span class="p">[</span><span class="s2">&quot;dielectric&quot;</span><span class="p">]:</span>
                <span class="k">continue</span>

            <span class="n">thickness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_for_layer_datatype</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

            <span class="n">layer_tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span>
            <span class="n">layer_dim</span> <span class="o">=</span> <span class="mi">3</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">thickness</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">2</span>
            <span class="k">if</span> <span class="n">layer_dim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">layer_sfs</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">vol</span> <span class="ow">in</span> <span class="n">layer_tags</span><span class="p">:</span>
                    <span class="n">layer_sfs</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">getSurfaceLoops</span><span class="p">(</span><span class="n">vol</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setColor</span><span class="p">([(</span><span class="mi">3</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">layer_tags</span><span class="p">],</span>
                                    <span class="o">**</span><span class="n">dielectric_color</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">layer_sfs</span> <span class="o">=</span> <span class="n">layer_tags</span>

            <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setColor</span><span class="p">([(</span><span class="mi">2</span><span class="p">,</span> <span class="n">sf</span><span class="p">)</span> <span class="k">for</span> <span class="n">sf</span> <span class="ow">in</span> <span class="n">layer_sfs</span><span class="p">],</span>
                                <span class="o">**</span><span class="n">dielectric_color</span><span class="p">)</span>

        <span class="c1"># Assign colors to geometries and metal (ground plane) layers</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_types</span><span class="p">[</span><span class="s2">&quot;dielectric&quot;</span><span class="p">]:</span>
                <span class="k">continue</span>

            <span class="n">thickness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_for_layer_datatype</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">valid_layers</span><span class="p">:</span>
                <span class="n">metal_vols</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">metal_surfs</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">metal_dicts</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polys_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">paths_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">])</span>

                <span class="c1"># Component geomtries</span>
                <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">metal_dicts</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">geoms</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">thickness</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">metal_vols</span> <span class="o">+=</span> <span class="n">geoms</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">metal_surfs</span> <span class="o">+=</span> <span class="n">geoms</span>

                <span class="c1"># Metal layers</span>
                <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">thickness</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">metal_vols</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">metal_surfs</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span>

                <span class="k">for</span> <span class="n">vol</span> <span class="ow">in</span> <span class="n">metal_vols</span><span class="p">:</span>
                    <span class="n">metal_surfs</span> <span class="o">+=</span> <span class="p">[</span>
                        <span class="n">surf</span>
                        <span class="k">for</span> <span class="n">surf</span> <span class="ow">in</span> <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">occ</span><span class="o">.</span><span class="n">getSurfaceLoops</span><span class="p">(</span><span class="n">vol</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="p">]</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">metal_vols</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setColor</span><span class="p">([(</span><span class="mi">3</span><span class="p">,</span> <span class="n">metal</span><span class="p">)</span> <span class="k">for</span> <span class="n">metal</span> <span class="ow">in</span> <span class="n">metal_vols</span><span class="p">],</span>
                                        <span class="o">**</span><span class="n">metal_color</span><span class="p">)</span>
                <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setColor</span><span class="p">([(</span><span class="mi">2</span><span class="p">,</span> <span class="n">metal</span><span class="p">)</span> <span class="k">for</span> <span class="n">metal</span> <span class="ow">in</span> <span class="n">metal_surfs</span><span class="p">],</span>
                                    <span class="o">**</span><span class="n">metal_color</span><span class="p">)</span>

                <span class="c1"># Junctions</span>
                <span class="n">jj_surfs</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">surf</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">juncs_dict</span><span class="p">[</span><span class="n">layer</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">jj_surfs</span> <span class="o">+=</span> <span class="n">surf</span>

                <span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setColor</span><span class="p">([(</span><span class="mi">2</span><span class="p">,</span> <span class="n">jj</span><span class="p">)</span> <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="n">jj_surfs</span><span class="p">],</span> <span class="o">**</span><span class="n">jj_color</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.launch_gui">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.launch_gui">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">launch_gui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Launch Gmsh GUI for viewing the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isometric_projection</span><span class="p">()</span>  <span class="c1"># set isometric projection</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">gmsh</span><span class="o">.</span><span class="n">fltk</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Encountered an error while launching the Gmsh GUI. Retrying to launch the GUI...&quot;</span>
            <span class="p">)</span>
            <span class="n">gmsh</span><span class="o">.</span><span class="n">fltk</span><span class="o">.</span><span class="n">run</span><span class="p">()</span></div>


<div class="viewcode-block" id="QGmshRenderer.export_mesh">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.export_mesh">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">export_mesh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">scaling_factor</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1e-3</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Export mesh from Gmsh into a file.</span>
<span class="sd">        Supported formats: (.msh, .msh2, .mesh).</span>

<span class="sd">        Args:</span>
<span class="sd">            filepath (str): path of the file to export mesh to.</span>
<span class="sd">            scaling_factor (float): specify a scaling factor for the mesh. Defaults to 1e-3.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">valid_file_exts</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;msh&quot;</span><span class="p">,</span> <span class="s2">&quot;msh2&quot;</span><span class="p">,</span> <span class="s2">&quot;mesh&quot;</span><span class="p">]</span>
        <span class="n">file_ext</span> <span class="o">=</span> <span class="n">filepath</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">file_ext</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">valid_file_exts</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;RENDERER ERROR: filename needs to have a .msh extension. Exporting failed.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
        <span class="n">par_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">par_dir</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Directory not found: </span><span class="si">{</span><span class="n">par_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">gmsh</span><span class="o">.</span><span class="n">option</span><span class="o">.</span><span class="n">setNumber</span><span class="p">(</span><span class="s2">&quot;Mesh.ScalingFactor&quot;</span><span class="p">,</span> <span class="n">scaling_factor</span><span class="p">)</span>
        <span class="n">gmsh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.export_geo_unrolled">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.export_geo_unrolled">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">export_geo_unrolled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Export the Gmsh geometry as geo_unrolled file.</span>
<span class="sd">        Supported formats: .geo_unrolled</span>

<span class="sd">        Args:</span>
<span class="sd">            filepath (str): path of the file to export geometry to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">valid_file_exts</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;geo_unrolled&quot;</span><span class="p">]</span>
        <span class="n">file_ext</span> <span class="o">=</span> <span class="n">filepath</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">file_ext</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">valid_file_exts</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;RENDERER ERROR: filename needs to have a .geo_unrolled extension. Exporting failed.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
        <span class="n">par_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">par_dir</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Directory not found: </span><span class="si">{</span><span class="n">par_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">has_mesh</span> <span class="o">=</span> <span class="kc">False</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gmsh</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">list</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">has_mesh</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;WARNING: The existing model contains mesh size field definitions, &quot;</span>
                <span class="s2">&quot;which will show up in your exported .geo_unrolled file. If &quot;</span>
                <span class="s2">&quot;you aren&#39;t explicitly handling the mesh size fields, we recommend &quot;</span>
                <span class="s2">&quot;to export the geometry before generating the mesh in your design as &quot;</span>
                <span class="s2">&quot;it might interfere with your .geo_unrolled file imports.&quot;</span><span class="p">)</span>

        <span class="n">gmsh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>

        <span class="c1"># Prepend &quot;SetFactory(&quot;OpenCASCADE&quot;);&quot; in the exported file</span>
        <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;SetFactory(&quot;OpenCASCADE&quot;);&#39;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;r+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\r\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">content</span><span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.import_post_processing_data">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.import_post_processing_data">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">import_post_processing_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                    <span class="n">launch_gui</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                                    <span class="n">close_gmsh_on_closing_gui</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Import the post processing data for visualization in Gmsh.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str): a target file ending with &#39;.msh&#39; extension</span>
<span class="sd">            launch_gui (bool): launch the Gmsh GUI. Defaults to True.</span>
<span class="sd">            close_gmsh_on_closing_gui (bool): finalize gmsh when the GUI</span>
<span class="sd">                                                is closed. Defaults to True.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: raises when the input file isn&#39;t a .msh file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;.msh&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Only .msh files supported for post processing views.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;post_processing&quot;</span>

        <span class="n">gmsh</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">launch_gui</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">launch_gui</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">close_gmsh_on_closing_gui</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="QGmshRenderer.save_screenshot">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.save_screenshot">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">save_screenshot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save the screenshot.</span>

<span class="sd">        Args:</span>
<span class="sd">            path (str, optional): Path to save location.  Defaults to None.</span>
<span class="sd">            show (bool, optional): Whether or not to display the screenshot. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">valid_file_exts</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span> <span class="s2">&quot;gif&quot;</span><span class="p">,</span> <span class="s2">&quot;bmp&quot;</span><span class="p">]</span>
        <span class="n">file_ext</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">file_ext</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">valid_file_exts</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Expected png, jpg, bmp, or gif format, got .</span><span class="si">{</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># FIXME: This doesn&#39;t work right now!!! Active issue: #843</span>
        <span class="c1"># There is no method in Gmsh python wrapper to give</span>
        <span class="c1"># the &#39;Print&#39; command which can provide screenshot feature.</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;This feature is pending and depends on Gmsh</span>
<span class="s2">                                    general command &#39;Print&#39; being available through the API.&quot;&quot;&quot;</span>
                                 <span class="p">)</span></div>


<div class="viewcode-block" id="QGmshRenderer.render_component">
<a class="viewcode-back" href="../../../../apidocs/qiskit_metal.renderers.QGmshRenderer.html#qiskit_metal.renderers.QGmshRenderer.render_component">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render_component</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component</span><span class="p">):</span>
        <span class="k">pass</span></div>
</div>

</pre></div>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; Quantum Metal Community; 2019-2025 Qiskit Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 2025/12/12</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../../../_static/documentation_options.js?v=f20ee9a7"></script>
    <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../../../../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>