<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../../genindex.html" /><link rel="search" title="Search" href="../../../../search.html" />

    <!-- Generated with Sphinx 7.3.7 and Furo 2024.01.29 -->
        <title>qiskit_metal.renderers.renderer_ansys.ansys_renderer - Qiskit Metal 0.1.5 0.1.5</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=362ab14a" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/qiskit-sphinx-theme.css?v=fe84956c" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/qiskit-ecosystem.css?v=745c5aa7" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet">
<script src="../../../../_static/js/web-components/top-nav-bar.js"></script></head>
  <body>
    
    <script>document.body.dataset.theme = "light";</script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
      <defs><style>.cls-1{fill:none;}</style></defs>
      <path d="M28,4H4A2,2,0,0,0,2,6V26a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V6A2,2,0,0,0,28,4ZM4,6H20V26H4ZM28,26H22V6h6Z"/>
      <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
      <defs><style>.cls-1{fill:none;}</style></defs>
      <rect x="4" y="6" width="24" height="2"/>
      <rect x="4" y="24" width="24" height="2"/>
      <rect x="4" y="12" width="24" height="2"/>
      <rect x="4" y="18" width="24" height="2"/>
      <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg version="1.1" id="icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
         viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve"><polygon points="22,16 12,26 10.6,24.6 19.2,16 10.6,7.4 12,6 " stroke="currentColor"/>
      <rect id="_x3C_Transparent_Rectangle_x3E_" fill="none" width="32" height="32"/>
    </svg>
  </symbol>
  <symbol id="svg-new-tab" viewBox="0 0 32 32">
    <svg id="icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
      <defs>
        <style>
          .cls-1 {
            fill: none;
          }
        </style>
      </defs>
      <path fill="#6929C4" d="M26,28H6a2.0027,2.0027,0,0,1-2-2V6A2.0027,2.0027,0,0,1,6,4H16V6H6V26H26V16h2V26A2.0027,2.0027,0,0,1,26,28Z"/>
      <polygon fill="#6929C4" points="20 2 20 4 26.586 4 18 12.586 19.414 14 28 5.414 28 12 30 12 30 2 20 2"/>
      <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../../index.html"><div class="brand">Qiskit Metal 0.1.5 0.1.5</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-brand">
  <a href="https://www.qiskit.org/ecosystem">
    <div class="sidebar-logo-container">
      <img class="sidebar-logo" src="../../../../_static/images/ecosystem-logo.svg" alt="Qiskit Ecosystem logo"/>
    </div>
  </a>
  
  <span class="sidebar-brand-text">Qiskit Metal 0.1.5 0.1.5</span>
</div><form class="sidebar-search-container" method="get" action="../../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Installing Qiskit Metal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../workflow.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../workflow.html#qiskit-metal-workflow">Qiskit Metal Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../workflow.html#quantization-methods-overview">Quantization Methods Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributor Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributor-guide.html">Contributing to Qiskit Metal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributor-guide.html#where-things-are">Where Things Are</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributor-guide.html#reporting-bugs-and-requesting-enhancements">Reporting Bugs and Requesting Enhancements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributor-guide.html#contributing-code">Contributing Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributor-guide.html#contributing-to-documentation">Contributing to Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../tut/index.html">Overview</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Overview</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/1-Overview/1.1-Bird%27s-eye-view-of-Qiskit-Metal.html">Bird’s eye view of Qiskit Metal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/1-Overview/1.1-Bird%27s-eye-view-of-Qiskit-Metal.html#Coding-Time!">Coding Time!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/1-Overview/1.2-Quick-start.html">Quick start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/1-Overview/1.3-Saving-Your-Chip-Design.html">Save your chip design</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../tut/index.html#components">Components</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Components</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html">How to use a QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html#QComponent-Default-Options">QComponent Default Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html#Modifying-the-Options">Modifying the Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html#Copying-a-QComponent">Copying a QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html#Deleting-a-QComponent">Deleting a QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html#Renaming-a-QComponent">Renaming a QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html#Overwriting-a-QComponent">Overwriting a QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.01-How-to-use-a-QComponent.html#Closing-the-Qiskit-Metal-GUI">Closing the Qiskit Metal GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.02-How-to-copy-a-QComponent.html">How to copy a QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.11-Routing-101.html">Routing 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.12-Simple-Meander.html">Simple Meander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.12-Simple-Meander.html#Using-CPW-meanders-to-connect-the-3-Qbits">Using CPW meanders to connect the 3 Qbits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.13-Hybrid-Auto-and-AStar.html">Hybrid Auto and AStar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.14-Get-them-all-with-MixedRoute.html">Get them all with MixedRoute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.21-Design-a-4-qubit-full-chip.html">Design a 4 qubit full chip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.22-Design-100-qubits-programmatically.html">Design 100 qubits programmatically</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.23-Modify-chip-options.html">Modify chip options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.31-Create-a-QComponent-Basic.html">Create a QComponent - Basic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.32-Create-a-QComponent-Advanced.html">Create a QComponent - Advanced</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/2-From-components-to-chip/2.33-Add-my-QComponent-to-a-reusable-python-file.html">Add my QComponent to a reusable python file</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../tut/index.html#renderers">Renderers</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Renderers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/3-Renderers/3.1-Introduction-to-QRenderers.html">Introduction to QRenderers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/3-Renderers/3.1-Introduction-to-QRenderers.html#Note:">Note:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/3-Renderers/3.2-Export-your-design-to-GDS.html">Export your design to GDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/3-Renderers/3.3-Render-your-design-to-Ansys.html">Render your design to Ansys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/3-Renderers/3.4-How-do-I-make-my-custom-QRenderer.html">How do I make my custom QRenderer</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../tut/index.html#analysis">Analysis</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Analysis</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.01-Capacitance-and-LOM.html">Capacitance matrix and LOM analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.02-Eigenmode-and-EPR.html">Eigenmode and EPR analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.02-Eigenmode-and-EPR.html#1.-Analyze-the-transmon-qubit-by-itself">1. Analyze the transmon qubit by itself</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.02-Eigenmode-and-EPR.html#2.-Analyze-the-CPW-resonator-by-itself">2. Analyze the CPW resonator by itself</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.02-Eigenmode-and-EPR.html#3.-Analyze-the-combined-transmon-+-CPW-resonator-system">3. Analyze the combined transmon + CPW resonator system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.02-Eigenmode-and-EPR.html#4.-Analyze-a-coupled-2-transmon-system">4. Analyze a coupled 2-transmon system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.03-Impedance.html">Impedance, admittance and scattering analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.11-Analyze-and-tune-a-transmon.html">Analyzing and tuning a transmon qubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.11-Analyze-and-tune-a-transmon.html#1.-Create-the-Qbit-design">1. Create the Qbit design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.11-Analyze-and-tune-a-transmon.html#2.-Analyze-the-transmon-using-the-Eigenmode-EPR-method">2. Analyze the transmon using the Eigenmode-EPR method</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.11-Analyze-and-tune-a-transmon.html#3.-Analyze-the-transmon-using-the-LOM-method">3. Analyze the transmon using the LOM method</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.12-Analyze-a-resonator.html">Analyzing and tuning a resonator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.12-Analyze-a-resonator.html#1.-Create-the-Resonator-design">1. Create the Resonator design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.12-Analyze-a-resonator.html#2.-Analyze-the-resonator-using-the-Eigenmode-EPR-method">2. Analyze the resonator using the Eigenmode-EPR method</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.13-Analyze-transmon-and-resonator.html">Analyzing and tuning a transmon qubit with a resonator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.13-Analyze-transmon-and-resonator.html#1.-Create-the-Qbit-design">1. Create the Qbit design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.13-Analyze-transmon-and-resonator.html#2.-Analyze-the-transmon-&amp;-resonator-using-the-Eigenmode-EPR-method">2. Analyze the transmon &amp; resonator using the Eigenmode-EPR method</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.13-Analyze-transmon-and-resonator.html#3.-Analyze-the-transmon-using-the-LOM-method">3. Analyze the transmon using the LOM method</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.14-Analyze-a-double-hanger-resonator.html">Analyzing a double hanger resonator (S Param)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.15-CPW-kappa-calculation.html">CPW Kappa Calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.21-Capacitance-matrix.html">Sweeps - Capacitance matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.21-Capacitance-matrix.html#READ-THIS-BEFORE-running-the-cell.">READ THIS BEFORE running the cell.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.22-Eigenmode-matrix.html">Sweeps - Eigenmode matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.23-Impedance-and-scattering-Z-S-Y-matrices.html">Sweeps - Impedance, scattering and admittance (Z S Y) matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.31-Plot-quantum-oscillator-wavefunction.html">Plotting Wavefunctions of the Quantum Harmonic Oscillator (LC Circuit)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.32-Transmon-analytics-HCPB.html">Transmon Analytics: Plotting Eigenvalues as a Function of Offset Charge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.33-Transmon-analytics.html">Transmon Analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.34-Transmon-qubit-CPB-hamiltonian-charge-basis.html">Modeling transmon qubit Cooper-pair box Hamiltonian in the charge basis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.34-Transmon-qubit-CPB-hamiltonian-charge-basis.html#Additional-Analysis:-Charge-Dispersion,-Energy-Level-Differences,-Anharmonicity-and-Dephasing-Time-(T2)">Additional Analysis: Charge Dispersion, Energy Level Differences, Anharmonicity and Dephasing Time (T2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.34-Transmon-qubit-CPB-hamiltonian-charge-basis.html#Qutip-simulation">Qutip simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.34-Transmon-qubit-CPB-hamiltonian-charge-basis.html#Experimental">Experimental</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.34-Transmon-qubit-CPB-hamiltonian-charge-basis.html#New-section-on-integrating-sc_qubits.">New section on integrating sc_qubits.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/4-Analysis/4.34-Transmon-qubit-CPB-hamiltonian-charge-basis.html#Transmon-and-the-Oscillator">Transmon and the Oscillator</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../tut/index.html#quick-topics">Quick Topics</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Quick Topics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/quick-topics/JJ-Demo-Notebook.html">Josephson Junction QComponent Demo Notebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/quick-topics/Managing-pins.html">Managing pins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/quick-topics/Managing-variables.html">Managing variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/quick-topics/Opening-documentation.html">Opening the documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/quick-topics/QComponent-3-fingers-capacitor.html">QComponent - 3-fingers capacitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../tut/quick-topics/QComponent-Interdigitated-transmon.html">QComponent - Interdigitated transmon qubit</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://www.youtube.com/playlist?list=PLOFEBzvs-VvqHl5ZqVmhB_FcSqmLufsjb">Video Recordings</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Circuit Example Library</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../circuit-examples/index.html">Qubits</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Qubits</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/01-Transmon_cross.html">Single Transmon - Grounded (xmon)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/02-Transmon_floating.html">Single Transmon - Floating</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/03-concentric_transmon.html">Concentric Transmon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/04-Interdigitated_Transmon.html">Interdigitated Transmon Qubits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/05-Transmon_cross_fl.html">Single Transmon - Grounded (xmon) flux lines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/06-Transmon_floating_6.html">Single Transmon - Floating with 6 connection pads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/07-Transmon_floating_cl.html">Single Transmon - Floating with charge lines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/08-JJ-Dolan.html">Josephson Junction (Dolan)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/09-JJ-Manhattan.html">Josephson Junction (Manhattan)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/10-Transmon_floating_teeth.html">Single Transmon - Floating with teeth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/11-Star_shaped_qubit.html">Star shaped qubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/11-Star_shaped_qubit.html#A-Star-Qubit">A Star Qubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/A.Qubits/11-Star_shaped_qubit.html#Closing-the-Qiskit-Metal-GUI">Closing the Qiskit Metal GUI</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../circuit-examples/index.html#resonators">Resonators</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Resonators</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/B.Resonators/11-Resonator_Meander.html">Simple CPW Meander</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../circuit-examples/index.html#composite-bi-partite-systems">Composite Bi-Partite Systems</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Composite Bi-Partite Systems</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/C.Composite-bi-partite/21-OneTransmonsWithMeanderAndOTG.html">Transmon coupled to CPW resonator</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../circuit-examples/index.html#qubit-couplers">Qubit Couplers</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Qubit Couplers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/D.Qubit-couplers/31-TwoCrossmonsTunableCoupler.html">Tunable Coupler (MIT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/D.Qubit-couplers/32-TwoTransmonsDirectCoupling.html">Direct Coupler (transmon-transmon)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/D.Qubit-couplers/33-TwoTransmonsWithMeander.html">Bus Resonator Coupler (transmon-transmon)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../circuit-examples/index.html#input-output-coupling">Input-Output Coupling</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Input-Output Coupling</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/E.Input-output-coupling/41-LaunchPad.html">CPW Launch Pad</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/E.Input-output-coupling/42-ResonatorAndLaunchPad.html">Readout line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/E.Input-output-coupling/43-TransmonPocketCL.html">Charge Line</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../circuit-examples/index.html#small-quantum-chips">Small Quantum Chips</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Small Quantum Chips</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/F.Small-quantum-chips/51-Four_qubit_chip.html">Four Qubit Chip Design</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../circuit-examples/index.html#design-flow">Design Flow</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Design Flow</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/full-design-flow-examples/Example-full-chip-design.html">Example full chip design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/full-design-flow-examples/Example-full-chip-design.html#Layout">Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/full-design-flow-examples/Example-full-chip-design.html#Analyze">Analyze</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/full-design-flow-examples/Example-used-in-the-launch-video.html">Launch Videos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../circuit-examples/full-design-flow-examples/Exercise-for-the-South-Korea-Hackathon%2720.html">South Korea Qiskit Hackathon’20 - Qiskit Metal exercise</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Libraries</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/qlibrary.html">All Quantum Devices</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of All Quantum Devices</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.qlibrary.QComponent.html">QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.qlibrary.ParsedDynamicAttributes_Component.html">ParsedDynamicAttributes_Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.qlibrary.BaseQubit.html">BaseQubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.qlibrary.QRoute.html">QRoute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.qlibrary.QRouteLead.html">QRouteLead</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.qlibrary.QRoutePoint.html">QRoutePoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CircleCaterpillar.html">CircleCaterpillar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CircleRaster.html">CircleRaster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.NGon.html">NGon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.NSquareSpiral.html">NSquareSpiral</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.Rectangle.html">Rectangle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RectangleHollow.html">RectangleHollow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.Cap3Interdigital.html">Cap3Interdigital</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CapNInterdigital.html">CapNInterdigital</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ResonatorCoilRect.html">ResonatorCoilRect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CoupledLineTee.html">CoupledLineTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LineTee.html">LineTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CapNInterdigitalTee.html">CapNInterdigitalTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TunableCoupler01.html">TunableCoupler01</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TunableCoupler02.html">TunableCoupler02</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ReadoutResFC.html">ReadoutResFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ResonatorLumped.html">ResonatorLumped</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebond.html">LaunchpadWirebond</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebondCoupled.html">LaunchpadWirebondCoupled</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebondDriven.html">LaunchpadWirebondDriven</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.OpenToGround.html">OpenToGround</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ShortToGround.html">ShortToGround</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteStraight.html">RouteStraight</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteFramed.html">RouteFramed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteMeander.html">RouteMeander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteAnchors.html">RouteAnchors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteMixed.html">RouteMixed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RoutePathfinder.html">RoutePathfinder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.jj_dolan.html">jj_dolan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.jj_manhattan.html">jj_manhattan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonConcentric.html">TransmonConcentric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonConcentricType2.html">TransmonConcentricType2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonCross.html">TransmonCross</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonCrossFL.html">TransmonCrossFL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonInterdigitated.html">TransmonInterdigitated</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocket.html">TransmonPocket</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocketCL.html">TransmonPocketCL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocket6.html">TransmonPocket6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocketTeeth.html">TransmonPocketTeeth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TunableCoupler01.html">TunableCoupler01</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.SQUID_LOOP.html">SQUID_LOOP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.StarQubit.html">StarQubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.anchored_path.html">anchored_path</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../overview.html">Overview</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/designs.html">QDesigns</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of QDesigns</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.designs.QDesign.html">QDesign</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.designs.DesignPlanar.html">DesignPlanar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.designs.MultiPlanar.html">MultiPlanar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.designs.DesignFlipChip.html">DesignFlipChip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.designs.QNet.html">QNet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.designs.Components.html">Components</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/qlibrary.html">QComponents</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of QComponents</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.qlibrary.QComponent.html">QComponent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.qlibrary.ParsedDynamicAttributes_Component.html">ParsedDynamicAttributes_Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.qlibrary.BaseQubit.html">BaseQubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.qlibrary.QRoute.html">QRoute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.qlibrary.QRouteLead.html">QRouteLead</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.qlibrary.QRoutePoint.html">QRoutePoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CircleCaterpillar.html">CircleCaterpillar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CircleRaster.html">CircleRaster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.NGon.html">NGon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.NSquareSpiral.html">NSquareSpiral</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.Rectangle.html">Rectangle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RectangleHollow.html">RectangleHollow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.Cap3Interdigital.html">Cap3Interdigital</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CapNInterdigital.html">CapNInterdigital</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ResonatorCoilRect.html">ResonatorCoilRect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CoupledLineTee.html">CoupledLineTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LineTee.html">LineTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.CapNInterdigitalTee.html">CapNInterdigitalTee</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TunableCoupler01.html">TunableCoupler01</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TunableCoupler02.html">TunableCoupler02</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ReadoutResFC.html">ReadoutResFC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ResonatorLumped.html">ResonatorLumped</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebond.html">LaunchpadWirebond</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebondCoupled.html">LaunchpadWirebondCoupled</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.LaunchpadWirebondDriven.html">LaunchpadWirebondDriven</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.OpenToGround.html">OpenToGround</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.ShortToGround.html">ShortToGround</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteStraight.html">RouteStraight</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteFramed.html">RouteFramed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteMeander.html">RouteMeander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteAnchors.html">RouteAnchors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RouteMixed.html">RouteMixed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.RoutePathfinder.html">RoutePathfinder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.jj_dolan.html">jj_dolan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.jj_manhattan.html">jj_manhattan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonConcentric.html">TransmonConcentric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonConcentricType2.html">TransmonConcentricType2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonCross.html">TransmonCross</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonCrossFL.html">TransmonCrossFL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonInterdigitated.html">TransmonInterdigitated</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocket.html">TransmonPocket</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocketCL.html">TransmonPocketCL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocket6.html">TransmonPocket6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TransmonPocketTeeth.html">TransmonPocketTeeth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.TunableCoupler01.html">TunableCoupler01</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.SQUID_LOOP.html">SQUID_LOOP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.StarQubit.html">StarQubit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.qlibrary.anchored_path.html">anchored_path</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/analyses.html">Analyses</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of Analyses</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.QAnalysis.html">QAnalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.QSimulation.html">QSimulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.Hcpb.html">Hcpb</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.Hcpb_analytic.html">Hcpb_analytic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.HO_wavefunctions.html">HO_wavefunctions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.transmon_analytics.html">transmon_analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.cpw_calculations.html">cpw_calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.kappa_calculation.html">kappa_calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.Sweeper.html">Sweeper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.LOManalysis.html">LOManalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.EPRanalysis.html">EPRanalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.lumped_capacitive.html">lumped_capacitive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.LumpedElementsSim.html">LumpedElementsSim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.EigenmodeSim.html">EigenmodeSim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../apidocs/qiskit_metal.analyses.ScatteringImpedanceSim.html">ScatteringImpedanceSim</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/renderers.html">QRenderes</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of QRenderes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.QRenderer.html">QRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.QRendererGui.html">QRendererGui</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.QRendererAnalysis.html">QRendererAnalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.PlotCanvas.html">PlotCanvas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.MplInteraction.html">MplInteraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.ZoomOnWheel.html">ZoomOnWheel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.PanAndZoom.html">PanAndZoom</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.QMplRenderer.html">QMplRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.AnimatedText.html">AnimatedText</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.QGDSRenderer.html">QGDSRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.Cheesing.html">Cheesing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html">QAnsysRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.QHFSSRenderer.html">QHFSSRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.QQ3DRenderer.html">QQ3DRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.QPyaedt.html">QPyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.QQ3DPyaedt.html">QQ3DPyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.QHFSSPyaedt.html">QHFSSPyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.QHFSSDrivenmodalPyaedt.html">QHFSSDrivenmodalPyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.QHFSSEigenmodePyaedt.html">QHFSSEigenmodePyaedt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.QGmshRenderer.html">QGmshRenderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.renderers.Vec3DArray.html">Vec3DArray</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/toolbox_metal.html">Toolbox</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Toolbox</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.toolbox_metal.QiskitMetalExceptions.html">QiskitMetalExceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.toolbox_metal.QiskitMetalDesignError.html">QiskitMetalDesignError</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.toolbox_metal.about.html">about</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.toolbox_metal.import_export.html">import_export</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.toolbox_metal.math_and_overrides.html">math_and_overrides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.toolbox_metal.parsing.html">parsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.toolbox_metal.layer_stack_handler.html">layer_stack_handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.toolbox_metal.bounds_for_path_and_poly_tables.html">bounds_for_path_and_poly_tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.toolbox_metal.determine_larger_box.html">determine_larger_box</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/qgeometries.html">QGeometry</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of QGeometry</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal.qgeometries.QGeometryTables.html">QGeometryTables</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../../apidocs/gui.html">GUI</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of GUI</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../stubs/qiskit_metal._gui.MetalGUI.html">MetalGUI</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Qiskit/qiskit/blob/master/CODE_OF_CONDUCT.md">Code of Conduct</a></li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <h1>Source code for qiskit_metal.renderers.renderer_ansys.ansys_renderer</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># This code is part of Qiskit.</span>
<span class="c1">#</span>
<span class="c1"># (C) Copyright IBM 2017, 2021.</span>
<span class="c1">#</span>
<span class="c1"># This code is licensed under the Apache License, Version 2.0. You may</span>
<span class="c1"># obtain a copy of this license in the LICENSE.txt file in the root directory</span>
<span class="c1"># of this source tree or at http://www.apache.org/licenses/LICENSE-2.0.</span>
<span class="c1">#</span>
<span class="c1"># Any modifications or derivative works of this code must retain this</span>
<span class="c1"># copyright notice, and modified files need to carry a notice indicating</span>
<span class="c1"># that they have been altered from the originals.</span>
<span class="c1"># pylint: disable=too-many-lines</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">geopandas</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">numpy.linalg</span> <span class="kn">import</span> <span class="n">norm</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="kn">from</span> <span class="nn">platform</span> <span class="kn">import</span> <span class="n">system</span>
<span class="kn">from</span> <span class="nn">scipy.spatial</span> <span class="kn">import</span> <span class="n">distance</span>

<span class="kn">import</span> <span class="nn">shapely</span>
<span class="kn">import</span> <span class="nn">pyEPR</span> <span class="k">as</span> <span class="nn">epr</span>
<span class="kn">from</span> <span class="nn">pyEPR.ansys</span> <span class="kn">import</span> <span class="n">parse_units</span><span class="p">,</span> <span class="n">HfssApp</span><span class="p">,</span> <span class="n">release</span>

<span class="kn">from</span> <span class="nn">qiskit_metal.draw.utility</span> <span class="kn">import</span> <span class="n">to_vec3D</span>
<span class="kn">from</span> <span class="nn">qiskit_metal.draw.basic</span> <span class="kn">import</span> <span class="n">is_rectangle</span>
<span class="kn">from</span> <span class="nn">qiskit_metal.renderers.renderer_base</span> <span class="kn">import</span> <span class="n">QRendererAnalysis</span>
<span class="kn">from</span> <span class="nn">qiskit_metal.toolbox_metal.parsing</span> <span class="kn">import</span> <span class="n">is_true</span>
<span class="kn">from</span> <span class="nn">qiskit_metal.designs.design_base</span> <span class="kn">import</span> <span class="n">QDesign</span>

<span class="kn">from</span> <span class="nn">qiskit_metal</span> <span class="kn">import</span> <span class="n">Dict</span>

<span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">config</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">is_building_docs</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">qiskit_metal.toolbox_python.utility_functions</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">toggle_numbers</span><span class="p">,</span>
        <span class="n">bad_fillet_idxs</span><span class="p">,</span>
    <span class="p">)</span>


<span class="k">def</span> <span class="nf">good_fillet_idxs</span><span class="p">(</span><span class="n">coords</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
                     <span class="n">fradius</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                     <span class="n">precision</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
                     <span class="n">isclosed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get list of vertex indices in a linestring (isclosed = False) or polygon (isclosed = True)</span>
<span class="sd">    that can be filleted based on proximity to neighbors.</span>

<span class="sd">    Args:</span>
<span class="sd">        coords (list): Ordered list of tuples of vertex coordinates.</span>
<span class="sd">        fradius (float): User-specified fillet radius from QGeometry table.</span>
<span class="sd">        precision (int, optional): Digits of precision used for round(). Defaults to 9.</span>
<span class="sd">        isclosed (bool, optional): Boolean denoting whether the shape is a linestring or</span>
<span class="sd">            polygon. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: List of indices of vertices that can be filleted.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">isclosed</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">toggle_numbers</span><span class="p">(</span>
            <span class="n">bad_fillet_idxs</span><span class="p">(</span><span class="n">coords</span><span class="p">,</span> <span class="n">fradius</span><span class="p">,</span> <span class="n">precision</span><span class="p">,</span> <span class="n">isclosed</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">toggle_numbers</span><span class="p">(</span>
        <span class="n">bad_fillet_idxs</span><span class="p">(</span><span class="n">coords</span><span class="p">,</span> <span class="n">fradius</span><span class="p">,</span> <span class="n">precision</span><span class="p">,</span> <span class="n">isclosed</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">))[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">get_clean_name</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a valid variable name from the given one by removing having it</span>
<span class="sd">    begin with a letter or underscore followed by an unlimited string of</span>
<span class="sd">    letters, numbers, and underscores.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): Initial, possibly unusable, string to be modified.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Variable name consistent with Python naming conventions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Remove invalid characters</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;[^0-9a-zA-Z_]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="c1"># Remove leading characters until we find a letter or underscore</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;^[^a-zA-Z_]+&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">name</span>


<div class="viewcode-block" id="QAnsysRenderer">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer">[docs]</a>
<span class="k">class</span> <span class="nc">QAnsysRenderer</span><span class="p">(</span><span class="n">QRendererAnalysis</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extends QRenderer to export designs to Ansys using pyEPR. The methods</span>
<span class="sd">        which a user will need for Ansys export should be found within this class.</span>

<span class="sd">    Default Options:</span>
<span class="sd">        * Lj: &#39;10nH&#39; -- Lj has units of nanoHenries (nH)</span>
<span class="sd">        * Cj: 0 -- Cj *must* be 0 for pyEPR analysis! Cj has units of femtofarads (fF)</span>
<span class="sd">        * _Rj: 0 -- _Rj *must* be 0 for pyEPR analysis! _Rj has units of Ohms</span>
<span class="sd">        * max_mesh_length_jj: &#39;7um&#39; -- Maximum mesh length for Josephson junction elements</span>
<span class="sd">        * project_path: None -- Default project path; if None --&gt; get active</span>
<span class="sd">        * max_mesh_length_port: &#39;7um&#39; -- Maximum mesh length for Ports in Eigenmode Simulations</span>
<span class="sd">        * project_name: None -- Default project name</span>
<span class="sd">        * design_name: None -- Default design name</span>
<span class="sd">        * ansys_file_extension: &#39;.aedt&#39; -- Ansys file extension for 2016 version and newer</span>
<span class="sd">        * x_buffer_width_mm: 0.2 -- Buffer between max/min x and edge of ground plane, in mm</span>
<span class="sd">        * y_buffer_width_mm: 0.2 -- Buffer between max/min y and edge of ground plane, in mm</span>
<span class="sd">        * wb_threshold:&#39;400um&#39; -- the minimum distance between two vertices of a path for a</span>
<span class="sd">          wirebond to be added.</span>
<span class="sd">        * wb_offset:&#39;0um&#39; -- offset distance for wirebond placement (along the direction</span>
<span class="sd">          of the cpw)</span>
<span class="sd">        * wb_size: 3 -- scalar which controls the width of the wirebond (wb_size * path[&#39;width&#39;])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">#: Default options, over-written by passing ``options` dict to render_options.</span>
    <span class="c1">#: Type: Dict[str, str]</span>
    <span class="c1"># yapf: disable</span>
    <span class="n">default_options</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span>
        <span class="n">Lj</span><span class="o">=</span><span class="s1">&#39;10nH&#39;</span><span class="p">,</span>  <span class="c1"># Lj has units of nanoHenries (nH)</span>
        <span class="n">Cj</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>  <span class="c1"># Cj *must* be 0 for pyEPR analysis! Cj has units of femtofarads (fF)</span>
        <span class="n">_Rj</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>  <span class="c1"># _Rj *must* be 0 for pyEPR analysis! _Rj has units of Ohms</span>
        <span class="n">max_mesh_length_jj</span><span class="o">=</span><span class="s1">&#39;7um&#39;</span><span class="p">,</span>  <span class="c1"># maximum mesh length for Josephson junction elements</span>
        <span class="n">max_mesh_length_port</span><span class="o">=</span><span class="s1">&#39;7um&#39;</span><span class="p">,</span> <span class="c1"># maximum mesh length for Ports in Eigenmode Simulations</span>
        <span class="n">project_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># default project path; if None --&gt; get active</span>
        <span class="n">project_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># default project name</span>
        <span class="n">design_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># default design name</span>
        <span class="c1"># bounding_box_scale_x = 1.2, # Ratio of &#39;main&#39; chip width to bounding box width</span>
        <span class="c1"># bounding_box_scale_y = 1.2, # Ratio of &#39;main&#39; chip length to bounding box length</span>
        <span class="n">x_buffer_width_mm</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>  <span class="c1"># Buffer between max/min x and edge of ground plane, in mm</span>
        <span class="n">y_buffer_width_mm</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>  <span class="c1"># Buffer between max/min y and edge of ground plane, in mm</span>
        <span class="n">wb_threshold</span> <span class="o">=</span> <span class="s1">&#39;400um&#39;</span><span class="p">,</span>
        <span class="n">wb_offset</span> <span class="o">=</span> <span class="s1">&#39;0um&#39;</span><span class="p">,</span>
        <span class="n">wb_size</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
        <span class="n">plot_ansys_fields_options</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;NAME:Mag_E1&quot;</span><span class="p">,</span>
            <span class="n">UserSpecifyName</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span>
            <span class="n">UserSpecifyFolder</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span>
            <span class="n">QuantityName</span><span class="o">=</span> <span class="s2">&quot;Mag_E&quot;</span><span class="p">,</span>
            <span class="n">PlotFolder</span><span class="o">=</span> <span class="s2">&quot;E Field&quot;</span><span class="p">,</span>
            <span class="n">StreamlinePlot</span><span class="o">=</span> <span class="s2">&quot;False&quot;</span><span class="p">,</span>
            <span class="n">AdjacentSidePlot</span><span class="o">=</span> <span class="s2">&quot;False&quot;</span><span class="p">,</span>
            <span class="n">FullModelPlot</span><span class="o">=</span> <span class="s2">&quot;False&quot;</span><span class="p">,</span>
            <span class="n">IntrinsicVar</span><span class="o">=</span> <span class="s2">&quot;Phase=</span><span class="se">\&#39;</span><span class="s2">0deg</span><span class="se">\&#39;</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">PlotGeomInfo_0</span><span class="o">=</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="n">PlotGeomInfo_1</span><span class="o">=</span> <span class="s2">&quot;Surface&quot;</span><span class="p">,</span>
            <span class="n">PlotGeomInfo_2</span><span class="o">=</span> <span class="s2">&quot;FacesList&quot;</span><span class="p">,</span>
            <span class="n">PlotGeomInfo_3</span><span class="o">=</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Default options&quot;&quot;&quot;</span>
    <span class="c1"># yapf: enable</span>

    <span class="n">NAME_DELIM</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;_&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Name delimiter&quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;ansys&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Name&quot;&quot;&quot;</span>

    <span class="n">default_setup</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span>
        <span class="n">drivenmodal</span><span class="o">=</span><span class="n">Dict</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Setup&quot;</span><span class="p">,</span>
            <span class="n">freq_ghz</span><span class="o">=</span><span class="s2">&quot;5.0&quot;</span><span class="p">,</span>
            <span class="n">max_delta_s</span><span class="o">=</span><span class="s2">&quot;0.1&quot;</span><span class="p">,</span>
            <span class="n">max_passes</span><span class="o">=</span><span class="s2">&quot;10&quot;</span><span class="p">,</span>
            <span class="n">min_passes</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="n">min_converged</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="n">pct_refinement</span><span class="o">=</span><span class="s2">&quot;30&quot;</span><span class="p">,</span>
            <span class="n">basis_order</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">eigenmode</span><span class="o">=</span><span class="n">Dict</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Setup&quot;</span><span class="p">,</span>
            <span class="n">min_freq_ghz</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="n">n_modes</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="n">max_delta_f</span><span class="o">=</span><span class="s2">&quot;0.5&quot;</span><span class="p">,</span>
            <span class="n">max_passes</span><span class="o">=</span><span class="s2">&quot;10&quot;</span><span class="p">,</span>
            <span class="n">min_passes</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="n">min_converged</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="n">pct_refinement</span><span class="o">=</span><span class="s2">&quot;30&quot;</span><span class="p">,</span>
            <span class="n">basis_order</span><span class="o">=</span><span class="s2">&quot;-1&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">q3d</span><span class="o">=</span><span class="n">Dict</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Setup&quot;</span><span class="p">,</span>
            <span class="n">freq_ghz</span><span class="o">=</span><span class="s2">&quot;5.0&quot;</span><span class="p">,</span>
            <span class="n">save_fields</span><span class="o">=</span><span class="s2">&quot;False&quot;</span><span class="p">,</span>
            <span class="n">enabled</span><span class="o">=</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="n">max_passes</span><span class="o">=</span><span class="s2">&quot;15&quot;</span><span class="p">,</span>
            <span class="n">min_passes</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="p">,</span>
            <span class="n">min_converged_passes</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="p">,</span>
            <span class="n">percent_error</span><span class="o">=</span><span class="s2">&quot;0.5&quot;</span><span class="p">,</span>
            <span class="n">percent_refinement</span><span class="o">=</span><span class="s2">&quot;30&quot;</span><span class="p">,</span>
            <span class="n">auto_increase_solution_order</span><span class="o">=</span><span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="n">solution_order</span><span class="o">=</span><span class="s2">&quot;High&quot;</span><span class="p">,</span>
            <span class="n">solver_type</span><span class="o">=</span><span class="s2">&quot;Iterative&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">port_inductor_gap</span><span class="o">=</span>
        <span class="s2">&quot;10um&quot;</span><span class="p">,</span>  <span class="c1"># spacing between port and inductor if junction is drawn both ways</span>
    <span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Default setup.&quot;&quot;&quot;</span>

    <span class="c1"># When additional columns are added to QGeometry, this is the example to populate it.</span>
    <span class="c1"># e.g. element_extensions = dict(</span>
    <span class="c1">#         base=dict(color=str, klayer=int),</span>
    <span class="c1">#         path=dict(thickness=float, material=str, perfectE=bool),</span>
    <span class="c1">#         poly=dict(thickness=float, material=str), )</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Element extensions dictionary   element_extensions = dict() from base class&quot;&quot;&quot;</span>

    <span class="c1"># Add columns to junction table during QAnsysRenderer.load()</span>
    <span class="c1"># element_extensions  is now being populated as part of load().</span>
    <span class="c1"># Determined from element_table_data.</span>

    <span class="c1"># Dict structure MUST be same as  element_extensions!!!!!!</span>
    <span class="c1"># This dict will be used to update QDesign during init of renderer.</span>
    <span class="c1"># Keeping this as a cls dict so could be edited before renderer is instantiated.</span>
    <span class="c1"># To update component.options junction table.</span>

    <span class="n">element_table_data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">path</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">wire_bonds</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
        <span class="n">junction</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
            <span class="n">inductance</span><span class="o">=</span><span class="n">default_options</span><span class="p">[</span><span class="s2">&quot;Lj&quot;</span><span class="p">],</span>
            <span class="n">capacitance</span><span class="o">=</span><span class="n">default_options</span><span class="p">[</span><span class="s2">&quot;Cj&quot;</span><span class="p">],</span>
            <span class="n">resistance</span><span class="o">=</span><span class="n">default_options</span><span class="p">[</span><span class="s2">&quot;_Rj&quot;</span><span class="p">],</span>
            <span class="n">mesh_kw_jj</span><span class="o">=</span><span class="n">parse_units</span><span class="p">(</span><span class="n">default_options</span><span class="p">[</span><span class="s2">&quot;max_mesh_length_jj&quot;</span><span class="p">]),</span>
        <span class="p">),</span>
    <span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Element table data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design</span><span class="p">:</span> <span class="s2">&quot;QDesign&quot;</span><span class="p">,</span> <span class="n">initiate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a QRenderer for Ansys.</span>

<span class="sd">        Args:</span>
<span class="sd">            design (QDesign): Use QGeometry within QDesign to obtain elements for Ansys.</span>
<span class="sd">            initiate (bool, optional): True to initiate the renderer. Defaults to True.</span>
<span class="sd">            options (Dict, optional):  Used to override all options. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Variables to connect to Ansys</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rapp</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rdesktop</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Initialize renderer</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">design</span><span class="o">=</span><span class="n">design</span><span class="p">,</span> <span class="n">initiate</span><span class="o">=</span><span class="n">initiate</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>

        <span class="c1"># Default behavior is to render all components unless a strict subset was chosen</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">render_everything</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pinfo</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">initialized</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if initialized, False otherwise.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pinfo</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pinfo</span><span class="o">.</span><span class="n">project</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># this is because after previous pyEPR close(),</span>
                    <span class="c1"># the pinfo.project becomes None, but the type is not None (method)</span>
                    <span class="c1"># TODO: fix where appropriate, then remove this patch.</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_pinfo</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">name</span>
                <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rapp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rapp</span>

    <span class="nd">@rapp</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">rapp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app_com</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rapp</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rapp</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rapp</span> <span class="o">=</span> <span class="n">app_com</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rdesktop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rdesktop</span>

    <span class="nd">@rdesktop</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">rdesktop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desktop_com</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rdesktop</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rdesktop</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rdesktop</span> <span class="o">=</span> <span class="n">desktop_com</span>

    <span class="k">def</span> <span class="nf">_initiate_renderer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Open a session of the default Ansys EDT.</span>
<span class="sd">        Establishes the connection to the App and Desktop only.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># test if ansys is open</span>
        <span class="c1"># import psutil</span>
        <span class="c1"># booted = False</span>
        <span class="c1"># for proc in psutil.process_iter():</span>
        <span class="c1">#     if &#39;ansysedt&#39; in proc.name():</span>
        <span class="c1">#         booted = True</span>

        <span class="c1"># if not booted:</span>
        <span class="c1">#    self._open_ansys(*args, **kwargs)</span>
        <span class="c1"># need to make it so that it waits for the Ansys boot to end</span>
        <span class="c1"># after opening, should establish a connection (able to create a new project)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rapp</span> <span class="o">=</span> <span class="n">HfssApp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rdesktop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rapp</span><span class="o">.</span><span class="n">get_app_desktop</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rdesktop</span><span class="o">.</span><span class="n">project_count</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rdesktop</span><span class="o">.</span><span class="n">new_project</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_ansys</span><span class="p">()</span>  <span class="c1"># TODO: can this be done differently?</span>

        <span class="c1"># return True to indicate successful completion</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_close_renderer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Not used by the gds renderer at this time. only returns True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># wipe local variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epr_distributed_analysis</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epr_quantum_analysis</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># close COM connections to ansys</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rdesktop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rdesktop</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rapp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rapp</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">disconnect_ansys</span><span class="p">()</span>

        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="QAnsysRenderer.close">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Alias of _close_renderer()</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_close_renderer</span><span class="p">()</span></div>


<div class="viewcode-block" id="QAnsysRenderer.open_ansys">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.open_ansys">[docs]</a>
    <span class="k">def</span> <span class="nf">open_ansys</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">executable</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;reg_ansysedt.exe&quot;</span><span class="p">,</span>
        <span class="n">path_var</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ANSYSEM_ROOT202&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Alternative method to open an Ansys session that allows to specify</span>
<span class="sd">                which version to use. Default is version 2020 R2, but can be overridden.</span>

<span class="sd">        Args:</span>
<span class="sd">            path (str): Path to the Ansys executable. Defaults to None</span>
<span class="sd">            executable (str): Name of the ansys executable. Defaults to &#39;reg_ansysedt.exe&#39;</span>
<span class="sd">            path_var (str): Name of the OS environment variable that contains the path to the</span>
<span class="sd">                            Ansys executable. Only used when path=None.</span>
<span class="sd">                            Defaults to &#39;ANSYSEM_ROOT202&#39; (Ansys ver. 2020 R2)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;You are using </span><span class="si">%s</span><span class="s2">, but this is a renderer to Ansys, which only runs on Windows. &quot;</span>
                <span class="s2">&quot;Expect any sort of Errors if you try to work with this renderer beyond this point.&quot;</span>
                <span class="o">%</span> <span class="n">system</span><span class="p">())</span>

        <span class="kn">import</span> <span class="nn">subprocess</span>

        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="n">path_var</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="s2">&quot;environment variable </span><span class="si">%s</span><span class="s2"> not found. Is Ansys 2020 R2 installed on this &quot;</span>
                    <span class="s2">&quot;machine? If yes, then create said environment variable. If you have a &quot;</span>
                    <span class="s2">&quot;different version of Ansys, then pass to open_ansys() the path to its &quot;</span>
                    <span class="s2">&quot;binary, or the env var that stores it.&quot;</span> <span class="o">%</span> <span class="n">path_var</span><span class="p">)</span>
                <span class="k">raise</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">cmdlist</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">path</span><span class="p">,</span> <span class="n">executable</span><span class="p">]),</span> <span class="s2">&quot;-shortcut&quot;</span><span class="p">]</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">cmdlist</span><span class="p">,</span> <span class="n">cwd</span><span class="o">=</span><span class="n">path</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.connect_ansys">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.connect_ansys">[docs]</a>
    <span class="k">def</span> <span class="nf">connect_ansys</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">project_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">project_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">design_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;If none of the optional parameters are provided: connects to the</span>
<span class="sd">        Ansys COM, then checks for, and grab if present, an active project,</span>
<span class="sd">        design, and design setup.</span>

<span class="sd">        If the optional parameters are provided: if present, opens the project file and design in</span>
<span class="sd">        Ansys.</span>

<span class="sd">        Args:</span>
<span class="sd">            project_path (str, optional): Path without file name</span>
<span class="sd">            project_name (str, optional): File name (with or without extension)</span>
<span class="sd">            design_name (str, optional): Name of the default design to open from the project file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;You are using </span><span class="si">%s</span><span class="s2">, but this is a renderer to Ansys, which only runs on Windows. &quot;</span>
                <span class="s2">&quot;Expect any sort of Errors if you try to work with this renderer beyond this point.&quot;</span>
                <span class="o">%</span> <span class="n">system</span><span class="p">())</span>

        <span class="c1"># pyEPR does not like extensions</span>
        <span class="k">if</span> <span class="n">project_name</span><span class="p">:</span>
            <span class="n">project_name</span> <span class="o">=</span> <span class="n">project_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.aedt&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="c1"># open connection through pyEPR</span>
        <span class="kn">import</span> <span class="nn">pythoncom</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pinfo</span> <span class="o">=</span> <span class="n">epr</span><span class="o">.</span><span class="n">ProjectInfo</span><span class="p">(</span>
                <span class="n">do_connect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">project_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;project_path&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">project_path</span> <span class="k">else</span> <span class="n">project_path</span><span class="p">,</span>
                <span class="n">project_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;project_name&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">project_name</span> <span class="k">else</span> <span class="n">project_name</span><span class="p">,</span>
                <span class="n">design_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s1">&#39;design_name&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">design_name</span> <span class="k">else</span> <span class="n">design_name</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">pythoncom</span><span class="o">.</span><span class="n">com_error</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>  <span class="c1"># pylint: disable=no-member</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;com_error: &quot;</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
            <span class="n">hr</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">exc</span><span class="p">,</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">error</span><span class="o">.</span><span class="n">args</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">msg</span> <span class="o">==</span> <span class="s2">&quot;Invalid class string&quot;</span>
               <span class="p">):</span>  <span class="c1"># and hr == -2147221005 and exc is None and arg is None</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="s2">&quot;pyEPR cannot find the Ansys COM. Ansys installation might not have registered it. &quot;</span>
                    <span class="s2">&quot;To verify if this is the problem, execute the following: &quot;</span>
                    <span class="s2">&quot;`print(win32com.client.Dispatch(&#39;AnsoftHfss.HfssScriptInterface&#39;))` &quot;</span>
                    <span class="s2">&quot;If the print-out is not `&lt;COMObject ...&gt;` then Ansys COM is not registered, &quot;</span>
                    <span class="s2">&quot;and you will need to look into correcting your Ansys installation.&quot;</span>
                <span class="p">)</span>
            <span class="k">raise</span> <span class="n">error</span></div>


<div class="viewcode-block" id="QAnsysRenderer.disconnect_ansys">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.disconnect_ansys">[docs]</a>
    <span class="k">def</span> <span class="nf">disconnect_ansys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Disconnect Ansys.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;This renderer appears to be already disconnected from Ansys&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.new_ansys_project">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.new_ansys_project">[docs]</a>
    <span class="k">def</span> <span class="nf">new_ansys_project</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a new empty project in Ansys.&quot;&quot;&quot;</span>
        <span class="n">here</span> <span class="o">=</span> <span class="n">HfssApp</span><span class="p">()</span>
        <span class="n">here</span><span class="o">.</span><span class="n">get_app_desktop</span><span class="p">()</span><span class="o">.</span><span class="n">new_project</span><span class="p">()</span></div>


<div class="viewcode-block" id="QAnsysRenderer.connect_ansys_design">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.connect_ansys_design">[docs]</a>
    <span class="k">def</span> <span class="nf">connect_ansys_design</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Used to switch between existing designs.</span>

<span class="sd">        Args:</span>
<span class="sd">            design_name (str, optional): Name within the active project. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">project</span><span class="p">:</span>
                <span class="n">all_designs_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">get_design_names</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">design_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_designs_names</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;The design_name=</span><span class="si">{</span><span class="n">design_name</span><span class="si">}</span><span class="s2"> is not in project.  Connection did not happen.&quot;</span>
                    <span class="p">)</span>
                    <span class="k">return</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">connect_design</span><span class="p">(</span><span class="n">design_name</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">connect_setup</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="s2">&quot;Please install a more recent version of pyEPR (&gt;=0.8.4.3)&quot;</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Either you do not have a project loaded in Ansys, or you are not connected &quot;</span>
                    <span class="s2">&quot;to it. Try executing hfss.connect_ansys(), or creating a new Ansys project. &quot;</span>
                    <span class="s2">&quot;Also check the help file and other guide notebooks&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;It does not look like you are connected to Ansys. Please use connect_ansys() &quot;</span>
                <span class="s2">&quot;and make sure self.pinfo is set. There must be a project open in Ansys first.&quot;</span>
            <span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.get_active_design_name">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.get_active_design_name">[docs]</a>
    <span class="k">def</span> <span class="nf">get_active_design_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the name of the Ansys Design Object</span>

<span class="sd">        Returns:</span>
<span class="sd">            (str): Name of the active Ansys Design</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">project</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">get_active_design</span><span class="p">()</span><span class="o">.</span><span class="n">name</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">epr</span><span class="o">.</span><span class="n">ProjectInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Project info for Ansys renderer (class: pyEPR.ProjectInfo).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pinfo</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">modeler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The modeler from pyEPR HfssModeler.</span>

<span class="sd">        Returns:</span>
<span class="sd">            pyEPR.ansys.HfssModeler: Reference to  design.HfssModeler in Ansys.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">modeler</span>

<div class="viewcode-block" id="QAnsysRenderer.plot_ansys_fields">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.plot_ansys_fields">[docs]</a>
    <span class="k">def</span> <span class="nf">plot_ansys_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        (deprecated) use plot_fields()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;This method is deprecated. Change your scripts to use plot_fields()&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_fields</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.plot_fields">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.plot_fields">[docs]</a>
    <span class="k">def</span> <span class="nf">plot_fields</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">object_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">UserSpecifyName</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">UserSpecifyFolder</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">QuantityName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">PlotFolder</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">StreamlinePlot</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">AdjacentSidePlot</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">FullModelPlot</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">IntrinsicVar</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">PlotGeomInfo_0</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">PlotGeomInfo_1</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">PlotGeomInfo_2</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">PlotGeomInfo_3</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Plot fields in Ansys. The options are populated by the component&#39;s</span>
<span class="sd">        options.</span>

<span class="sd">        Args:</span>
<span class="sd">            object_name (str): Used to plot on faces of.</span>
<span class="sd">            name (str, optional): &quot;NAME:&lt;PlotName&gt;&quot; Defaults to None.</span>
<span class="sd">            UserSpecifyName (int, optional): 0 if default name for plot is used, 1 otherwise.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            UserSpecifyFolder (int, optional): 0 if default folder for plot is used, 1 otherwise.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            QuantityName (str, optional): Type of plot to create. Possible values are</span>
<span class="sd">                Mesh plots - &quot;Mesh&quot;;</span>
<span class="sd">                Field plots - &quot;Mag_E&quot;, &quot;Mag_H&quot;, &quot;Mag_Jvol&quot;, &quot;Mag_Jsurf&quot;,&quot;ComplexMag_E&quot;,</span>
<span class="sd">                &quot;ComplexMag_H&quot;, &quot;ComplexMag_Jvol&quot;, &quot;ComplexMag_Jsurf&quot;, &quot;Vector_E&quot;, &quot;Vector_H&quot;,</span>
<span class="sd">                &quot;Vector_Jvol&quot;, &quot;Vector_Jsurf&quot;, &quot;Vector_RealPoynting&quot;,&quot;Local_SAR&quot;, &quot;Average_SAR&quot;.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            PlotFolder (str, optional): Name of the folder to which the plot should be added.</span>
<span class="sd">                Possible values are: &quot;E Field&quot;,  &quot;H Field&quot;, &quot;Jvol&quot;, &quot;Jsurf&quot;, &quot;SARField&quot;, and</span>
<span class="sd">                &quot;MeshPlots&quot;. Defaults to None.</span>
<span class="sd">            StreamlinePlot (bool, optional): Passed to CreateFieldPlot. Defaults to None.</span>
<span class="sd">            AdjacentSidePlot (bool, optional): Passed to CreateFieldPlot. Defaults to None.</span>
<span class="sd">            FullModelPlot (bool, optional): Passed to CreateFieldPlot. Defaults to None.</span>
<span class="sd">            IntrinsicVar (str, optional): Formatted string that specifies the frequency and phase</span>
<span class="sd">                at which to make the plot.  For example: &quot;Freq=&#39;1GHz&#39; Phase=&#39;30deg&#39;&quot;.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            PlotGeomInfo_0 (int, optional): 0th entry in list for &quot;PlotGeomInfo:=&quot;,</span>
<span class="sd">                &lt;PlotGeomArray&gt;. Defaults to None.</span>
<span class="sd">            PlotGeomInfo_1 (str, optional): 1st entry in list for &quot;PlotGeomInfo:=&quot;,</span>
<span class="sd">                &lt;PlotGeomArray&gt;. Defaults to None.</span>
<span class="sd">            PlotGeomInfo_2 (str, optional): 2nd entry in list for &quot;PlotGeomInfo:=&quot;,</span>
<span class="sd">                &lt;PlotGeomArray&gt;. Defaults to None.</span>
<span class="sd">            PlotGeomInfo_3 (int, optional): 3rd entry in list for &quot;PlotGeomInfo:=&quot;,</span>
<span class="sd">                &lt;PlotGeomArray&gt;. Defaults to None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            NoneType: Return information from oFieldsReport.CreateFieldPlot().</span>
<span class="sd">            The method CreateFieldPlot() always returns None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">_modeler</span><span class="o">.</span><span class="n">ShowWindow</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;pinfo is None.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_fields_calc</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;The _fields_calc in design is None.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_modeler</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;The _modeler in design is None.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;The design in pinfo is None.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">setup</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;The setup in pinfo is None.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># TODO: This is just a prototype - should add features and flexibility.</span>
        <span class="n">oFieldsReport</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_fields_calc</span>
                        <span class="p">)</span>  <span class="c1"># design.GetModule(&quot;FieldsReporter&quot;)</span>
        <span class="n">oModeler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_modeler</span>  <span class="c1"># design.SetActiveEditor(&quot;3D Modeler&quot;)</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">setup</span>

        <span class="c1"># Object ID - use to plot on faces of</span>
        <span class="n">object_id</span> <span class="o">=</span> <span class="n">oModeler</span><span class="o">.</span><span class="n">GetObjectIDByName</span><span class="p">(</span><span class="n">object_name</span><span class="p">)</span>
        <span class="c1"># Can also use hfss.pinfo.design._modeler.GetFaceIDs(&quot;main&quot;)</span>

        <span class="n">paf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;plot_ansys_fields_options&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">paf</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>

        <span class="c1"># Name of the solution setup and solution formatted as:&quot;&lt;SolveSetupName&gt; : &lt;WhichSolution&gt;&quot;,</span>
        <span class="c1"># where &lt;WhichSolution&gt; can be &quot;Adaptive_&lt;n&gt;&quot;, &quot;LastAdaptive&quot;, or &quot;PortOnly&quot;.</span>
        <span class="c1"># HFSS requires a space on either side of the ‘:’ character.</span>
        <span class="c1"># If it is missing, the plot will not be created.</span>
        <span class="n">SolutionName</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">setup</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> : LastAdaptive&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">UserSpecifyName</span><span class="p">:</span>
            <span class="n">UserSpecifyName</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">paf</span><span class="p">[</span><span class="s2">&quot;UserSpecifyName&quot;</span><span class="p">]))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">UserSpecifyFolder</span><span class="p">:</span>
            <span class="n">UserSpecifyFolder</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">paf</span><span class="p">[</span><span class="s2">&quot;UserSpecifyFolder&quot;</span><span class="p">]))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">QuantityName</span><span class="p">:</span>
            <span class="n">QuantityName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">paf</span><span class="p">[</span><span class="s2">&quot;QuantityName&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">PlotFolder</span><span class="p">:</span>
            <span class="n">PlotFolder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">paf</span><span class="p">[</span><span class="s2">&quot;PlotFolder&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">StreamlinePlot</span><span class="p">:</span>
            <span class="n">StreamlinePlot</span> <span class="o">=</span> <span class="n">is_true</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">paf</span><span class="p">[</span><span class="s2">&quot;StreamlinePlot&quot;</span><span class="p">]))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">AdjacentSidePlot</span><span class="p">:</span>
            <span class="n">AdjacentSidePlot</span> <span class="o">=</span> <span class="n">is_true</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span>
                <span class="n">paf</span><span class="p">[</span><span class="s2">&quot;AdjacentSidePlot&quot;</span><span class="p">]))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">FullModelPlot</span><span class="p">:</span>
            <span class="n">FullModelPlot</span> <span class="o">=</span> <span class="n">is_true</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">paf</span><span class="p">[</span><span class="s2">&quot;FullModelPlot&quot;</span><span class="p">]))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">IntrinsicVar</span><span class="p">:</span>
            <span class="n">IntrinsicVar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">paf</span><span class="p">[</span><span class="s2">&quot;IntrinsicVar&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">PlotGeomInfo_0</span><span class="p">:</span>
            <span class="n">PlotGeomInfo_0</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">paf</span><span class="p">[</span><span class="s2">&quot;PlotGeomInfo_0&quot;</span><span class="p">]))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">PlotGeomInfo_1</span><span class="p">:</span>
            <span class="n">PlotGeomInfo_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">paf</span><span class="p">[</span><span class="s2">&quot;PlotGeomInfo_1&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">PlotGeomInfo_2</span><span class="p">:</span>
            <span class="n">PlotGeomInfo_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">paf</span><span class="p">[</span><span class="s2">&quot;PlotGeomInfo_2&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">PlotGeomInfo_3</span><span class="p">:</span>
            <span class="n">PlotGeomInfo_3</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">(</span><span class="n">paf</span><span class="p">[</span><span class="s2">&quot;PlotGeomInfo_3&quot;</span><span class="p">]))</span>

        <span class="c1"># used to pass to CreateFieldPlot</span>
        <span class="c1"># Copied from  pdf at http://www.ece.uprm.edu/~rafaelr/inel6068/HFSS/scripting.pdf</span>
        <span class="c1"># &lt;PlotGeomArray&gt;Array(&lt;NumGeomTypes&gt;, &lt;GeomTypeData&gt;,&lt;GeomTypeData&gt;, ...)</span>
        <span class="c1"># For example:</span>
        <span class="c1"># Array(4, &quot;Volume&quot;, &quot;ObjList&quot;, 1, &quot;Box1&quot;,&quot;Surface&quot;, &quot;FacesList&quot;, 1, &quot;12&quot;, &quot;Line&quot;, 1,&quot;Polyline1&quot;,</span>
        <span class="c1">#       &quot;Point&quot;, 2, &quot;Point1&quot;, &quot;Point2&quot;</span>
        <span class="n">PlotGeomInfo</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">PlotGeomInfo_0</span><span class="p">,</span>
            <span class="n">PlotGeomInfo_1</span><span class="p">,</span>
            <span class="n">PlotGeomInfo_2</span><span class="p">,</span>
            <span class="n">PlotGeomInfo_3</span><span class="p">,</span>
            <span class="nb">str</span><span class="p">(</span><span class="n">object_id</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="c1"># yapf: disable</span>
        <span class="n">args_list</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">name</span>                 <span class="p">,</span>
                <span class="s2">&quot;SolutionName:=&quot;</span>     <span class="p">,</span> <span class="n">SolutionName</span><span class="p">,</span>  <span class="c1"># name of the setup</span>
                <span class="s2">&quot;UserSpecifyName:=&quot;</span>  <span class="p">,</span> <span class="n">UserSpecifyName</span> <span class="p">,</span>
                <span class="s2">&quot;UserSpecifyFolder:=&quot;</span><span class="p">,</span> <span class="n">UserSpecifyFolder</span><span class="p">,</span>
                <span class="s2">&quot;QuantityName:=&quot;</span>     <span class="p">,</span> <span class="n">QuantityName</span><span class="p">,</span>
                <span class="s2">&quot;PlotFolder:=&quot;</span>       <span class="p">,</span> <span class="n">PlotFolder</span><span class="p">,</span>
                <span class="s2">&quot;StreamlinePlot:=&quot;</span>   <span class="p">,</span> <span class="n">StreamlinePlot</span><span class="p">,</span>
                <span class="s2">&quot;AdjacentSidePlot:=&quot;</span> <span class="p">,</span> <span class="n">AdjacentSidePlot</span><span class="p">,</span>
                <span class="s2">&quot;FullModelPlot:=&quot;</span>    <span class="p">,</span> <span class="n">FullModelPlot</span><span class="p">,</span>
                <span class="s2">&quot;IntrinsicVar:=&quot;</span>     <span class="p">,</span> <span class="n">IntrinsicVar</span><span class="p">,</span>
                <span class="s2">&quot;PlotGeomInfo:=&quot;</span>     <span class="p">,</span> <span class="n">PlotGeomInfo</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="c1"># yapf: enable</span>
        <span class="k">return</span> <span class="n">oFieldsReport</span><span class="o">.</span><span class="n">CreateFieldPlot</span><span class="p">(</span><span class="n">args_list</span><span class="p">,</span> <span class="s2">&quot;Field&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.plot_ansys_delete">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.plot_ansys_delete">[docs]</a>
    <span class="k">def</span> <span class="nf">plot_ansys_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        (deprecated) Use clear_fields()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;This method is deprecated. Change your scripts to use clear_fields()&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_fields</span><span class="p">(</span><span class="n">names</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.clear_fields">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.clear_fields">[docs]</a>
    <span class="k">def</span> <span class="nf">clear_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete field plots from modeler window in Ansys.</span>
<span class="sd">        Does not throw an error if names are missing.</span>

<span class="sd">        Can give multiple names, for example:</span>
<span class="sd">        hfss.plot_ansys_delete([&#39;Mag_E1&#39;, &#39;Mag_E1_2&#39;])</span>

<span class="sd">        Args:</span>
<span class="sd">            names (list): Names of plots to delete from modeler window.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">names</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_fields_calc</span><span class="o">.</span><span class="n">GetFieldPlotNames</span><span class="p">())</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_fields_calc</span><span class="o">.</span><span class="n">DeleteFieldPlot</span><span class="p">(</span><span class="n">names</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.add_message">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.add_message">[docs]</a>
    <span class="k">def</span> <span class="nf">add_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">severity</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add message to Message Manager box in Ansys.</span>

<span class="sd">        Args:</span>
<span class="sd">            msg (str): Message to add.</span>
<span class="sd">            severity (int): 0 = Informational, 1 = Warning, 2 = Error, 3 = Fatal.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">add_message</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">severity</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.save_screenshot">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.save_screenshot">[docs]</a>
    <span class="k">def</span> <span class="nf">save_screenshot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save the screenshot.</span>

<span class="sd">        Args:</span>
<span class="sd">            path (str, optional): Path to save location.  Defaults to None.</span>
<span class="sd">            show (bool, optional): Whether or not to display the screenshot.  Defaults to True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            pathlib.WindowsPath: path to png formatted screenshot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">_modeler</span><span class="o">.</span><span class="n">ShowWindow</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">save_screenshot</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">show</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s2">&quot;Please install a more recent version of pyEPR (&gt;=0.8.4.3)&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.execute_design">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.execute_design">[docs]</a>
    <span class="k">def</span> <span class="nf">execute_design</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">design_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">solution_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">vars_to_initialize</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
        <span class="n">force_redraw</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">design_selection</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;It wraps the render_design() method to</span>
<span class="sd">        1. skip rendering if the &quot;selection&quot; of components is left empty (re-uses selected design)</span>
<span class="sd">        2. force design clearing and redraw if force_Redraw is set</span>

<span class="sd">        Args:</span>
<span class="sd">            design_name (str): Name to assign to the renderer design</span>
<span class="sd">            solution_type (str): eigenmode, capacitive or drivenmodal</span>
<span class="sd">            vars_to_initialize (Dict): Variables to initialize, i.e. Ljx, Cjx</span>
<span class="sd">            force_redraw (bool, optional): Force re-render the design. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: final design name (a suffix might have been added to the provided name,</span>
<span class="sd">                in case of conflicts)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If a selection of components is not specified, use the active renderer-design</span>
        <span class="k">if</span> <span class="s2">&quot;selection&quot;</span> <span class="ow">in</span> <span class="n">design_selection</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">design_selection</span><span class="p">[</span><span class="s2">&quot;selection&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">name</span>
                <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                    <span class="c1"># if no design exists, then we will proceed and render the full design instead</span>
                    <span class="k">pass</span>

        <span class="c1"># either create a new one, or clear the active one, depending on force_redraw.</span>
        <span class="k">if</span> <span class="n">force_redraw</span> <span class="ow">and</span> <span class="p">(</span><span class="n">design_name</span>
                             <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">get_design_names</span><span class="p">()):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">activate_ansys_design</span><span class="p">(</span><span class="n">design_name</span><span class="p">,</span> <span class="n">solution_type</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clean_active_design</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">new_ansys_design</span><span class="p">(</span><span class="n">design_name</span><span class="p">,</span> <span class="n">solution_type</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span><span class="n">vars_to_initialize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">render_design</span><span class="p">(</span><span class="o">**</span><span class="n">design_selection</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">name</span></div>


<div class="viewcode-block" id="QAnsysRenderer.new_ansys_design">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.new_ansys_design">[docs]</a>
    <span class="k">def</span> <span class="nf">new_ansys_design</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">design_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                         <span class="n">solution_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                         <span class="n">connect</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add an Ansys design with the given name to the Ansys project.</span>
<span class="sd">        Valid solutions_type values are: &#39;capacitive&#39; (q3d), &#39;eignemode&#39; and &#39;drivenmodal&#39; (hfss)</span>

<span class="sd">        Args:</span>
<span class="sd">            design_name (str): name of the Design to be created in Ansys</span>
<span class="sd">            solution_type (str): defines type of Design and solution to be created in Ansys</span>
<span class="sd">            connect (bool, optional): Should we connect qiskit-metal to this Ansy design? Defaults to True.</span>

<span class="sd">        Returns(pyEPR.ansys.HfssDesign): The pointer to the design within Ansys.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">solution_type</span> <span class="o">==</span> <span class="s2">&quot;capacitive&quot;</span><span class="p">:</span>
                    <span class="n">adesign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">new_q3d_design</span><span class="p">(</span><span class="n">design_name</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">solution_type</span> <span class="o">==</span> <span class="s2">&quot;eigenmode&quot;</span><span class="p">:</span>
                    <span class="n">adesign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">new_em_design</span><span class="p">(</span><span class="n">design_name</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">solution_type</span> <span class="o">==</span> <span class="s2">&quot;drivenmodal&quot;</span><span class="p">:</span>
                    <span class="n">adesign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">new_dm_design</span><span class="p">(</span><span class="n">design_name</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;The solution_type = </span><span class="si">{</span><span class="n">solution_type</span><span class="si">}</span><span class="s2"> is not supported by this renderer&quot;</span>
                    <span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">project</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Project not found&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="s2">&quot;Please install a more recent version of pyEPR (&gt;=0.8.4.4)&quot;</span>
                    <span class="p">)</span>
                <span class="k">raise</span>
            <span class="k">if</span> <span class="n">connect</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">connect_ansys_design</span><span class="p">(</span><span class="n">adesign</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">adesign</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;You have to first connect to Ansys and to a project &quot;</span>
                <span class="s2">&quot;before creating a new design. You can use renderer.connect_ansys()&quot;</span>
            <span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.activate_ansys_design">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.activate_ansys_design">[docs]</a>
    <span class="k">def</span> <span class="nf">activate_ansys_design</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                              <span class="n">design_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                              <span class="n">solution_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Select a design with the given name from the open project.</span>
<span class="sd">        If the design exists, that will be added WITHOUT altering the suffix of the design name.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): Name of the new Ansys design</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">project</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">names_in_design</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">get_design_names</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="s2">&quot;Please install a more recent version of pyEPR (&gt;=0.8.4.5)&quot;</span>
                    <span class="p">)</span>

                <span class="k">if</span> <span class="n">design_name</span> <span class="ow">in</span> <span class="n">names_in_design</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">connect_design</span><span class="p">(</span><span class="n">design_name</span><span class="p">)</span>
                    <span class="n">oDesktop</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">_desktop</span>
                               <span class="p">)</span>  <span class="c1"># self.pinfo.design does not work</span>
                    <span class="n">oProject</span> <span class="o">=</span> <span class="n">oDesktop</span><span class="o">.</span><span class="n">SetActiveProject</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">project_name</span><span class="p">)</span>
                    <span class="n">oDesign</span> <span class="o">=</span> <span class="n">oProject</span><span class="o">.</span><span class="n">SetActiveDesign</span><span class="p">(</span><span class="n">design_name</span><span class="p">)</span>
                    <span class="n">current_solution_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">solution_type</span><span class="o">.</span><span class="n">lower</span><span class="p">(</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">current_solution_type</span> <span class="o">==</span> <span class="s2">&quot;q3d&quot;</span><span class="p">:</span>
                        <span class="n">current_solution_type</span> <span class="o">=</span> <span class="s2">&quot;capacitive&quot;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">current_solution_type</span> <span class="o">!=</span> <span class="n">solution_type</span> <span class="ow">and</span>
                            <span class="n">solution_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;The design_name=</span><span class="si">{</span><span class="n">design_name</span><span class="si">}</span><span class="s2"> already exists, but it has solution_type==&quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">current_solution_type</span><span class="si">}</span><span class="s2">, which is different from the requested==</span><span class="si">{</span><span class="n">solution_type</span><span class="si">}</span><span class="s2">. &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;If you want a design with solution type==</span><span class="si">{</span><span class="n">solution_type</span><span class="si">}</span><span class="s2">, please change the name &quot;</span>
                            <span class="s2">&quot;requested for your design to one that does not exist. Alternatively, manually modify &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;the solution_type for design </span><span class="si">{</span><span class="n">design_name</span><span class="si">}</span><span class="s2"> from the Ansys GUI.&quot;</span>
                        <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;The design_name=</span><span class="si">{</span><span class="n">design_name</span><span class="si">}</span><span class="s2"> was not in active project.  &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;Designs in active project are: </span><span class="se">\n</span><span class="si">{</span><span class="n">names_in_design</span><span class="si">}</span><span class="s2">.  &quot;</span>
                        <span class="s2">&quot;A new design will be added to the project.  &quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">solution_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">adesign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_ansys_design</span><span class="p">(</span>
                            <span class="n">design_name</span><span class="o">=</span><span class="n">design_name</span><span class="p">,</span>
                            <span class="n">solution_type</span><span class="o">=</span><span class="n">solution_type</span><span class="p">,</span>
                            <span class="n">connect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="s2">&quot;Please specify the solution_type, to determine what design to create&quot;</span>
                        <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Project not found, have you opened a project?&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Have you run start()?  Cannot find a reference to Ansys in QRenderer.&quot;</span>
            <span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.new_ansys_setup">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.new_ansys_setup">[docs]</a>
    <span class="k">def</span> <span class="nf">new_ansys_setup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">other_setup</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determines the appropriate setup to be created based on the pinfo.design.solution_type.</span>
<span class="sd">        make sure to set this variable before executing this method</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): name to give to the new setup</span>

<span class="sd">        Returns:</span>
<span class="sd">            pyEPR.ansys.HfssEMSetup: Pointer to the ansys setup object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: only use activate_ansys_setup?</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;reuse_setup&quot;</span> <span class="ow">in</span> <span class="n">other_setup</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">other_setup</span><span class="p">[</span><span class="s2">&quot;reuse_setup&quot;</span><span class="p">]:</span>
                        <span class="c1"># delete_setup will check if setup exists, before deleting.</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">delete_setup</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">solution_type</span> <span class="o">==</span> <span class="s2">&quot;Eigenmode&quot;</span><span class="p">:</span>
                    <span class="n">setup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_eigenmode_setup</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">other_setup</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">solution_type</span> <span class="o">==</span> <span class="s2">&quot;DrivenModal&quot;</span><span class="p">:</span>
                    <span class="n">setup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_drivenmodal_setup</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">other_setup</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">solution_type</span> <span class="o">==</span> <span class="s2">&quot;Q3D&quot;</span><span class="p">:</span>
                    <span class="n">setup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_q3d_setup</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">other_setup</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">setup</span></div>


<div class="viewcode-block" id="QAnsysRenderer.initialize_cap_extract">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.initialize_cap_extract">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize_cap_extract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Any task that needs to occur before running a simulation, such as creating a setup</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Name of the setup that has been updated</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">setup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_ansys_setup</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># TODO: activate_ansys_setup?</span>
        <span class="k">return</span> <span class="n">setup</span><span class="o">.</span><span class="n">name</span></div>


<div class="viewcode-block" id="QAnsysRenderer.initialize_eigenmode">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.initialize_eigenmode">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize_eigenmode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">vars</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Any task that needs to occur before running a simulation, such as creating a setup</span>

<span class="sd">        Args:</span>
<span class="sd">            vars (Dict, optional): list of parametric variables to set in the renderer.</span>
<span class="sd">                Defaults to {}.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Name of the setup that has been updated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span><span class="nb">vars</span><span class="p">)</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_ansys_setup</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># TODO: activate_ansys_setup?</span>
        <span class="k">return</span> <span class="n">setup</span><span class="o">.</span><span class="n">name</span></div>


<div class="viewcode-block" id="QAnsysRenderer.initialize_drivenmodal">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.initialize_drivenmodal">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize_drivenmodal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                               <span class="n">sweep_setup</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
                               <span class="nb">vars</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="p">{},</span>
                               <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Any task that needs to occur before running a simulation, such as creating a setup</span>

<span class="sd">        Args:</span>
<span class="sd">            sweep_setup (Dict): list of parametric variables to set the frequency sweep.</span>
<span class="sd">            vars (Dict, optional): list of parametric variables to set in the renderer.</span>
<span class="sd">                Defaults to {}.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Name of the setup that has been updated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span><span class="nb">vars</span><span class="p">)</span>
        <span class="n">setup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_ansys_setup</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>  <span class="c1"># TODO: activate_ansys_setup?</span>
        <span class="n">sweep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_sweep</span><span class="p">(</span><span class="n">setup</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">sweep_setup</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">setup</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">sweep</span><span class="o">.</span><span class="n">name</span></div>


<div class="viewcode-block" id="QAnsysRenderer.activate_ansys_setup">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.activate_ansys_setup">[docs]</a>
    <span class="k">def</span> <span class="nf">activate_ansys_setup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">setup_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;For active design, either get existing setup, make new setup with name,</span>
<span class="sd">        or make new setup with default name.</span>

<span class="sd">        Args:</span>
<span class="sd">            setup_name (str, optional): If name exists for setup, then have pinfo reference it.</span>
<span class="sd">              If name for setup does not exist, create a new setup with the name.</span>
<span class="sd">              If name is None, create a new setup with default name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">project</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="p">:</span>
                    <span class="c1"># look for setup name, if not there, then add a new one</span>
                    <span class="k">if</span> <span class="n">setup_name</span><span class="p">:</span>
                        <span class="n">all_setup_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">get_setup_names</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">setup_name</span> <span class="o">=</span> <span class="n">setup_name</span>
                        <span class="k">if</span> <span class="n">setup_name</span> <span class="ow">in</span> <span class="n">all_setup_names</span><span class="p">:</span>
                            <span class="c1"># When name is given and in design. So have pinfo reference existing setup.</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">setup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">get_setup</span><span class="p">(</span><span class="n">setup_name</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="c1"># When name is given, but not in design. So make a new setup with given name.</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;The setup_name=</span><span class="si">{</span><span class="n">setup_name</span><span class="si">}</span><span class="s2"> was not in active design.  &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;Setups in active design are: </span><span class="se">\n</span><span class="si">{</span><span class="n">all_setup_names</span><span class="si">}</span><span class="s2">.  &quot;</span>
                                <span class="s2">&quot;A new setup will default values will be added to the design.  &quot;</span>
                            <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">setup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_ansys_setup</span><span class="p">(</span>
                                <span class="n">name</span><span class="o">=</span><span class="n">setup_name</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Please specify a setup_name.&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="s2">&quot;Design not found in selected project, have you opened a design?&quot;</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Project not found, have you opened a project?&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Have you run connect_ansys()?  Cannot find a reference to Ansys in QRenderer.&quot;</span>
            <span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.render_design">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.render_design">[docs]</a>
    <span class="k">def</span> <span class="nf">render_design</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">selection</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">open_pins</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">box_plus_buffer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initiate rendering of components in design contained in selection,</span>
<span class="sd">        assuming they&#39;re valid. Components are rendered before the chips they</span>
<span class="sd">        reside on, and subtraction of negative shapes is performed at the very</span>
<span class="sd">        end.</span>

<span class="sd">        First obtain a list of IDs of components to render and a corresponding case, denoted by self.qcomp_ids</span>
<span class="sd">        and self.case, respectively. If self.case == 1, all components in QDesign are to be rendered.</span>
<span class="sd">        If self.case == 0, a strict subset of components in QDesign are to be rendered. Otherwise, if</span>
<span class="sd">        self.case == 2, one or more component names in selection cannot be found in QDesign.</span>

<span class="sd">        Chip_subtract_dict consists of component names (keys) and a set of all elements within each component that</span>
<span class="sd">        will eventually be subtracted from the ground plane. Add objects that are perfect conductors and/or have</span>
<span class="sd">        meshing to self.assign_perfE and self.assign_mesh, respectively; both are initialized as empty lists. Similarly,</span>
<span class="sd">        if the object is a port in an eigenmode simulation, add it to self.assign_port_mesh, which is initialized</span>
<span class="sd">        as an empty list. Note that these objects are &quot;refreshed&quot; each time render_design is called (as opposed to</span>
<span class="sd">        in the init function) to clear QAnsysRenderer of any leftover items from the last call to render_design.</span>

<span class="sd">        Among the components selected for export, there may or may not be unused (unconnected) pins.</span>
<span class="sd">        The second parameter, open_pins, contains tuples of the form (component_name, pin_name) that</span>
<span class="sd">        specify exactly which pins should be open rather than shorted during the simulation. Both the</span>
<span class="sd">        component and pin name must be specified because the latter could be shared by multiple</span>
<span class="sd">        components. All pins in this list are rendered with an additional endcap in the form of a</span>
<span class="sd">        rectangular cutout, to be subtracted from its respective plane.</span>

<span class="sd">        The final parameter, box_plus_buffer, determines how the chip is drawn. When set to True, it takes the</span>
<span class="sd">        minimum rectangular bounding box of all rendered components and adds a buffer of x_buffer_width_mm and</span>
<span class="sd">        y_buffer_width_mm horizontally and vertically, respectively, to the chip size. The center of the chip</span>
<span class="sd">        lies at the midpoint x/y coordinates of the minimum rectangular bounding box and may change depending</span>
<span class="sd">        on which components are rendered and how they&#39;re positioned. If box_plus_buffer is False, however, the</span>
<span class="sd">        chip position and dimensions are taken from the chip info dictionary found in QDesign, irrespective</span>
<span class="sd">        of what&#39;s being rendered. While this latter option is faster because it doesn&#39;t require calculating a</span>
<span class="sd">        bounding box, it runs the risk of rendered components being too close to the edge of the chip or even</span>
<span class="sd">        falling outside its boundaries.</span>

<span class="sd">        Args:</span>
<span class="sd">            selection (Union[list, None], optional): List of components to render. Defaults to None.</span>
<span class="sd">            open_pins (Union[list, None], optional): List of tuples of pins that are open. Defaults to None.</span>
<span class="sd">            box_plus_buffer (bool): Either calculate a bounding box based on the location of rendered geometries</span>
<span class="sd">                                     or use chip size from design class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qcomp_ids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_unique_component_ids</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Unable to proceed with rendering. Please check selection.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">chip_subtract_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_perfE</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_mesh</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">render_tables</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_endcaps</span><span class="p">(</span><span class="n">open_pins</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">render_chips</span><span class="p">(</span><span class="n">box_plus_buffer</span><span class="o">=</span><span class="n">box_plus_buffer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subtract_from_ground</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">()</span></div>


    <span class="k">def</span> <span class="nf">render_chip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="QAnsysRenderer.render_component">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.render_component">[docs]</a>
    <span class="k">def</span> <span class="nf">render_component</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span></div>


<div class="viewcode-block" id="QAnsysRenderer.render_tables">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.render_tables">[docs]</a>
    <span class="k">def</span> <span class="nf">render_tables</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">skip_junction</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Render components in design grouped by table type (path, poly, or junction).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">table_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">qgeometry</span><span class="o">.</span><span class="n">get_element_types</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">table_type</span> <span class="o">!=</span> <span class="s2">&quot;junction&quot;</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">skip_junction</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">render_components</span><span class="p">(</span><span class="n">table_type</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.render_components">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.render_components">[docs]</a>
    <span class="k">def</span> <span class="nf">render_components</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Render components by breaking them down into individual elements.</span>

<span class="sd">        Args:</span>
<span class="sd">            table_type (str): Table type (poly, path, or junction).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">table</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">qgeometry</span><span class="o">.</span><span class="n">tables</span><span class="p">[</span><span class="n">table_type</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># Render a subset of components using mask</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;component&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qcomp_ids</span><span class="p">)</span>
            <span class="n">table</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">qgeom</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">render_element</span><span class="p">(</span><span class="n">qgeom</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="n">table_type</span> <span class="o">==</span> <span class="s2">&quot;junction&quot;</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">table_type</span> <span class="o">==</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">auto_wirebonds</span><span class="p">(</span><span class="n">table</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.render_element">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.render_element">[docs]</a>
    <span class="k">def</span> <span class="nf">render_element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qgeom</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">is_junction</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render an individual shape whose properties are listed in a row of</span>
<span class="sd">        QGeometry table. Junction elements are handled separately from non-</span>
<span class="sd">        junction elements, as the former consist of two rendered shapes, not</span>
<span class="sd">        just one.</span>

<span class="sd">        Args:</span>
<span class="sd">            qgeom (pd.Series): GeoSeries of element properties.</span>
<span class="sd">            is_junction (bool): Whether or not qgeom belongs to junction table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">qc_shapely</span> <span class="o">=</span> <span class="n">qgeom</span><span class="o">.</span><span class="n">geometry</span>
        <span class="k">if</span> <span class="n">is_junction</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">render_element_junction</span><span class="p">(</span><span class="n">qgeom</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">qc_shapely</span><span class="p">,</span> <span class="n">shapely</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Polygon</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">render_element_poly</span><span class="p">(</span><span class="n">qgeom</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">qc_shapely</span><span class="p">,</span> <span class="n">shapely</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">LineString</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">render_element_path</span><span class="p">(</span><span class="n">qgeom</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.render_element_junction">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.render_element_junction">[docs]</a>
    <span class="k">def</span> <span class="nf">render_element_junction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qgeom</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Render a Josephson junction consisting of</span>
<span class="sd">            1. A rectangle of length pad_gap and width inductor_width. Defines lumped element</span>
<span class="sd">               RLC boundary condition.</span>
<span class="sd">            2. A line that is later used to calculate the voltage in post-processing analysis.</span>

<span class="sd">        Args:</span>
<span class="sd">            qgeom (pd.Series): GeoSeries of element properties.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ansys_options</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">transparency</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

        <span class="n">qc_name</span> <span class="o">=</span> <span class="s2">&quot;Lj_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">qgeom</span><span class="p">[</span><span class="s2">&quot;component&quot;</span><span class="p">])</span>
        <span class="n">qc_elt</span> <span class="o">=</span> <span class="n">get_clean_name</span><span class="p">(</span><span class="n">qgeom</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
        <span class="n">qc_shapely</span> <span class="o">=</span> <span class="n">qgeom</span><span class="o">.</span><span class="n">geometry</span>
        <span class="n">qc_chip_z</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">get_chip_z</span><span class="p">(</span><span class="n">qgeom</span><span class="o">.</span><span class="n">chip</span><span class="p">))</span>
        <span class="n">qc_width</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="n">qgeom</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>

        <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">qc_name</span><span class="si">}{</span><span class="n">QAnsysRenderer</span><span class="o">.</span><span class="n">NAME_DELIM</span><span class="si">}{</span><span class="n">qc_elt</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">endpoints</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">qc_shapely</span><span class="o">.</span><span class="n">coords</span><span class="p">))</span>
        <span class="n">endpoints_3d</span> <span class="o">=</span> <span class="n">to_vec3D</span><span class="p">(</span><span class="n">endpoints</span><span class="p">,</span> <span class="n">qc_chip_z</span><span class="p">)</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">z0</span> <span class="o">=</span> <span class="n">endpoints_3d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z0</span> <span class="o">=</span> <span class="n">endpoints_3d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">):</span>
            <span class="c1"># Junction runs vertically up/down</span>
            <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">-</span> <span class="n">qc_width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">qc_width</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">y_min</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Junction runs horizontally left/right</span>
            <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">)</span>
            <span class="n">y_min</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">-</span> <span class="n">qc_width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">qc_width</span> <span class="o">/</span> <span class="mi">2</span>

        <span class="c1"># Draw rectangle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Drawing a rectangle: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">poly_ansys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">draw_rect_corner</span><span class="p">(</span>
            <span class="p">[</span><span class="n">x_min</span><span class="p">,</span> <span class="n">y_min</span><span class="p">,</span> <span class="n">qc_chip_z</span><span class="p">],</span>
            <span class="n">x_max</span> <span class="o">-</span> <span class="n">x_min</span><span class="p">,</span>
            <span class="n">y_max</span> <span class="o">-</span> <span class="n">y_min</span><span class="p">,</span>
            <span class="n">qc_chip_z</span><span class="p">,</span>
            <span class="o">**</span><span class="n">ansys_options</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="s2">&quot;x&quot;</span> <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;y&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">rename_obj</span><span class="p">(</span><span class="n">poly_ansys</span><span class="p">,</span> <span class="s2">&quot;JJ_rect_&quot;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_mesh</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;JJ_rect_&quot;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>

        <span class="c1"># Draw line</span>
        <span class="n">poly_jj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">draw_polyline</span><span class="p">(</span>
            <span class="p">[</span><span class="n">endpoints_3d</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">endpoints_3d</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="n">closed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">)),</span>
        <span class="p">)</span>
        <span class="n">poly_jj</span> <span class="o">=</span> <span class="n">poly_jj</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">&quot;JJ_&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
        <span class="n">poly_jj</span><span class="o">.</span><span class="n">show_direction</span> <span class="o">=</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="QAnsysRenderer.render_element_poly">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.render_element_poly">[docs]</a>
    <span class="k">def</span> <span class="nf">render_element_poly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qgeom</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render a closed polygon.</span>

<span class="sd">        Args:</span>
<span class="sd">            qgeom (pd.Series): GeoSeries of element properties.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ansys_options</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">transparency</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

        <span class="n">qc_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_components</span><span class="p">[</span><span class="n">qgeom</span><span class="p">[</span><span class="s2">&quot;component&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">name</span>
        <span class="n">qc_elt</span> <span class="o">=</span> <span class="n">get_clean_name</span><span class="p">(</span><span class="n">qgeom</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>

        <span class="n">qc_shapely</span> <span class="o">=</span> <span class="n">qgeom</span><span class="o">.</span><span class="n">geometry</span>  <span class="c1"># shapely geom</span>
        <span class="n">qc_chip_z</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">get_chip_z</span><span class="p">(</span><span class="n">qgeom</span><span class="o">.</span><span class="n">chip</span><span class="p">))</span>
        <span class="n">qc_fillet</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">qgeom</span><span class="o">.</span><span class="n">fillet</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>

        <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">qc_elt</span><span class="si">}{</span><span class="n">QAnsysRenderer</span><span class="o">.</span><span class="n">NAME_DELIM</span><span class="si">}{</span><span class="n">qc_name</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">points</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span>
            <span class="n">qc_shapely</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">))</span>  <span class="c1"># list of 2d point tuples</span>
        <span class="n">points_3d</span> <span class="o">=</span> <span class="n">to_vec3D</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">qc_chip_z</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_rectangle</span><span class="p">(</span><span class="n">qc_shapely</span><span class="p">):</span>  <span class="c1"># Draw as rectangle</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Drawing a rectangle: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">x_min</span><span class="p">,</span> <span class="n">y_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">=</span> <span class="n">qc_shapely</span><span class="o">.</span><span class="n">bounds</span>
            <span class="n">poly_ansys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">draw_rect_corner</span><span class="p">(</span>
                <span class="o">*</span><span class="n">parse_units</span><span class="p">([</span>
                    <span class="p">[</span><span class="n">x_min</span><span class="p">,</span> <span class="n">y_min</span><span class="p">,</span>
                     <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">get_chip_z</span><span class="p">(</span><span class="n">qgeom</span><span class="o">.</span><span class="n">chip</span><span class="p">)],</span>
                    <span class="n">x_max</span> <span class="o">-</span> <span class="n">x_min</span><span class="p">,</span>
                    <span class="n">y_max</span> <span class="o">-</span> <span class="n">y_min</span><span class="p">,</span>
                    <span class="mi">0</span><span class="p">,</span>
                <span class="p">]),</span>
                <span class="o">**</span><span class="n">ansys_options</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">rename_obj</span><span class="p">(</span><span class="n">poly_ansys</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Draw general closed poly</span>
            <span class="n">poly_ansys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">draw_polyline</span><span class="p">(</span><span class="n">points_3d</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                                                    <span class="n">closed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                                    <span class="o">**</span><span class="n">ansys_options</span><span class="p">)</span>
            <span class="c1"># rename: handle bug if the name of the cut already exits and is used to make a cut</span>
            <span class="n">poly_ansys</span> <span class="o">=</span> <span class="n">poly_ansys</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="n">qc_fillet</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">qgeom</span><span class="o">.</span><span class="n">fillet</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">qc_fillet</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">qc_fillet</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="n">qc_fillet</span><span class="p">)</span>
            <span class="n">idxs_to_fillet</span> <span class="o">=</span> <span class="n">good_fillet_idxs</span><span class="p">(</span>
                <span class="n">points</span><span class="p">,</span>
                <span class="n">qc_fillet</span><span class="p">,</span>
                <span class="n">precision</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_template_options</span><span class="o">.</span><span class="n">PRECISION</span><span class="p">,</span>
                <span class="n">isclosed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">idxs_to_fillet</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">_fillet</span><span class="p">(</span><span class="n">qc_fillet</span><span class="p">,</span> <span class="n">idxs_to_fillet</span><span class="p">,</span> <span class="n">poly_ansys</span><span class="p">)</span>

        <span class="c1"># Subtract interior shapes, if any</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">qc_shapely</span><span class="o">.</span><span class="n">interiors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">qc_shapely</span><span class="o">.</span><span class="n">interiors</span><span class="p">):</span>
                <span class="n">interior_points_3d</span> <span class="o">=</span> <span class="n">to_vec3D</span><span class="p">(</span><span class="n">parse_units</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">coords</span><span class="p">)),</span>
                                              <span class="n">qc_chip_z</span><span class="p">)</span>
                <span class="n">inner_shape</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">draw_polyline</span><span class="p">(</span>
                    <span class="n">interior_points_3d</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">closed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">[</span><span class="n">inner_shape</span><span class="p">])</span>

        <span class="c1"># Input chip info into self.chip_subtract_dict</span>
        <span class="k">if</span> <span class="n">qgeom</span><span class="o">.</span><span class="n">chip</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chip_subtract_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">chip_subtract_dict</span><span class="p">[</span><span class="n">qgeom</span><span class="o">.</span><span class="n">chip</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">qgeom</span><span class="p">[</span><span class="s2">&quot;subtract&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">chip_subtract_dict</span><span class="p">[</span><span class="n">qgeom</span><span class="o">.</span><span class="n">chip</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># Potentially add to list of elements to metallize</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">qgeom</span><span class="p">[</span><span class="s2">&quot;helper&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assign_perfE</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.render_element_path">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.render_element_path">[docs]</a>
    <span class="k">def</span> <span class="nf">render_element_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qgeom</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Render a path-type element.</span>

<span class="sd">        Args:</span>
<span class="sd">            qgeom (pd.Series): GeoSeries of element properties.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ansys_options</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">transparency</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

        <span class="n">qc_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_components</span><span class="p">[</span><span class="n">qgeom</span><span class="p">[</span><span class="s2">&quot;component&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">name</span>
        <span class="n">qc_elt</span> <span class="o">=</span> <span class="n">get_clean_name</span><span class="p">(</span><span class="n">qgeom</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>

        <span class="n">qc_shapely</span> <span class="o">=</span> <span class="n">qgeom</span><span class="o">.</span><span class="n">geometry</span>  <span class="c1"># shapely geom</span>
        <span class="n">qc_chip_z</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">get_chip_z</span><span class="p">(</span><span class="n">qgeom</span><span class="o">.</span><span class="n">chip</span><span class="p">))</span>

        <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">qc_elt</span><span class="si">}{</span><span class="n">QAnsysRenderer</span><span class="o">.</span><span class="n">NAME_DELIM</span><span class="si">}{</span><span class="n">qc_name</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">qc_width</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="n">qgeom</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>

        <span class="n">points</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">qc_shapely</span><span class="o">.</span><span class="n">coords</span><span class="p">))</span>
        <span class="n">points_3d</span> <span class="o">=</span> <span class="n">to_vec3D</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">qc_chip_z</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">poly_ansys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">draw_polyline</span><span class="p">(</span><span class="n">points_3d</span><span class="p">,</span>
                                                    <span class="n">closed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                                    <span class="o">**</span><span class="n">ansys_options</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="s2">&quot;No modeler was found. Are you connected to an active Ansys Design?&quot;</span>
                <span class="p">)</span>
            <span class="k">raise</span>

        <span class="n">poly_ansys</span> <span class="o">=</span> <span class="n">poly_ansys</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="n">qc_fillet</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">qgeom</span><span class="o">.</span><span class="n">fillet</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">qc_fillet</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">qc_fillet</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="n">qc_fillet</span><span class="p">)</span>
            <span class="n">idxs_to_fillet</span> <span class="o">=</span> <span class="n">good_fillet_idxs</span><span class="p">(</span>
                <span class="n">points</span><span class="p">,</span>
                <span class="n">qc_fillet</span><span class="p">,</span>
                <span class="n">precision</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_template_options</span><span class="o">.</span><span class="n">PRECISION</span><span class="p">,</span>
                <span class="n">isclosed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">idxs_to_fillet</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">_fillet</span><span class="p">(</span><span class="n">qc_fillet</span><span class="p">,</span> <span class="n">idxs_to_fillet</span><span class="p">,</span> <span class="n">poly_ansys</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">qc_width</span><span class="p">:</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">vlen</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">qc_chip_z</span>
            <span class="p">])</span> <span class="o">+</span> <span class="n">qc_width</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">vlen</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">y0</span> <span class="o">-</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
            <span class="n">p1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">qc_chip_z</span>
            <span class="p">])</span> <span class="o">+</span> <span class="n">qc_width</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">vlen</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x0</span> <span class="o">-</span> <span class="n">x1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
            <span class="n">shortline</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">draw_polyline</span><span class="p">([</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">],</span>
                                                   <span class="n">closed</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># sweepline</span>
            <span class="kn">import</span> <span class="nn">pythoncom</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">_sweep_along_path</span><span class="p">(</span><span class="n">shortline</span><span class="p">,</span> <span class="n">poly_ansys</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">pythoncom</span><span class="o">.</span><span class="n">com_error</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;com_error: &quot;</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
                <span class="n">hr</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">exc</span><span class="p">,</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">error</span><span class="o">.</span><span class="n">args</span>
                <span class="k">if</span> <span class="n">msg</span> <span class="o">==</span> <span class="s2">&quot;Exception occurred.&quot;</span> <span class="ow">and</span> <span class="n">hr</span> <span class="o">==</span> <span class="o">-</span><span class="mi">2147352567</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="s2">&quot;We cannot find a writable design. </span><span class="se">\n</span><span class="s2">  Either you are trying to use a Ansys &quot;</span>
                        <span class="s2">&quot;design that is not empty, in which case please clear it manually or with the &quot;</span>
                        <span class="s2">&quot;renderer method clean_active_design(). </span><span class="se">\n</span><span class="s2">  Or you accidentally deleted &quot;</span>
                        <span class="s2">&quot;the design in Ansys, in which case please create a new one.&quot;</span>
                    <span class="p">)</span>
                <span class="k">raise</span> <span class="n">error</span>

        <span class="k">if</span> <span class="n">qgeom</span><span class="o">.</span><span class="n">chip</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chip_subtract_dict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">chip_subtract_dict</span><span class="p">[</span><span class="n">qgeom</span><span class="o">.</span><span class="n">chip</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">qgeom</span><span class="p">[</span><span class="s2">&quot;subtract&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">chip_subtract_dict</span><span class="p">[</span><span class="n">qgeom</span><span class="o">.</span><span class="n">chip</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">qgeom</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">qgeom</span><span class="p">[</span><span class="s2">&quot;helper&quot;</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assign_perfE</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.add_endcaps">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.add_endcaps">[docs]</a>
    <span class="k">def</span> <span class="nf">add_endcaps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">open_pins</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create endcaps (rectangular cutouts) for all pins in the list</span>
<span class="sd">        open_pins and add them to chip_subtract_dict. Each element in open_pins</span>
<span class="sd">        takes on the form (component_name, pin_name) and corresponds to a</span>
<span class="sd">        single pin.</span>

<span class="sd">        Args:</span>
<span class="sd">            open_pins (Union[list, None], optional): List of tuples of pins that are open. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">open_pins</span> <span class="o">=</span> <span class="n">open_pins</span> <span class="k">if</span> <span class="n">open_pins</span> <span class="k">else</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">comp</span><span class="p">,</span> <span class="n">pin</span> <span class="ow">in</span> <span class="n">open_pins</span><span class="p">:</span>
            <span class="n">pin_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">comp</span><span class="p">]</span><span class="o">.</span><span class="n">pins</span><span class="p">[</span><span class="n">pin</span><span class="p">]</span>
            <span class="n">width</span><span class="p">,</span> <span class="n">gap</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">([</span><span class="n">pin_dict</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span> <span class="n">pin_dict</span><span class="p">[</span><span class="s2">&quot;gap&quot;</span><span class="p">]])</span>
            <span class="n">mid</span><span class="p">,</span> <span class="n">normal</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="n">pin_dict</span><span class="p">[</span><span class="s2">&quot;middle&quot;</span><span class="p">]),</span> <span class="n">pin_dict</span><span class="p">[</span><span class="s2">&quot;normal&quot;</span><span class="p">]</span>
            <span class="n">chip_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">comp</span><span class="p">]</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">chip</span>
            <span class="n">qc_chip_z</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">get_chip_z</span><span class="p">(</span><span class="n">chip_name</span><span class="p">))</span>
            <span class="n">rect_mid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mid</span> <span class="o">+</span> <span class="n">normal</span> <span class="o">*</span> <span class="n">gap</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="n">qc_chip_z</span><span class="p">])</span>
            <span class="c1"># Assumption: pins only point in x or y directions</span>
            <span class="c1"># If this assumption is not satisfied, draw_rect_center no longer works -&gt; must use draw_polyline</span>
            <span class="n">endcap_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;endcap_</span><span class="si">{</span><span class="n">comp</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">pin</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="nb">abs</span><span class="p">(</span><span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">draw_rect_center</span><span class="p">(</span><span class="n">rect_mid</span><span class="p">,</span>
                                              <span class="n">x_size</span><span class="o">=</span><span class="n">gap</span><span class="p">,</span>
                                              <span class="n">y_size</span><span class="o">=</span><span class="n">width</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">gap</span><span class="p">,</span>
                                              <span class="n">name</span><span class="o">=</span><span class="n">endcap_name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">draw_rect_center</span><span class="p">(</span><span class="n">rect_mid</span><span class="p">,</span>
                                              <span class="n">x_size</span><span class="o">=</span><span class="n">width</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">gap</span><span class="p">,</span>
                                              <span class="n">y_size</span><span class="o">=</span><span class="n">gap</span><span class="p">,</span>
                                              <span class="n">name</span><span class="o">=</span><span class="n">endcap_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">chip_subtract_dict</span><span class="p">[</span><span class="n">pin_dict</span><span class="p">[</span><span class="s2">&quot;chip&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">endcap_name</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.get_chip_names">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.get_chip_names">[docs]</a>
    <span class="k">def</span> <span class="nf">get_chip_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain a list of chips on which the selection of components, if valid, resides.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[str]: Chips to render.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># One or more components not in QDesign.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;One or more components not found.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="n">chip_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># All components rendered.</span>
            <span class="n">comps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">components</span>
            <span class="k">for</span> <span class="n">qcomp</span> <span class="ow">in</span> <span class="n">comps</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;chip&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">comps</span><span class="p">[</span><span class="n">qcomp</span><span class="p">]</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">chip_designation_error</span><span class="p">()</span>
                    <span class="k">return</span> <span class="p">[]</span>
                <span class="c1"># elif comps[qcomp].options.chip != &#39;main&#39;:</span>
                <span class="c1">#    self.chip_not_main()</span>
                <span class="c1">#    return []</span>
                <span class="n">chip_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">comps</span><span class="p">[</span><span class="n">qcomp</span><span class="p">]</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">chip</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># Strict subset rendered.</span>
            <span class="n">icomps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_components</span>
            <span class="k">for</span> <span class="n">qcomp_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">qcomp_ids</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;chip&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">icomps</span><span class="p">[</span><span class="n">qcomp_id</span><span class="p">]</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">chip_designation_error</span><span class="p">()</span>
                    <span class="k">return</span> <span class="p">[]</span>
                <span class="c1"># elif icomps[qcomp_id].options.chip != &#39;main&#39;:</span>
                <span class="c1">#    self.chip_not_main()</span>
                <span class="c1">#    return []</span>
                <span class="n">chip_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">icomps</span><span class="p">[</span><span class="n">qcomp_id</span><span class="p">]</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">chip</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">unique_name</span> <span class="ow">in</span> <span class="n">chip_names</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">unique_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">chips</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">chip_not_in_design_error</span><span class="p">(</span><span class="n">unique_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">chip_names</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.chip_designation_error">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.chip_designation_error">[docs]</a>
    <span class="k">def</span> <span class="nf">chip_designation_error</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Warning message that appears when the Ansys renderer fails to locate a component&#39;s chip designation.</span>
<span class="sd">        Provides instructions for a temporary workaround until the layer stack is finalized.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;This component currently lacks a chip designation. Please add chip=&#39;main&#39; to the component&#39;s default_options dictionary, restart the kernel, and try again.&quot;</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.chip_not_in_design_error">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.chip_not_in_design_error">[docs]</a>
    <span class="k">def</span> <span class="nf">chip_not_in_design_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">missing_chip</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Warning message that appears when the Ansys renderer fails to locate a component&#39;s chip designation in DesignPlanar (or any child of QDesign).</span>
<span class="sd">        Provides instructions for a temporary workaround until the layer stack is finalized.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;This component currently lacks a chip designation in DesignPlanar, or any child of QDesign. &#39;</span>
            <span class="sa">f</span><span class="s1">&#39;Please add dict for chip=</span><span class="se">\&#39;</span><span class="si">{</span><span class="n">missing_chip</span><span class="si">}</span><span class="se">\&#39;</span><span class="s1"> in DesignPlanar, or child of QDesign. Then restart the kernel, and try again.&#39;</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.chip_not_main">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.chip_not_main">[docs]</a>
    <span class="k">def</span> <span class="nf">chip_not_main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Warning message that appears when a component&#39;s chip designation is not &#39;main&#39;.</span>
<span class="sd">        As of 05/10/21, all chip designations should be &#39;main&#39; until the layer stack is finalized.</span>
<span class="sd">        Provides instructions for a temporary workaround until the layer stack is finalized.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;The chip designation for this component is not &#39;main&#39;. Please set chip=&#39;main&#39; in its default_options dictionary, restart the kernel, and try again.&quot;</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.get_min_bounding_box">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.get_min_bounding_box">[docs]</a>
    <span class="k">def</span> <span class="nf">get_min_bounding_box</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determine the max/min x/y coordinates of the smallest rectangular, axis-aligned</span>
<span class="sd">        bounding box that will enclose a selection of components to render, given by</span>
<span class="sd">        self.qcomp_ids. This method is only used when box_plus_buffer is True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple[float]: min x, min y, max x, and max y coordinates of bounding box.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">min_x_main</span> <span class="o">=</span> <span class="n">min_y_main</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span>
        <span class="n">max_x_main</span> <span class="o">=</span> <span class="n">max_y_main</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;-inf&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># One or more components not in QDesign.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;One or more components not found.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># All components rendered.</span>
            <span class="k">for</span> <span class="n">qcomp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">components</span><span class="p">:</span>
                <span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">components</span><span class="p">[</span>
                    <span class="n">qcomp</span><span class="p">]</span><span class="o">.</span><span class="n">qgeometry_bounds</span><span class="p">()</span>
                <span class="n">min_x_main</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">min_x_main</span><span class="p">)</span>
                <span class="n">min_y_main</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">min_y</span><span class="p">,</span> <span class="n">min_y_main</span><span class="p">)</span>
                <span class="n">max_x_main</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_x</span><span class="p">,</span> <span class="n">max_x_main</span><span class="p">)</span>
                <span class="n">max_y_main</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_y</span><span class="p">,</span> <span class="n">max_y_main</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># Strict subset rendered.</span>
            <span class="k">for</span> <span class="n">qcomp_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">qcomp_ids</span><span class="p">:</span>
                <span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_components</span><span class="p">[</span>
                    <span class="n">qcomp_id</span><span class="p">]</span><span class="o">.</span><span class="n">qgeometry_bounds</span><span class="p">()</span>
                <span class="n">min_x_main</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">min_x_main</span><span class="p">)</span>
                <span class="n">min_y_main</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">min_y</span><span class="p">,</span> <span class="n">min_y_main</span><span class="p">)</span>
                <span class="n">max_x_main</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_x</span><span class="p">,</span> <span class="n">max_x_main</span><span class="p">)</span>
                <span class="n">max_y_main</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">max_y</span><span class="p">,</span> <span class="n">max_y_main</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">min_x_main</span><span class="p">,</span> <span class="n">min_y_main</span><span class="p">,</span> <span class="n">max_x_main</span><span class="p">,</span> <span class="n">max_y_main</span></div>


<div class="viewcode-block" id="QAnsysRenderer.render_chips">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.render_chips">[docs]</a>
    <span class="k">def</span> <span class="nf">render_chips</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                     <span class="n">draw_sample_holder</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                     <span class="n">box_plus_buffer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Render all chips containing components in self.qcomp_ids.</span>

<span class="sd">        Args:</span>
<span class="sd">            draw_sample_holder (bool, optional): Option to draw vacuum box around chip. Defaults to True.</span>
<span class="sd">            box_plus_buffer (bool, optional): Whether or not to use a box plus buffer. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">chip_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_chip_names</span><span class="p">()</span>
        <span class="c1"># added this quick hack for the case of flipchip device.</span>
        <span class="c1"># current self.get_chip_names only renders chips whose components are to be rendered.</span>
        <span class="c1"># so if you happen to only draw a qubit only, then the other chip (C_chip) does not get rendered because get_chip_names only returns Q_chip</span>
        <span class="c1"># I hope this gets a prettier fix in the future</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_metadata</span><span class="o">.</span><span class="n">design_name</span> <span class="o">==</span> <span class="s1">&#39;FlipChip_Device&#39;</span><span class="p">:</span>
            <span class="n">chip_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">chips</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cw_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cw_y</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(),</span> <span class="n">Dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cc_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cc_y</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(),</span> <span class="n">Dict</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">chip_name</span> <span class="ow">in</span> <span class="n">chip_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">box_plus_buffer</span><span class="p">:</span>  <span class="c1"># Get bounding box of components first</span>
                <span class="n">min_x_main</span><span class="p">,</span> <span class="n">min_y_main</span><span class="p">,</span> <span class="n">max_x_main</span><span class="p">,</span> <span class="n">max_y_main</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">get_min_bounding_box</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cw_x</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">chip_name</span><span class="p">:</span> <span class="n">max_x_main</span> <span class="o">-</span> <span class="n">min_x_main</span>
                                 <span class="p">})</span>  <span class="c1"># chip width along x</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cw_y</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">chip_name</span><span class="p">:</span> <span class="n">max_y_main</span> <span class="o">-</span> <span class="n">min_y_main</span>
                                 <span class="p">})</span>  <span class="c1"># chip width along y</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cw_x</span><span class="p">[</span><span class="n">chip_name</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">parse_units</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;x_buffer_width_mm&quot;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cw_y</span><span class="p">[</span><span class="n">chip_name</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">parse_units</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;y_buffer_width_mm&quot;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cc_x</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">chip_name</span><span class="p">:</span>
                    <span class="p">(</span><span class="n">max_x_main</span> <span class="o">+</span> <span class="n">min_x_main</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">})</span>  <span class="c1"># x coord of chip center</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cc_y</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">chip_name</span><span class="p">:</span>
                    <span class="p">(</span><span class="n">max_y_main</span> <span class="o">+</span> <span class="n">min_y_main</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">})</span>  <span class="c1"># y coord of chip center</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># Adhere to chip placement and dimensions in QDesign</span>
                <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">get_chip_size</span><span class="p">(</span>
                    <span class="n">chip_name</span><span class="p">)</span>  <span class="c1"># x/y center/width same for all chips</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cw_x</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">chip_name</span><span class="p">:</span> <span class="n">parse_units</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s2">&quot;size_x&quot;</span><span class="p">])})</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cw_y</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">chip_name</span><span class="p">:</span> <span class="n">parse_units</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s2">&quot;size_y&quot;</span><span class="p">])})</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cc_x</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">chip_name</span><span class="p">:</span> <span class="n">parse_units</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s2">&quot;center_x&quot;</span><span class="p">])})</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cc_y</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">chip_name</span><span class="p">:</span> <span class="n">parse_units</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="s2">&quot;center_y&quot;</span><span class="p">])})</span>
                <span class="c1"># self.cw_x, self.cw_y, _ = parse_units(</span>
                <span class="c1">#    [p[&#39;size_x&#39;], p[&#39;size_y&#39;], p[&#39;size_z&#39;]])</span>
                <span class="c1"># self.cc_x, self.cc_y, _ = parse_units(</span>
                <span class="c1">#    [p[&#39;center_x&#39;], p[&#39;center_y&#39;], p[&#39;center_z&#39;]])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">render_chip</span><span class="p">(</span><span class="n">chip_name</span><span class="p">,</span> <span class="n">draw_sample_holder</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">draw_sample_holder</span><span class="p">:</span>  <span class="c1"># HFSS</span>
            <span class="k">if</span> <span class="s2">&quot;sample_holder_top&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">variables</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">get_chip_size</span><span class="p">(</span><span class="n">chip_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">vac_height</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span>
                <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="s2">&quot;sample_holder_top&quot;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s2">&quot;sample_holder_bottom&quot;</span><span class="p">]])</span>
            <span class="c1"># very simple algorithm to build the vacuum box. It could be made better in the future</span>
            <span class="c1"># assuming that both</span>
            <span class="n">cc_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cc_x</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>
            <span class="n">cc_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cc_y</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>
            <span class="n">cw_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cw_x</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>
            <span class="n">cw_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cw_y</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>

            <span class="n">cc_x_left</span><span class="p">,</span> <span class="n">cc_x_right</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">cc_x</span> <span class="o">-</span> <span class="n">cw_x</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">cc_x</span> <span class="o">+</span>
                                                                    <span class="n">cw_x</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">cc_y_left</span><span class="p">,</span> <span class="n">cc_y_right</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">cc_y</span> <span class="o">-</span> <span class="n">cw_y</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">cc_y</span> <span class="o">+</span>
                                                                    <span class="n">cw_y</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

            <span class="n">cc_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">cc_x_left</span> <span class="o">+</span> <span class="n">cc_x_right</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">cc_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">cc_y_left</span> <span class="o">+</span> <span class="n">cc_y_right</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">cw_x</span> <span class="o">=</span> <span class="n">cc_x_right</span> <span class="o">-</span> <span class="n">cc_x_left</span>
            <span class="n">cw_y</span> <span class="o">=</span> <span class="n">cc_y_right</span> <span class="o">-</span> <span class="n">cc_y_left</span>

            <span class="n">vacuum_box</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">draw_box_center</span><span class="p">(</span>
                <span class="p">[</span><span class="n">cc_x</span><span class="p">,</span> <span class="n">cc_y</span><span class="p">,</span> <span class="p">(</span><span class="n">vac_height</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vac_height</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">],</span>
                <span class="p">[</span><span class="n">cw_x</span><span class="p">,</span> <span class="n">cw_y</span><span class="p">,</span> <span class="nb">sum</span><span class="p">(</span><span class="n">vac_height</span><span class="p">)],</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;sample_holder&quot;</span><span class="p">,</span>
            <span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.render_chip">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.render_chip">[docs]</a>
    <span class="k">def</span> <span class="nf">render_chip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chip_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">draw_sample_holder</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Render individual chips.</span>

<span class="sd">        Args:</span>
<span class="sd">            chip_name (str): Name of chip.</span>
<span class="sd">            draw_sample_holder (bool): Option to draw vacuum box around chip.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ansys_options</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">transparency</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="n">ops</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">_chips</span><span class="p">[</span><span class="n">chip_name</span><span class="p">]</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">get_chip_size</span><span class="p">(</span><span class="n">chip_name</span><span class="p">)</span>
        <span class="n">z_coord</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">([</span><span class="n">p</span><span class="p">[</span><span class="s2">&quot;center_z&quot;</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="s2">&quot;size_z&quot;</span><span class="p">]])</span>
        <span class="n">plane</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">draw_rect_center</span><span class="p">(</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cc_x</span><span class="p">[</span><span class="n">chip_name</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">cc_y</span><span class="p">[</span><span class="n">chip_name</span><span class="p">],</span> <span class="n">z_coord</span><span class="p">],</span>
            <span class="n">x_size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cw_x</span><span class="p">[</span><span class="n">chip_name</span><span class="p">],</span>
            <span class="n">y_size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cw_y</span><span class="p">[</span><span class="n">chip_name</span><span class="p">],</span>
            <span class="n">z_size</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ground_</span><span class="si">{</span><span class="n">chip_name</span><span class="si">}</span><span class="s2">_plane&quot;</span><span class="p">,</span>
            <span class="o">**</span><span class="n">ansys_options</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">whole_chip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">draw_box_center</span><span class="p">(</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cc_x</span><span class="p">[</span><span class="n">chip_name</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">cc_y</span><span class="p">[</span><span class="n">chip_name</span><span class="p">],</span> <span class="n">z_coord</span> <span class="o">+</span> <span class="n">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cw_x</span><span class="p">[</span><span class="n">chip_name</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">cw_y</span><span class="p">[</span><span class="n">chip_name</span><span class="p">],</span> <span class="o">-</span><span class="n">height</span><span class="p">],</span>
            <span class="n">name</span><span class="o">=</span><span class="n">chip_name</span><span class="p">,</span>
            <span class="n">material</span><span class="o">=</span><span class="n">ops</span><span class="p">[</span><span class="s2">&quot;material&quot;</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">186</span><span class="p">,</span> <span class="mi">186</span><span class="p">,</span> <span class="mi">205</span><span class="p">),</span>
            <span class="n">transparency</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
            <span class="n">wireframe</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chip_subtract_dict</span><span class="p">[</span><span class="n">chip_name</span><span class="p">]:</span>
            <span class="c1"># Any layer which has subtract=True qgeometries will have a ground plane</span>
            <span class="c1"># TODO: Material property assignment may become layer-dependent.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assign_perfE</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ground_</span><span class="si">{</span><span class="n">chip_name</span><span class="si">}</span><span class="s2">_plane&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.subtract_from_ground">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.subtract_from_ground">[docs]</a>
    <span class="k">def</span> <span class="nf">subtract_from_ground</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;For each chip, subtract all &quot;negative&quot; shapes residing on its</span>
<span class="sd">        surface if any such shapes exist.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">chip</span><span class="p">,</span> <span class="n">shapes</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chip_subtract_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">shapes</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">pythoncom</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ground_</span><span class="si">{</span><span class="n">chip</span><span class="si">}</span><span class="s2">_plane&quot;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">shapes</span><span class="p">))</span>
                <span class="k">except</span> <span class="n">pythoncom</span><span class="o">.</span><span class="n">com_error</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;com_error: &quot;</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
                    <span class="n">hr</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">exc</span><span class="p">,</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">error</span><span class="o">.</span><span class="n">args</span>
                    <span class="k">if</span> <span class="n">msg</span> <span class="o">==</span> <span class="s2">&quot;Exception occurred.&quot;</span> <span class="ow">and</span> <span class="n">hr</span> <span class="o">==</span> <span class="o">-</span><span class="mi">2147352567</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="s2">&quot;This error might indicate that a component was not correctly rendered in Ansys. </span><span class="se">\n</span><span class="s2">&quot;</span>
                            <span class="s2">&quot;This might have been caused by floating point numerical corrections. </span><span class="se">\n</span><span class="s2"> For example &quot;</span>
                            <span class="s2">&quot;Ansys will inconsistently render (or not) routing that has 180deg jogs with the two &quot;</span>
                            <span class="s2">&quot;adjacent segments spaced &#39;exactly&#39; twice the fillet radius (U shaped routing). </span><span class="se">\n</span><span class="s2">&quot;</span>
                            <span class="s2">&quot;In this example, changing your fillet radius to a smaller number would solve the issue.&quot;</span>
                        <span class="p">)</span>
                    <span class="k">raise</span> <span class="n">error</span></div>


<div class="viewcode-block" id="QAnsysRenderer.add_mesh">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.add_mesh">[docs]</a>
    <span class="k">def</span> <span class="nf">add_mesh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add mesh to all elements in self.assign_mesh.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">assign_mesh</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">mesh_length</span><span class="p">(</span>
                <span class="s2">&quot;small_mesh&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assign_mesh</span><span class="p">,</span>
                <span class="n">MaxLength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;max_mesh_length_jj&quot;</span><span class="p">],</span>
            <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">exists_port_mesh</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_port_mesh</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exists_port_mesh</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">exists_port_mesh</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">mesh_length</span><span class="p">(</span>
                <span class="s1">&#39;port_mesh&#39;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assign_port_mesh</span><span class="p">,</span>
                <span class="n">MaxLength</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s1">&#39;max_mesh_length_port&#39;</span><span class="p">])</span></div>


    <span class="c1"># Still implementing</span>
<div class="viewcode-block" id="QAnsysRenderer.auto_wirebonds">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.auto_wirebonds">[docs]</a>
    <span class="k">def</span> <span class="nf">auto_wirebonds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds wirebonds to the Ansys model for path elements where;</span>
<span class="sd">        subtract = True and wire_bonds = True.</span>

<span class="sd">        Uses render options for determining of the:</span>
<span class="sd">        * wb_threshold -- the minimum distance between two vertices of a path for a</span>
<span class="sd">        wirebond to be added.</span>
<span class="sd">        * wb_offset -- offset distance for wirebond placement (along the direction</span>
<span class="sd">        of the cpw)</span>
<span class="sd">        * wb_size -- controls the width of the wirebond (wb_size * path[&#39;width&#39;])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">norm_z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

        <span class="n">wb_threshold</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;wb_threshold&quot;</span><span class="p">])</span>
        <span class="n">wb_offset</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;wb_offset&quot;</span><span class="p">])</span>

        <span class="c1"># selecting only the qgeometry which meet criteria</span>
        <span class="n">wb_table</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">table</span><span class="p">[</span><span class="s2">&quot;hfss_wire_bonds&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">]</span>
        <span class="n">wb_table2</span> <span class="o">=</span> <span class="n">wb_table</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">wb_table</span><span class="p">[</span><span class="s2">&quot;subtract&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">]</span>

        <span class="c1"># looping through each qgeometry</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">wb_table2</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">]</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">]</span>
            <span class="c1"># looping through the linestring of the path to determine where WBs should be</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">i_p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">geom</span><span class="o">.</span><span class="n">coords</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
                <span class="n">j_p</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">geom</span><span class="o">.</span><span class="n">coords</span><span class="p">[:][</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
                <span class="n">vert_distance</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="n">distance</span><span class="o">.</span><span class="n">euclidean</span><span class="p">(</span><span class="n">i_p</span><span class="p">,</span> <span class="n">j_p</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">vert_distance</span> <span class="o">&gt;</span> <span class="n">wb_threshold</span><span class="p">:</span>
                    <span class="c1"># Gets number of wirebonds to fit in section of path</span>
                    <span class="n">wb_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">vert_distance</span> <span class="o">//</span> <span class="n">wb_threshold</span><span class="p">)</span>
                    <span class="c1"># finds the position vector</span>
                    <span class="n">wb_pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">j_p</span> <span class="o">-</span> <span class="n">i_p</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">wb_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="c1"># gets the norm vector for finding the orthonormal of path</span>
                    <span class="n">wb_vec</span> <span class="o">=</span> <span class="n">wb_pos</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">wb_pos</span><span class="p">)</span>
                    <span class="c1"># finds the orthonormal (for orientation)</span>
                    <span class="n">wb_perp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">norm_z</span><span class="p">,</span> <span class="n">wb_vec</span><span class="p">)[:</span><span class="mi">2</span><span class="p">]</span>
                    <span class="c1"># finds the first wirebond to place (rest are in the loop)</span>
                    <span class="n">wb_pos_step</span> <span class="o">=</span> <span class="n">parse_units</span><span class="p">(</span><span class="n">wb_pos</span> <span class="o">+</span> <span class="n">i_p</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">wb_vec</span> <span class="o">*</span>
                                                               <span class="n">wb_offset</span><span class="p">)</span>
                    <span class="c1"># Other input values could be modified, kept to minimal selection for automation</span>
                    <span class="c1"># for the time being. Loops to place N wirebonds based on length of path section.</span>
                    <span class="k">for</span> <span class="n">wb_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">wb_count</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">draw_wirebond</span><span class="p">(</span>
                            <span class="n">pos</span><span class="o">=</span><span class="n">wb_pos_step</span> <span class="o">+</span> <span class="n">parse_units</span><span class="p">(</span><span class="n">wb_pos</span> <span class="o">*</span> <span class="n">wb_i</span><span class="p">),</span>
                            <span class="n">ori</span><span class="o">=</span><span class="n">wb_perp</span><span class="p">,</span>
                            <span class="n">width</span><span class="o">=</span><span class="n">parse_units</span><span class="p">(</span><span class="n">width</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;wb_size&quot;</span><span class="p">]),</span>
                            <span class="n">height</span><span class="o">=</span><span class="n">parse_units</span><span class="p">(</span><span class="n">width</span> <span class="o">*</span>
                                               <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">[</span><span class="s2">&quot;wb_size&quot;</span><span class="p">]),</span>
                            <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                            <span class="n">wire_diameter</span><span class="o">=</span><span class="s2">&quot;0.015mm&quot;</span><span class="p">,</span>
                            <span class="n">NumSides</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;g_wb&quot;</span><span class="p">,</span>
                            <span class="n">material</span><span class="o">=</span><span class="s2">&quot;pec&quot;</span><span class="p">,</span>
                            <span class="n">solve_inside</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.clean_active_design">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.clean_active_design">[docs]</a>
    <span class="k">def</span> <span class="nf">clean_active_design</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove all elements from Ansys Modeler.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">get_all_object_names</span><span class="p">():</span>
                <span class="n">project_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">project_name</span>
                <span class="n">design_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design_name</span>
                <span class="n">select_all</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">get_all_object_names</span><span class="p">())</span>

                <span class="c1"># self.pinfo.design does not work, thus the following line</span>
                <span class="n">oDesktop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">_desktop</span>
                <span class="n">oProject</span> <span class="o">=</span> <span class="n">oDesktop</span><span class="o">.</span><span class="n">SetActiveProject</span><span class="p">(</span><span class="n">project_name</span><span class="p">)</span>
                <span class="n">oDesign</span> <span class="o">=</span> <span class="n">oProject</span><span class="o">.</span><span class="n">SetActiveDesign</span><span class="p">(</span><span class="n">design_name</span><span class="p">)</span>

                <span class="c1"># The available editors: &quot;Layout&quot;, &quot;3D Modeler&quot;, &quot;SchematicEditor&quot;</span>
                <span class="n">oEditor</span> <span class="o">=</span> <span class="n">oDesign</span><span class="o">.</span><span class="n">SetActiveEditor</span><span class="p">(</span><span class="s2">&quot;3D Modeler&quot;</span><span class="p">)</span>

                <span class="n">oEditor</span><span class="o">.</span><span class="n">Delete</span><span class="p">([</span><span class="s2">&quot;NAME:Selections&quot;</span><span class="p">,</span> <span class="s2">&quot;Selections:=&quot;</span><span class="p">,</span> <span class="n">select_all</span><span class="p">])</span></div>


<div class="viewcode-block" id="QAnsysRenderer.set_variables">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.set_variables">[docs]</a>
    <span class="k">def</span> <span class="nf">set_variables</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fixes the junction properties before setup. This is necessary becasue the eigenmode</span>
<span class="sd">        analysis only considers the junction as a lumped CL element.</span>

<span class="sd">        Args:</span>
<span class="sd">            variables (Dict): dictionary of variables to set in Ansys. For example it could</span>
<span class="sd">                contain &#39;Lj&#39;: &#39;10 nH&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">design</span><span class="o">.</span><span class="n">set_variable</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Please create a design before setting variables, otherwise all variables will be set to 0 during rendering by default.&quot;</span>
                <span class="p">)</span></div>


    <span class="c1"># TODO: epr methods below should not be in the renderer, but in the analysis files.</span>
    <span class="c1">#  Thus needs to remove the dependency from pinfo, which is Ansys-specific.</span>

<div class="viewcode-block" id="QAnsysRenderer.epr_start">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.epr_start">[docs]</a>
    <span class="k">def</span> <span class="nf">epr_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">junctions</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">dissipatives</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Use to initialize the epr analysis package by first identifying which are the junctions,</span>
<span class="sd">        their electrical properties and their reference plane; then initialize the</span>
<span class="sd">        DistributedAnalysis package, which can execute microwave analysis on eigenmode results.</span>

<span class="sd">        Args:</span>
<span class="sd">            junctions (dict, optional): Each element of this dictionary describes one junction.</span>
<span class="sd">                Defaults to dict().</span>
<span class="sd">            dissipatives (dict, optional): Each element of this dictionary describes one dissipative.</span>
<span class="sd">                Defaults to dict().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">junctions</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">junctions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">junctions</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
                <span class="c1"># Check that valid names of variables and objects have been supplied</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">validate_junction_info</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">dissipatives</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">dissipatives</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">dissipative</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

            <span class="c1"># Class handling microwave analysis on eigenmode solutions</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">epr_distributed_analysis</span> <span class="o">=</span> <span class="n">epr</span><span class="o">.</span><span class="n">DistributedAnalysis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.epr_get_stored_energy">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.epr_get_stored_energy">[docs]</a>
    <span class="k">def</span> <span class="nf">epr_get_stored_energy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                              <span class="n">junctions</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                              <span class="n">dissipatives</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Computes the energy stored in the system</span>
<span class="sd">        pinfo must have a valid list of junctions and dissipatives to compute the energy stored</span>
<span class="sd">        in the system. So please provide them here, or using epr_start()</span>

<span class="sd">        Args:</span>
<span class="sd">            junctions (dict, optional): Each element of this dictionary describes one junction.</span>
<span class="sd">                Defaults to dict().</span>
<span class="sd">            dissipatives (dict, optional): Each element of this dictionary describes one dissipative.</span>
<span class="sd">                Defaults to dict().</span>

<span class="sd">        Returns:</span>
<span class="sd">            (float, float, float): energy_elec, energy_elec_substrate, energy_mag</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">junctions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">dissipatives</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">epr_start</span><span class="p">(</span><span class="n">junctions</span><span class="p">,</span> <span class="n">dissipatives</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">epr_distributed_analysis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">epr_start</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">dissipative</span><span class="p">[</span><span class="s2">&quot;dielectrics_bulk&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">eprd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">epr_distributed_analysis</span>
            <span class="n">energy_elec</span> <span class="o">=</span> <span class="n">eprd</span><span class="o">.</span><span class="n">calc_energy_electric</span><span class="p">()</span>
            <span class="n">energy_elec_substrate</span> <span class="o">=</span> <span class="n">eprd</span><span class="o">.</span><span class="n">calc_energy_electric</span><span class="p">(</span>
                <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pinfo</span><span class="o">.</span><span class="n">dissipative</span><span class="p">[</span><span class="s2">&quot;dielectrics_bulk&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">energy_mag</span> <span class="o">=</span> <span class="n">eprd</span><span class="o">.</span><span class="n">calc_energy_magnetic</span><span class="p">()</span>

            <span class="k">return</span> <span class="n">energy_elec</span><span class="p">,</span> <span class="n">energy_elec_substrate</span><span class="p">,</span> <span class="n">energy_mag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;dielectrics_bulk needs to be defined&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.epr_run_analysis">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.epr_run_analysis">[docs]</a>
    <span class="k">def</span> <span class="nf">epr_run_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">junctions</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                         <span class="n">dissipatives</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Executes the EPR analysis</span>
<span class="sd">        pinfo must have a valid list of junctions and dissipatives to compute the energy stored</span>
<span class="sd">        in the system. So please provide them here, or using epr_start()</span>

<span class="sd">        Args:</span>
<span class="sd">            junctions (dict, optional): Each element of this dictionary describes one junction.</span>
<span class="sd">                Defaults to dict().</span>
<span class="sd">            dissipatives (dict, optional): Each element of this dictionary describes one dissipative.</span>
<span class="sd">                Defaults to dict().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">junctions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">dissipatives</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">epr_start</span><span class="p">(</span><span class="n">junctions</span><span class="p">,</span> <span class="n">dissipatives</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epr_distributed_analysis</span><span class="o">.</span><span class="n">do_EPR_analysis</span><span class="p">()</span></div>


<div class="viewcode-block" id="QAnsysRenderer.epr_spectrum_analysis">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.epr_spectrum_analysis">[docs]</a>
    <span class="k">def</span> <span class="nf">epr_spectrum_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cos_trunc</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span> <span class="n">fock_trunc</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">7</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Core epr analysis method.</span>

<span class="sd">        Args:</span>
<span class="sd">            cos_trunc (int, optional): truncation of the cosine. Defaults to 8.</span>
<span class="sd">            fock_trunc (int, optional): truncation of the fock. Defaults to 7.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epr_quantum_analysis</span> <span class="o">=</span> <span class="n">epr</span><span class="o">.</span><span class="n">QuantumAnalysis</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">epr_distributed_analysis</span><span class="o">.</span><span class="n">data_filename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epr_quantum_analysis</span><span class="o">.</span><span class="n">analyze_all_variations</span><span class="p">(</span><span class="n">cos_trunc</span><span class="o">=</span><span class="n">cos_trunc</span><span class="p">,</span>
                                                         <span class="n">fock_trunc</span><span class="o">=</span><span class="n">fock_trunc</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.epr_report_hamiltonian">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.epr_report_hamiltonian">[docs]</a>
    <span class="k">def</span> <span class="nf">epr_report_hamiltonian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                               <span class="n">swp_variable</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;variation&quot;</span><span class="p">,</span>
                               <span class="n">numeric</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reports in a markdown friendly table the hamiltonian results.</span>

<span class="sd">        Args:</span>
<span class="sd">            swp_variable (str, optional): Variable against which we swept. Defaults to &#39;variation&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epr_quantum_analysis</span><span class="o">.</span><span class="n">plot_hamiltonian_results</span><span class="p">(</span>
            <span class="n">swp_variable</span><span class="o">=</span><span class="n">swp_variable</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epr_quantum_analysis</span><span class="o">.</span><span class="n">report_results</span><span class="p">(</span><span class="n">swp_variable</span><span class="o">=</span><span class="n">swp_variable</span><span class="p">,</span>
                                                 <span class="n">numeric</span><span class="o">=</span><span class="n">numeric</span><span class="p">)</span></div>


<div class="viewcode-block" id="QAnsysRenderer.epr_get_frequencies">
<a class="viewcode-back" href="../../../../stubs/qiskit_metal.renderers.QAnsysRenderer.html#qiskit_metal.renderers.QAnsysRenderer.epr_get_frequencies">[docs]</a>
    <span class="k">def</span> <span class="nf">epr_get_frequencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                            <span class="n">junctions</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                            <span class="n">dissipatives</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns all frequencies and quality factors vs a variation.</span>
<span class="sd">        It also initializes the systems for the epr analysis in terms of junctions and dissipatives</span>

<span class="sd">        Args:</span>
<span class="sd">            junctions (dict, optional): Each element of this dictionary describes one junction.</span>
<span class="sd">                Defaults to dict().</span>
<span class="sd">            dissipatives (dict, optional): Each element of this dictionary describes one dissipative.</span>
<span class="sd">                Defaults to dict().</span>

<span class="sd">        Returns:</span>
<span class="sd">            pd.DataFrame: multi-index, frequency and quality factors for each variation point.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO: do I need to reset self.pinfo.junctions (does it keep the older analysis one)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epr_start</span><span class="p">(</span><span class="n">junctions</span><span class="p">,</span> <span class="n">dissipatives</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">epr_distributed_analysis</span><span class="o">.</span><span class="n">get_ansys_frequencies_all</span><span class="p">()</span></div>
</div>

</pre></div>
        </article>
      </div>
      <footer>
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2019, Qiskit Development Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 2025/10/27</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../../../_static/documentation_options.js?v=59fadc99"></script>
    <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/scripts/qiskit-sphinx-theme.js?v=4d77b8ca"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>